<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sleek Calculator</title>
<style>
    :root{
        --bg:#0f172a;
        --panel:#111827;
        --accent:#22c55e;
        --btn:#1f2937;
        --btn-ops:#334155;
        --text:#e5e7eb;
        --muted:#94a3b8;
        --shadow:0 20px 40px rgba(0,0,0,0.35);
    }
    *{box-sizing:border-box;font-family: "Inter", system-ui, -apple-system, sans-serif;}
    body{
        background: radial-gradient(circle at 20% 20%, rgba(34,197,94,0.12), transparent 30%),
                    radial-gradient(circle at 80% 0%, rgba(14,165,233,0.12), transparent 35%),
                    var(--bg);
        min-height:100vh;
        display:flex;
        align-items:center;
        justify-content:center;
        margin:0;
        color:var(--text);
    }
    .calc{
        width:360px;
        background:var(--panel);
        border-radius:28px;
        padding:22px;
        box-shadow: var(--shadow);
        backdrop-filter: blur(8px);
        border:1px solid rgba(255,255,255,0.04);
    }
    .display{
        background:linear-gradient(145deg, rgba(255,255,255,0.05), rgba(0,0,0,0.25));
        border-radius:18px;
        padding:16px 18px;
        min-height:92px;
        box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
        display:flex;
        flex-direction:column;
        justify-content:flex-end;
        margin-bottom:18px;
        overflow:hidden;
    }
    .history{
        color:var(--muted);
        font-size:14px;
        min-height:20px;
        text-align:right;
        word-wrap:break-word;
    }
    .current{
        font-size:36px;
        font-weight:700;
        text-align:right;
        line-height:1.2;
        word-wrap:break-word;
    }
    .grid{
        display:grid;
        grid-template-columns: repeat(4,1fr);
        gap:12px;
    }
    button{
        border:none;
        border-radius:14px;
        padding:16px;
        font-size:18px;
        font-weight:600;
        color:var(--text);
        background:var(--btn);
        cursor:pointer;
        transition: all 0.14s ease;
        box-shadow: 0 10px 24px rgba(0,0,0,0.25), inset 0 0 0 1px rgba(255,255,255,0.03);
    }
    button.operator{background:var(--btn-ops);}
    button.equal{
        background:linear-gradient(135deg, #22c55e, #16a34a);
        color:#052e16;
        box-shadow:0 10px 24px rgba(34,197,94,0.35);
    }
    button:active{
        transform:translateY(2px);
        box-shadow: 0 6px 16px rgba(0,0,0,0.2);
    }
    button:focus{outline:2px solid rgba(34,197,94,0.6);}
    .span-2{grid-column: span 2;}
    .brand{
        display:flex;
        justify-content:space-between;
        align-items:center;
        margin-bottom:10px;
        color:var(--muted);
        font-size:13px;
        letter-spacing:0.5px;
        text-transform:uppercase;
    }
</style>
</head>
<body>
<div class="calc">
    <div class="brand">
        <div>CALC PRO</div>
        <div id="status">Ready</div>
    </div>
    <div class="display" aria-live="polite">
        <div class="history" id="history"></div>
        <div class="current" id="current">0</div>
    </div>
    <div class="grid">
        <button class="operator" data-action="clear">C</button>
        <button class="operator" data-action="sign">±</button>
        <button class="operator" data-action="percent">%</button>
        <button class="operator" data-action="op" data-op="÷">÷</button>

        <button data-num="7">7</button>
        <button data-num="8">8</button>
        <button data-num="9">9</button>
        <button class="operator" data-action="op" data-op="×">×</button>

        <button data-num="4">4</button>
        <button data-num="5">5</button>
        <button data-num="6">6</button>
        <button class="operator" data-action="op" data-op="-">-</button>

        <button data-num="1">1</button>
        <button data-num="2">2</button>
        <button data-num="3">3</button>
        <button class="operator" data-action="op" data-op="+">+</button>

        <button class="span-2" data-num="0">0</button>
        <button data-action="dot">.</button>
        <button class="equal" data-action="equals">=</button>
    </div>
</div>

<script>
(function(){
    const currentEl = document.getElementById('current');
    const historyEl = document.getElementById('history');
    const statusEl = document.getElementById('status');

    let current = "0";
    let previous = null;
    let operator = null;
    let overwrite = false;

    const opsMap = {
        '+': (a,b)=>a+b,
        '-': (a,b)=>a-b,
        '×': (a,b)=>a*b,
        '÷': (a,b)=> b===0 ? 'Error' : a/b
    };

    function updateDisplay() {
        currentEl.textContent = current;
        let hist = '';
        if (previous !== null && operator) hist = `${formatNum(previous)} ${operator}`;
        historyEl.textContent = hist;
    }
    function formatNum(val){
        if (typeof val === "string") return val;
        const s = val.toString();
        if (Math.abs(val) >= 1e12 || (Math.abs(val) > 0 && Math.abs(val) < 1e-6)){
            return val.toExponential(6);
        }
        return s.length>15 ? val.toPrecision(12) : s;
    }
    function inputDigit(d){
        if (overwrite){ current = d; overwrite=false; }
        else{
            if (current === "0") current = d;
            else current += d;
        }
        statusEl.textContent = "Typing";
        updateDisplay();
    }
    function inputDot(){
        if (overwrite){ current="0."; overwrite=false; }
        else if (!current.includes('.')) current += '.';
        updateDisplay();
    }
    function clearAll(){
        current="0"; previous=null; operator=null; overwrite=false;
        statusEl.textContent="Cleared";
        historyEl.textContent='';
        updateDisplay();
    }
    function setOperator(op){
        if (operator && !overwrite){
            calculate();
        } else {
            previous = parseFloat(current);
        }
        operator = op;
        overwrite = true;
        statusEl.textContent = "Operator " + op;
        updateDisplay();
    }
    function calculate(){
        if (operator===null || previous===null) return;
        const a = previous;
        const b = parseFloat(current);
        const res = opsMap[operator](a,b);
        if (res === 'Error'){
            current = "Cannot divide by 0";
            statusEl.textContent = "Error";
            previous = null;
            operator = null;
            overwrite = true;
            historyEl.textContent='';
            updateDisplay();
            return;
        }
        previous = null;
        operator = null;
        current = formatNum(res).toString();
        overwrite = true;
        statusEl.textContent = "Result";
        historyEl.textContent='';
        updateDisplay();
    }
    function toggleSign(){
        if (current === "0" || current==="Cannot divide by 0") return;
        if (current.startsWith("-")) current = current.slice(1);
        else current = "-" + current;
        updateDisplay();
    }
    function percent(){
        const val = parseFloat(current);
        if (!isNaN(val)){
            current = formatNum(val/100).toString();
            updateDisplay();
        }
    }

    document.querySelectorAll('button').forEach(btn=>{
        btn.addEventListener('click', ()=>{
            const num = btn.dataset.num;
            const action = btn.dataset.action;
            if (num !== undefined){
                inputDigit(num);
            } else if (action){
                if (action === "dot") inputDot();
                else if (action === "clear") clearAll();
                else if (action === "op") setOperator(btn.dataset.op);
                else if (action === "equals") calculate();
                else if (action === "sign") toggleSign();
                else if (action === "percent") percent();
            }
        });
    });

    const keyMapOps = {'+':'+','-':'-','*':'×','x':'×','X':'×','/':'÷'};
    window.addEventListener('keydown', (e)=>{
        const k = e.key;
        if (/\d/.test(k)){ inputDigit(k); }
        else if (k === '.' || k === ','){ e.preventDefault(); inputDot(); }
        else if (k in keyMapOps){ e.preventDefault(); setOperator(keyMapOps[k]); }
        else if (k === 'Enter' || k === '='){ e.preventDefault(); calculate(); }
        else if (k === 'Backspace'){
            if (!overwrite){
                current = current.length>1 ? current.slice(0,-1) : "0";
                updateDisplay();
            } else {
                current = "0"; overwrite=false; updateDisplay();
            }
        }
        else if (k.toLowerCase() === 'c'){ clearAll(); }
    });

    updateDisplay();
})();
</script>
</body>
</html>