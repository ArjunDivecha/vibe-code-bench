<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Emoji Memory Match</title>
<style>
    :root{
        --bg:#0f172a;
        --card:#1e293b;
        --accent:#38bdf8;
        --good:#22c55e;
        --bad:#ef4444;
        --text:#e2e8f0;
    }
    *{box-sizing:border-box;}
    body{
        margin:0;
        min-height:100vh;
        display:flex;
        align-items:center;
        justify-content:center;
        background: radial-gradient(circle at 20% 20%, #1f2937, #0f172a 50%), radial-gradient(circle at 80% 30%, #0ea5e9, transparent 25%);
        color:var(--text);
        font-family:'Segoe UI', system-ui, sans-serif;
    }
    .game{
        width: min(900px, 95vw);
        padding:20px;
        border-radius:16px;
        background:rgba(15, 23, 42, 0.75);
        box-shadow:0 20px 60px rgba(0,0,0,0.4), inset 0 0 0 1px rgba(255,255,255,0.05);
        backdrop-filter: blur(8px);
    }
    header{
        display:flex;
        justify-content:space-between;
        align-items:center;
        gap:12px;
        flex-wrap:wrap;
    }
    h1{
        margin:0;
        font-size:28px;
        letter-spacing:1px;
        display:flex;
        align-items:center;
        gap:8px;
    }
    .stats{
        display:flex;
        gap:12px;
        flex-wrap:wrap;
        align-items:center;
    }
    .pill{
        padding:8px 14px;
        border-radius:999px;
        background:rgba(255,255,255,0.06);
        border:1px solid rgba(255,255,255,0.08);
        font-weight:600;
    }
    button{
        cursor:pointer;
        border:none;
        border-radius:10px;
        padding:10px 14px;
        font-weight:700;
        color:var(--text);
        background:linear-gradient(135deg, #22d3ee, #3b82f6);
        box-shadow:0 10px 25px rgba(56,189,248,0.35);
        transition:transform .1s ease, box-shadow .2s ease;
    }
    button:hover{transform:translateY(-1px); box-shadow:0 14px 30px rgba(56,189,248,0.45);}
    button:active{transform:translateY(0); box-shadow:0 8px 20px rgba(56,189,248,0.35);}
    .board{
        margin-top:18px;
        display:grid;
        grid-template-columns:repeat(4, minmax(60px,1fr));
        gap:12px;
    }
    .card{
        position:relative;
        perspective: 900px;
        width:100%;
        padding-top:100%;
    }
    .card-inner{
        position:absolute;
        inset:0;
        border-radius:12px;
        background:var(--card);
        box-shadow:0 6px 20px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(255,255,255,0.05);
        transform-style:preserve-3d;
        transition: transform .5s ease;
        overflow:hidden;
    }
    .card.flipped .card-inner{
        transform: rotateY(180deg) scale(1.03);
    }
    .card.matched .card-inner{
        animation: pulse 0.7s ease;
        box-shadow:0 0 0 2px rgba(34,197,94,0.6), 0 10px 25px rgba(34,197,94,0.4);
    }
    @keyframes pulse{
        0%{transform: rotateY(180deg) scale(1.0);}
        40%{transform: rotateY(180deg) scale(1.08);}
        100%{transform: rotateY(180deg) scale(1.0);}
    }
    .face{
        position:absolute;
        inset:0;
        display:flex;
        align-items:center;
        justify-content:center;
        font-size:2.4rem;
        backface-visibility:hidden;
        border-radius:12px;
    }
    .front{
        background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
        border:1px solid rgba(255,255,255,0.05);
    }
    .back{
        background: linear-gradient(145deg, #0ea5e9, #6366f1);
        color:white;
        transform: rotateY(180deg);
        font-size:2.1rem;
        text-shadow:0 4px 14px rgba(0,0,0,0.35);
    }
    .overlay{
        position:fixed;
        inset:0;
        background:rgba(15,23,42,0.85);
        display:flex;
        align-items:center;
        justify-content:center;
        visibility:hidden;
        opacity:0;
        transition:opacity .3s ease;
    }
    .overlay.show{
        visibility:visible;
        opacity:1;
    }
    .modal{
        background:rgba(15,23,42,0.95);
        padding:28px;
        border-radius:16px;
        width:min(420px, 90vw);
        text-align:center;
        box-shadow:0 20px 50px rgba(0,0,0,0.5), inset 0 0 0 1px rgba(255,255,255,0.05);
    }
    .modal h2{
        margin:0 0 12px;
        font-size:26px;
    }
    .modal .stats-line{
        margin:10px 0;
        font-weight:600;
    }
    .floating{
        position:absolute;
        pointer-events:none;
        animation:float 8s ease-in-out infinite;
        opacity:0.8;
    }
    @keyframes float{
        0%{transform:translateY(0);}
        50%{transform:translateY(-18px);}
        100%{transform:translateY(0);}
    }
</style>
</head>
<body>
<div class="floating" style="left:5%; top:10%; font-size:48px;">ðŸª©</div>
<div class="floating" style="right:8%; top:22%; font-size:36px; animation-delay:1s">âœ¨</div>
<div class="floating" style="left:15%; bottom:12%; font-size:40px; animation-delay:2s">ðŸ’«</div>

<div class="game">
    <header>
        <h1>ðŸ§  Memory Match</h1>
        <div class="stats">
            <div class="pill">Moves: <span id="moves">0</span></div>
            <div class="pill">Time: <span id="time">0:00</span></div>
            <button id="restart">â†» Restart</button>
        </div>
    </header>
    <div class="board" id="board"></div>
</div>

<div class="overlay" id="overlay">
    <div class="modal">
        <h2>ðŸŽ‰ You Win!</h2>
        <div class="stats-line">Moves: <span id="final-moves"></span></div>
        <div class="stats-line">Time: <span id="final-time"></span></div>
        <button id="play-again">Play Again</button>
    </div>
</div>

<script>
(() => {
    const symbols = ["ðŸŽ","ðŸŒ","ðŸ“","ðŸ","ðŸ‡","ðŸ‰","ðŸ¥‘","ðŸ¥•","ðŸ©","ðŸª","ðŸŽ§","âš½","ðŸš€","ðŸŒ™","ðŸŒµ","ðŸŽ²"];
    const boardEl = document.getElementById('board');
    const movesEl = document.getElementById('moves');
    const timeEl = document.getElementById('time');
    const restartBtn = document.getElementById('restart');
    const overlay = document.getElementById('overlay');
    const finalMovesEl = document.getElementById('final-moves');
    const finalTimeEl = document.getElementById('final-time');
    const playAgainBtn = document.getElementById('play-again');

    const size = 4; // 4x4
    let deck = [];
    let firstCard = null;
    let secondCard = null;
    let lockBoard = false;
    let moves = 0;
    let matchedPairs = 0;
    let timer = null;
    let seconds = 0;
    let started = false;

    function formatTime(sec){
        const m = Math.floor(sec / 60);
        const s = sec % 60;
        return `${m}:${s.toString().padStart(2,'0')}`;
    }

    function startTimer(){
        if(started) return;
        started = true;
        timer = setInterval(()=>{
            seconds++;
            timeEl.textContent = formatTime(seconds);
        },1000);
    }

    function stopTimer(){
        clearInterval(timer);
        timer = null;
    }

    function shuffle(array){
        for(let i=array.length-1;i>0;i--){
            const j = Math.floor(Math.random()*(i+1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function buildDeck(){
        const pairCount = (size*size)/2;
        const chosen = shuffle(symbols.slice()).slice(0, pairCount);
        deck = shuffle(chosen.concat(chosen)).map((sym, idx)=>({id: idx, symbol:sym, matched:false}));
    }

    function renderBoard(){
        boardEl.innerHTML = '';
        const frag = document.createDocumentFragment();
        deck.forEach(card=>{
            const cardEl = document.createElement('div');
            cardEl.className = 'card';
            cardEl.dataset.id = card.id;

            const inner = document.createElement('div');
            inner.className = 'card-inner';

            const front = document.createElement('div');
            front.className = 'face front';
            front.textContent = "â“";

            const back = document.createElement('div');
            back.className = 'face back';
            back.textContent = card.symbol;

            inner.appendChild(front);
            inner.appendChild(back);
            cardEl.appendChild(inner);
            frag.appendChild(cardEl);
        });
        boardEl.style.gridTemplateColumns = `repeat(${size}, minmax(60px,1fr))`;
        boardEl.appendChild(frag);
    }

    function resetGame(){
        stopTimer();
        seconds = 0;
        timeEl.textContent = '0:00';
        moves = 0;
        movesEl.textContent = moves;
        matchedPairs = 0;
        firstCard = null;
        secondCard = null;
        lockBoard = false;
        started = false;
        buildDeck();
        renderBoard();
    }

    function flipCard(cardEl){
        if(lockBoard) return;
        if(cardEl.classList.contains('flipped')) return;

        startTimer();
        cardEl.classList.add('flipped');

        if(!firstCard){
            firstCard = cardEl;
            return;
        }
        if(firstCard === cardEl) return;

        secondCard = cardEl;
        moves++;
        movesEl.textContent = moves;
        checkForMatch();
    }

    function checkForMatch(){
        const id1 = parseInt(firstCard.dataset.id,10);
        const id2 = parseInt(secondCard.dataset.id,10);
        const match = deck[id1].symbol === deck[id2].symbol;

        if(match){
            deck[id1].matched = deck[id2].matched = true;
            firstCard.classList.add('matched');
            secondCard.classList.add('matched');
            matchedPairs++;
            resetTurn();
            if(matchedPairs === deck.length/2){
                winGame();
            }
        }else{
            lockBoard = true;
            setTimeout(()=>{
                firstCard.classList.remove('flipped');
                secondCard.classList.remove('flipped');
                resetTurn();
            }, 900);
        }
    }

    function resetTurn(){
        [firstCard, secondCard] = [null, null];
        lockBoard = false;
    }

    function winGame(){
        stopTimer();
        finalMovesEl.textContent = moves;
        finalTimeEl.textContent = formatTime(seconds);
        setTimeout(()=>overlay.classList.add('show'), 400);
    }

    boardEl.addEventListener('click', (e)=>{
        const cardEl = e.target.closest('.card');
        if(!cardEl || overlay.classList.contains('show')) return;
        flipCard(cardEl);
    });

    restartBtn.addEventListener('click', ()=>{
        overlay.classList.remove('show');
        resetGame();
    });

    playAgainBtn.addEventListener('click', ()=>{
        overlay.classList.remove('show');
        resetGame();
    });

    // init
    resetGame();
})();
</script>
</body>
</html>