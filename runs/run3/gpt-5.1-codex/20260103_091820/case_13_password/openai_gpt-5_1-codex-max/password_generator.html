<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Secure Password Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
    --bg: linear-gradient(135deg, #0f172a 0%, #1e293b 45%, #0f172a 100%);
    --panel: rgba(255,255,255,0.06);
    --border: rgba(255,255,255,0.08);
    --text: #e2e8f0;
    --muted: #94a3b8;
    --accent: #7c3aed;
    --accent2: #06b6d4;
}
* { box-sizing: border-box; }
body {
    margin: 0;
    min-height: 100vh;
    font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: var(--bg);
    color: var(--text);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 32px 16px 48px;
}
.container { width: min(1100px, 100%); }
.header { text-align: center; margin-bottom: 24px; }
.header h1 { margin: 0; font-size: 32px; letter-spacing: -0.02em; }
.header p { margin: 8px 0 0; color: var(--muted); }

.card {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 18px;
    padding: 20px;
    box-shadow: 0 18px 45px rgba(0,0,0,0.35);
    backdrop-filter: blur(10px);
}
.grid {
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    gap: 16px;
}
@media (max-width: 900px) { .grid { grid-template-columns: 1fr; } }

.section {
    background: rgba(255,255,255,0.03);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 16px 18px;
}
.section h3 { margin: 0 0 12px; font-size: 15px; letter-spacing: -0.01em; }

.slider-row { display: flex; align-items: center; gap: 12px; }
input[type="range"] { width: 100%; accent-color: var(--accent); }
.value-chip {
    background: rgba(124,58,237,0.18);
    border: 1px solid rgba(124,58,237,0.5);
    color: #e9d5ff;
    padding: 6px 10px;
    border-radius: 10px;
    font-weight: 700;
}
.toggle-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px,1fr)); gap: 10px; }
.toggle {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    border: 1px solid var(--border);
    border-radius: 12px;
    background: rgba(255,255,255,0.02);
}
.switch { position: relative; width: 44px; height: 24px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
    position: absolute; cursor: pointer;
    inset: 0;
    background: #475569;
    transition: .25s;
    border-radius: 999px;
}
.slider:before {
    position: absolute; content:"";
    height: 18px; width: 18px;
    left: 3px; bottom: 3px;
    background: #fff;
    transition: .25s; border-radius: 50%;
}
.switch input:checked + .slider { background: linear-gradient(135deg, var(--accent), var(--accent2)); }
.switch input:checked + .slider:before { transform: translateX(20px); }

.controls-inline { display: flex; gap: 12px; flex-wrap: wrap; align-items: center; }
input[type="number"] {
    background: rgba(255,255,255,0.02);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px 12px;
    color: var(--text);
    width: 120px;
    font-size: 14px;
}
.btn {
    border: none;
    border-radius: 12px;
    padding: 12px 15px;
    font-weight: 700;
    color: white;
    cursor: pointer;
    transition: transform .1s ease, box-shadow .2s ease;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    box-shadow: 0 12px 24px rgba(124,58,237,0.25);
}
.btn:active { transform: translateY(1px) scale(0.99); }
.btn.secondary {
    background: transparent;
    border: 1px solid var(--border);
    box-shadow: none;
    color: var(--text);
}
.small { color: var(--muted); font-size: 12px; }

.output-list, .history-list { display: grid; gap: 10px; }

.password-row {
    border: 1px solid var(--border);
    padding: 12px 12px;
    border-radius: 12px;
    background: rgba(255,255,255,0.02);
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 10px;
    align-items: center;
    transition: border-color .2s ease, background .2s ease;
}
.password-row:hover {
    border-color: rgba(124,58,237,0.35);
    background: rgba(124,58,237,0.06);
}
.password-text {
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", monospace;
    word-break: break-all;
}
.copy-btn {
    background: rgba(124,58,237,0.12);
    border: 1px solid rgba(124,58,237,0.5);
    color: #e9d5ff;
    border-radius: 10px;
    padding: 8px 12px;
    cursor: pointer;
    transition: background .2s ease;
}
.copy-btn:hover { background: rgba(124,58,237,0.25); }

.strength { display: flex; align-items: center; gap: 10px; }
.meter {
    flex: 1;
    height: 12px;
    background: rgba(255,255,255,0.05);
    border-radius: 999px;
    border: 1px solid var(--border);
    overflow: hidden;
}
.meter-fill {
    height: 100%;
    width: 20%;
    transition: width .3s ease, background .3s ease;
    background: linear-gradient(90deg, #22c55e, #16a34a);
}
.badge {
    padding: 6px 9px;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: rgba(255,255,255,0.03);
    font-weight: 700;
}
.history-list .password-row { grid-template-columns: 1fr auto auto; }
.tag {
    padding: 4px 8px;
    border-radius: 8px;
    border: 1px solid var(--border);
    color: var(--muted);
    font-size: 12px;
}
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>Secure Password Generator</h1>
        <p>Create strong, unique passwords instantly.</p>
    </div>
    <div class="card">
        <div class="grid">
            <div class="section">
                <h3>Customize</h3>
                <div class="slider-row" style="margin-bottom:10px;">
                    <div style="flex:1;">
                        <div class="small">Length</div>
                        <input id="lengthSlider" type="range" min="8" max="32" value="16">
                    </div>
                    <div class="value-chip" id="lengthValue">16</div>
                </div>
                <div class="toggle-list" style="margin-bottom:12px;">
                    <div class="toggle">
                        <span>Uppercase</span>
                        <label class="switch">
                            <input type="checkbox" id="upperToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="toggle">
                        <span>Lowercase</span>
                        <label class="switch">
                            <input type="checkbox" id="lowerToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="toggle">
                        <span>Numbers</span>
                        <label class="switch">
                            <input type="checkbox" id="numberToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="toggle">
                        <span>Symbols</span>
                        <label class="switch">
                            <input type="checkbox" id="symbolToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="controls-inline" style="margin-bottom:12px;">
                    <div>
                        <div class="small">Passwords to generate</div>
                        <input type="number" id="countInput" min="1" max="10" value="5">
                    </div>
                    <button class="btn" id="generateBtn">Generate</button>
                    <button class="btn secondary" id="copyLatestBtn">Copy latest</button>
                </div>
                <div class="strength">
                    <div class="small" style="width:80px;">Strength</div>
                    <div class="meter"><div class="meter-fill" id="strengthFill"></div></div>
                    <div class="badge" id="strengthLabel">Weak</div>
                </div>
            </div>
            <div class="section">
                <h3>Generated passwords</h3>
                <div class="output-list" id="outputList">
                    <div class="small">Click generate to create new passwords.</div>
                </div>
            </div>
        </div>
        <div class="section" style="margin-top:16px;">
            <h3>Recent history</h3>
            <div class="history-list" id="historyList">
                <div class="small">No passwords yet.</div>
            </div>
        </div>
    </div>
</div>
<script>
(() => {
    const lengthSlider = document.getElementById('lengthSlider');
    const lengthValue = document.getElementById('lengthValue');
    const toggles = {
        upper: document.getElementById('upperToggle'),
        lower: document.getElementById('lowerToggle'),
        number: document.getElementById('numberToggle'),
        symbol: document.getElementById('symbolToggle')
    };
    const countInput = document.getElementById('countInput');
    const outputList = document.getElementById('outputList');
    const historyList = document.getElementById('historyList');
    const strengthFill = document.getElementById('strengthFill');
    const strengthLabel = document.getElementById('strengthLabel');
    const copyLatestBtn = document.getElementById('copyLatestBtn');
    const history = [];
    const HISTORY_LIMIT = 30;

    lengthSlider.addEventListener('input', () => {
        lengthValue.textContent = lengthSlider.value;
    });

    document.getElementById('generateBtn').addEventListener('click', generatePasswords);
    copyLatestBtn.addEventListener('click', () => {
        if (!history.length) return toast('Nothing to copy yet');
        copyText(history[history.length - 1].password);
    });

    function randomInt(maxExclusive) {
        const arr = new Uint32Array(1);
        crypto.getRandomValues(arr);
        return arr[0] % maxExclusive;
    }

    function generateSingle(len, opts) {
        const pools = [];
        if (opts.upper) pools.push('ABCDEFGHIJKLMNOPQRSTUVWXYZ');
        if (opts.lower) pools.push('abcdefghijklmnopqrstuvwxyz');
        if (opts.number) pools.push('0123456789');
        if (opts.symbol) pools.push('!@#$%^&*()-_=+[]{};:,.<>/?');
        if (!pools.length) return '';
        const all = pools.join('');
        let res = '';
        // Guarantee at least one of each chosen set
        pools.forEach(pool => res += pool[randomInt(pool.length)]);
        for (let i = res.length; i < len; i++) res += all[randomInt(all.length)];
        // Shuffle
        const arr = res.split('');
        for (let i = arr.length - 1; i > 0; i--) {
            const j = randomInt(i + 1);
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr.join('');
    }

    function evaluateStrength(password, opts) {
        if (!password) {
            strengthFill.style.width = '10%';
            strengthLabel.textContent = 'Weak';
            return;
        }
        const lengthScore = Math.min(password.length, 32) / 32 * 60;
        const setsUsed = ['upper','lower','number','symbol'].reduce((n,k)=> n + (opts[k]?1:0), 0);
        const varietyScore = setsUsed * 8;
        const uniqueRatio = Math.min(new Set(password).size / password.length, 1);
        const uniquenessScore = uniqueRatio * 16;
        let score = Math.min(100, Math.round(lengthScore + varietyScore + uniquenessScore));
        let label = 'Weak', color = '#ef4444';
        if (score >= 80) { label = 'Excellent'; color = '#22c55e'; }
        else if (score >= 65) { label = 'Strong'; color = '#10b981'; }
        else if (score >= 50) { label = 'Moderate'; color = '#f59e0b'; }
        else if (score >= 35) { label = 'Fair'; color = '#f97316'; }
        strengthFill.style.width = score + '%';
        strengthFill.style.background = `linear-gradient(90deg, ${color}, ${color})`;
        strengthLabel.textContent = label;
    }

    function renderOutputs(passwords) {
        outputList.innerHTML = '';
        passwords.forEach(pwd => {
            const row = document.createElement('div');
            row.className = 'password-row';
            const text = document.createElement('div');
            text.className = 'password-text';
            text.textContent = pwd;
            const btn = document.createElement('button');
            btn.className = 'copy-btn';
            btn.textContent = 'Copy';
            btn.addEventListener('click', () => copyText(pwd));
            row.appendChild(text);
            row.appendChild(btn);
            outputList.appendChild(row);
        });
    }

    function renderHistory() {
        historyList.innerHTML = '';
        if (!history.length) {
            historyList.innerHTML = '<div class="small">No passwords yet.</div>';
            return;
        }
        history.slice().reverse().forEach(item => {
            const row = document.createElement('div');
            row.className = 'password-row';
            const text = document.createElement('div');
            text.className = 'password-text';
            text.textContent = item.password;
            const tag = document.createElement('div');
            tag.className = 'tag';
            tag.textContent = timeAgo(item.timestamp);
            const btn = document.createElement('button');
            btn.className = 'copy-btn';
            btn.textContent = 'Copy';
            btn.addEventListener('click', () => copyText(item.password));
            row.appendChild(text);
            row.appendChild(tag);
            row.appendChild(btn);
            historyList.appendChild(row);
        });
    }

    function addToHistory(list) {
        list.forEach(pwd => history.push({password: pwd, timestamp: Date.now()}));
        if (history.length > HISTORY_LIMIT) history.splice(0, history.length - HISTORY_LIMIT);
        renderHistory();
    }

    function generatePasswords() {
        const len = parseInt(lengthSlider.value, 10);
        let count = parseInt(countInput.value, 10);
        if (isNaN(count) || count < 1) count = 1;
        count = Math.min(count, 10);
        countInput.value = count;
        const opts = {
            upper: toggles.upper.checked,
            lower: toggles.lower.checked,
            number: toggles.number.checked,
            symbol: toggles.symbol.checked
        };
        if (!opts.upper && !opts.lower && !opts.number && !opts.symbol) {
            alert('Select at least one character type.');
            return;
        }
        const passwords = [];
        for (let i = 0; i < count; i++) passwords.push(generateSingle(len, opts));
        renderOutputs(passwords);
        evaluateStrength(passwords[0], opts);
        addToHistory(passwords);
        toast('Generated ' + count + ' password' + (count > 1 ? 's' : ''));
    }

    function copyText(text) {
        if (navigator.clipboard) {
            navigator.clipboard.writeText(text).then(()=>toast('Copied to clipboard')).catch(()=>fallbackCopy(text));
        } else fallbackCopy(text);
    }
    function fallbackCopy(text) {
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        ta.remove();
        toast('Copied to clipboard');
    }

    function timeAgo(ts) {
        const diff = Math.floor((Date.now() - ts) / 1000);
        if (diff < 60) return diff + 's ago';
        const m = Math.floor(diff / 60);
        if (m < 60) return m + 'm ago';
        const h = Math.floor(m / 60);
        if (h < 24) return h + 'h ago';
        return Math.floor(h / 24) + 'd ago';
    }

    function toast(msg) {
        let el = document.getElementById('toast');
        if (!el) {
            el = document.createElement('div');
            el.id = 'toast';
            document.body.appendChild(el);
            Object.assign(el.style, {
                position:'fixed', bottom:'24px', left:'50%', transform:'translateX(-50%)',
                background:'rgba(15, 23, 42, 0.9)', color:'#e2e8f0',
                padding:'10px 14px', borderRadius:'12px', border:'1px solid rgba(124,58,237,0.4)',
                boxShadow:'0 12px 24px rgba(0,0,0,0.35)', opacity:'0', transition:'opacity .2s ease',
                zIndex:'9999'
            });
        }
        el.textContent = msg;
        el.style.opacity = '1';
        clearTimeout(el._timer);
        el._timer = setTimeout(() => { el.style.opacity = '0'; }, 1600);
    }

    // initial generation
    generatePasswords();
})();
</script>
</body>
</html>