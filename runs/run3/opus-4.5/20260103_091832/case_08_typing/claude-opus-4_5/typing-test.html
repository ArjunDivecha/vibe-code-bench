<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #1a1a2e;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .stat-box.timer {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            box-shadow: 0 4px 15px rgba(245, 87, 108, 0.4);
        }

        .stat-box.accuracy {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .text-display {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            font-size: 1.3rem;
            line-height: 1.8;
            border: 2px solid #e9ecef;
            min-height: 150px;
        }

        .text-display span {
            transition: all 0.1s ease;
        }

        .correct {
            color: #28a745;
            background-color: rgba(40, 167, 69, 0.1);
        }

        .incorrect {
            color: #dc3545;
            background-color: rgba(220, 53, 69, 0.2);
            text-decoration: underline;
        }

        .current {
            background-color: #ffc107;
            border-radius: 2px;
            animation: pulse 0.5s infinite alternate;
        }

        @keyframes pulse {
            from { background-color: #ffc107; }
            to { background-color: #ffda6a; }
        }

        .untyped {
            color: #6c757d;
        }

        #input-box {
            width: 100%;
            padding: 20px;
            font-size: 1.2rem;
            border: 3px solid #e9ecef;
            border-radius: 12px;
            outline: none;
            transition: border-color 0.3s ease;
            margin-bottom: 20px;
        }

        #input-box:focus {
            border-color: #667eea;
        }

        #input-box:disabled {
            background-color: #e9ecef;
            cursor: not-allowed;
        }

        .button-row {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 35px;
            font-size: 1.1rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            font-weight: 600;
        }

        button:hover {
            transform: translateY(-2px);
        }

        #start-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        #reset-btn {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.4);
        }

        #new-text-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal h2 {
            color: #1a1a2e;
            margin-bottom: 10px;
            font-size: 2rem;
        }

        .modal .result-emoji {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .final-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
        }

        .final-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
        }

        .final-stat-label {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .final-stat-value {
            color: #1a1a2e;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .final-stat-value.wpm {
            color: #667eea;
        }

        .final-stat-value.accuracy {
            color: #28a745;
        }

        .instructions {
            background: #e7f3ff;
            border-left: 4px solid #667eea;
            padding: 15px 20px;
            margin-bottom: 25px;
            border-radius: 0 10px 10px 0;
            color: #1a1a2e;
        }

        .mode-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .mode-btn {
            padding: 8px 20px;
            font-size: 0.9rem;
            background: #e9ecef;
            color: #495057;
            border-radius: 20px;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚å®Ô∏è Typing Speed Test</h1>
        <p class="subtitle">Test your typing speed and accuracy!</p>

        <div class="mode-toggle">
            <button class="mode-btn active" data-duration="30">30 seconds</button>
            <button class="mode-btn" data-duration="60">60 seconds</button>
            <button class="mode-btn" data-duration="0">Free Mode</button>
        </div>

        <div class="instructions">
            üí° Click "Start Test" and begin typing. The timer will start automatically when you type your first character.
        </div>

        <div class="stats-bar">
            <div class="stat-box timer">
                <div class="stat-label">Time</div>
                <div class="stat-value" id="timer">0:00</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">WPM</div>
                <div class="stat-value" id="wpm">0</div>
            </div>
            <div class="stat-box accuracy">
                <div class="stat-label">Accuracy</div>
                <div class="stat-value" id="accuracy">100%</div>
            </div>
        </div>

        <div class="text-display" id="text-display"></div>

        <input type="text" id="input-box" placeholder="Click Start Test, then type here..." disabled autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">

        <div class="button-row">
            <button id="start-btn">Start Test</button>
            <button id="reset-btn">Reset</button>
            <button id="new-text-btn">New Text</button>
        </div>
    </div>

    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="result-emoji" id="result-emoji">üéâ</div>
            <h2 id="modal-title">Test Complete!</h2>
            <p id="modal-message">Great job! Here are your results:</p>
            <div class="final-stats">
                <div class="final-stat">
                    <div class="final-stat-label">Words Per Minute</div>
                    <div class="final-stat-value wpm" id="final-wpm">0</div>
                </div>
                <div class="final-stat">
                    <div class="final-stat-label">Accuracy</div>
                    <div class="final-stat-value accuracy" id="final-accuracy">0%</div>
                </div>
                <div class="final-stat">
                    <div class="final-stat-label">Characters Typed</div>
                    <div class="final-stat-value" id="final-chars">0</div>
                </div>
                <div class="final-stat">
                    <div class="final-stat-label">Errors</div>
                    <div class="final-stat-value" id="final-errors">0</div>
                </div>
            </div>
            <div class="button-row">
                <button id="try-again-btn">Try Again</button>
                <button id="new-text-modal-btn">New Text</button>
            </div>
        </div>
    </div>

    <script>
        const textSamples = [
            "The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet and is often used for typing practice. Keep your fingers on the home row and maintain a steady rhythm as you type.",
            "Programming is the art of telling a computer what to do. It requires patience, logical thinking, and attention to detail. The best programmers write code that is clean, efficient, and easy to understand.",
            "The sun was setting behind the mountains, casting long shadows across the valley. Birds were returning to their nests, and a gentle breeze carried the scent of wildflowers through the air.",
            "Technology has transformed the way we live, work, and communicate. From smartphones to artificial intelligence, innovations continue to reshape our world at an unprecedented pace.",
            "Reading is to the mind what exercise is to the body. Books open doors to new worlds, ideas, and perspectives. A well-read person is never alone, for they carry countless stories within them.",
            "Success is not final, failure is not fatal. It is the courage to continue that counts. Every great achievement was once considered impossible until someone dared to try and never gave up.",
            "The ocean stretched endlessly before them, its waves dancing in the moonlight. Stars sparkled above like diamonds scattered across velvet, and the sound of the surf created a soothing melody.",
            "In the heart of the city, life moved at a relentless pace. People rushed past each other, lost in their own worlds, while the buildings towered overhead like silent guardians of urban dreams.",
            "Music has the power to transport us to different times and places. A single melody can evoke memories long forgotten and emotions we thought we had buried deep within our hearts.",
            "The art of cooking is about more than just following recipes. It requires creativity, intuition, and a willingness to experiment. The best dishes are made with love and shared with those we care about."
        ];

        let currentText = "";
        let currentIndex = 0;
        let startTime = null;
        let timerInterval = null;
        let isRunning = false;
        let isFinished = false;
        let correctChars = 0;
        let incorrectChars = 0;
        let testDuration = 30;
        let elapsedTime = 0;

        const textDisplay = document.getElementById("text-display");
        const inputBox = document.getElementById("input-box");
        const timerDisplay = document.getElementById("timer");
        const wpmDisplay = document.getElementById("wpm");
        const accuracyDisplay = document.getElementById("accuracy");
        const startBtn = document.getElementById("start-btn");
        const resetBtn = document.getElementById("reset-btn");
        const newTextBtn = document.getElementById("new-text-btn");
        const modalOverlay = document.getElementById("modal-overlay");
        const modeBtns = document.querySelectorAll(".mode-btn");

        function getRandomText() {
            const randomIndex = Math.floor(Math.random() * textSamples.length);
            return textSamples[randomIndex];
        }

        function renderText() {
            textDisplay.innerHTML = "";
            for (let i = 0; i < currentText.length; i++) {
                const span = document.createElement("span");
                span.textContent = currentText[i];
                span.className = "untyped";
                if (i === 0) span.classList.add("current");
                textDisplay.appendChild(span);
            }
        }

        function updateDisplay() {
            const spans = textDisplay.querySelectorAll("span");
            const inputValue = inputBox.value;

            correctChars = 0;
            incorrectChars = 0;

            for (let i = 0; i < currentText.length; i++) {
                spans[i].className = "";
                
                if (i < inputValue.length) {
                    if (inputValue[i] === currentText[i]) {
                        spans[i].classList.add("correct");
                        correctChars++;
                    } else {
                        spans[i].classList.add("incorrect");
                        incorrectChars++;
                    }
                } else if (i === inputValue.length) {
                    spans[i].classList.add("current");
                } else {
                    spans[i].classList.add("untyped");
                }
            }

            updateStats();

            if (inputValue.length >= currentText.length) {
                finishTest();
            }
        }

        function updateStats() {
            const totalTyped = correctChars + incorrectChars;
            
            if (totalTyped > 0) {
                const accuracy = Math.round((correctChars / totalTyped) * 100);
                accuracyDisplay.textContent = accuracy + "%";
            } else {
                accuracyDisplay.textContent = "100%";
            }

            if (startTime && isRunning) {
                const timeElapsed = (Date.now() - startTime) / 1000 / 60;
                if (timeElapsed > 0) {
                    const wpm = Math.round((correctChars / 5) / timeElapsed);
                    wpmDisplay.textContent = wpm;
                }
            }
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function updateTimer() {
            if (!startTime) return;

            elapsedTime = Math.floor((Date.now() - startTime) / 1000);

            if (testDuration > 0) {
                const remaining = Math.max(0, testDuration - elapsedTime);
                timerDisplay.textContent = formatTime(remaining);

                if (remaining <= 0) {
                    finishTest();
                }
            } else {
                timerDisplay.textContent = formatTime(elapsedTime);
            }
        }

        function startTest() {
            currentText = getRandomText();
            currentIndex = 0;
            startTime = null;
            correctChars = 0;
            incorrectChars = 0;
            isRunning = true;
            isFinished = false;
            elapsedTime = 0;

            inputBox.value = "";
            inputBox.disabled = false;
            inputBox.focus();

            wpmDisplay.textContent = "0";
            accuracyDisplay.textContent = "100%";
            timerDisplay.textContent = testDuration > 0 ? formatTime(testDuration) : "0:00";

            renderText();
            startBtn.textContent = "Test Running...";
            startBtn.disabled = true;
        }

        function resetTest() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }

            startTime = null;
            currentIndex = 0;
            correctChars = 0;
            incorrectChars = 0;
            isRunning = false;
            isFinished = false;
            elapsedTime = 0;

            inputBox.value = "";
            inputBox.disabled = true;

            wpmDisplay.textContent = "0";
            accuracyDisplay.textContent = "100%";
            timerDisplay.textContent = testDuration > 0 ? formatTime(testDuration) : "0:00";

            renderText();
            startBtn.textContent = "Start Test";
            startBtn.disabled = false;
            modalOverlay.classList.remove("show");
        }

        function newText() {
            currentText = getRandomText();
            resetTest();
        }

        function finishTest() {
            if (isFinished) return;
            isFinished = true;
            isRunning = false;

            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }

            inputBox.disabled = true;

            const totalTyped = correctChars + incorrectChars;
            const accuracy = totalTyped > 0 ? Math.round((correctChars / totalTyped) * 100) : 0;
            const timeInMinutes = elapsedTime / 60 || 0.01;
            const wpm = Math.round((correctChars / 5) / timeInMinutes);

            document.getElementById("final-wpm").textContent = wpm;
            document.getElementById("final-accuracy").textContent = accuracy + "%";
            document.getElementById("final-chars").textContent = totalTyped;
            document.getElementById("final-errors").textContent = incorrectChars;

            const emoji = document.getElementById("result-emoji");
            const title = document.getElementById("modal-title");
            const message = document.getElementById("modal-message");

            if (wpm >= 60 && accuracy >= 95) {
                emoji.textContent = "üèÜ";
                title.textContent = "Outstanding!";
                message.textContent = "You're a typing master!";
            } else if (wpm >= 40 && accuracy >= 90) {
                emoji.textContent = "üéâ";
                title.textContent = "Great Job!";
                message.textContent = "You have excellent typing skills!";
            } else if (wpm >= 25 && accuracy >= 80) {
                emoji.textContent = "üëç";
                title.textContent = "Good Work!";
                message.textContent = "Keep practicing to improve!";
            } else {
                emoji.textContent = "üí™";
                title.textContent = "Keep Trying!";
                message.textContent = "Practice makes perfect!";
            }

            modalOverlay.classList.add("show");
            startBtn.textContent = "Start Test";
            startBtn.disabled = false;
        }

        inputBox.addEventListener("input", () => {
            if (!isRunning || isFinished) return;

            if (!startTime) {
                startTime = Date.now();
                timerInterval = setInterval(updateTimer, 100);
            }

            updateDisplay();
        });

        inputBox.addEventListener("keydown", (e) => {
            if (e.key === "Tab") {
                e.preventDefault();
            }
        });

        startBtn.addEventListener("click", startTest);
        resetBtn.addEventListener("click", resetTest);
        newTextBtn.addEventListener("click", newText);

        document.getElementById("try-again-btn").addEventListener("click", () => {
            modalOverlay.classList.remove("show");
            startTest();
        });

        document.getElementById("new-text-modal-btn").addEventListener("click", () => {
            modalOverlay.classList.remove("show");
            newText();
            startTest();
        });

        modeBtns.forEach(btn => {
            btn.addEventListener("click", () => {
                modeBtns.forEach(b => b.classList.remove("active"));
                btn.classList.add("active");
                testDuration = parseInt(btn.dataset.duration);
                resetTest();
            });
        });

        // Initialize
        currentText = getRandomText();
        renderText();
        timerDisplay.textContent = formatTime(testDuration);
    </script>
</body>
</html>