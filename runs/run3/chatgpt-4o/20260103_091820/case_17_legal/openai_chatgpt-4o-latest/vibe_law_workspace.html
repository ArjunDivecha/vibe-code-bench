<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vibe-Law: Legal Case Search Workspace</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #1e1e2f;
      color: #e0e0f0;
    }

    header {
      padding: 1em;
      background-color: #12121c;
      text-align: center;
      border-bottom: 1px solid #333;
    }

    header h1 {
      margin: 0;
      font-size: 1.5em;
      color: #90caf9;
    }

    #search-bar {
      display: flex;
      justify-content: center;
      padding: 1em;
    }

    #search-input {
      width: 60%;
      padding: 0.5em;
      font-size: 1em;
      background-color: #2a2a3d;
      border: 1px solid #444;
      color: #fff;
      border-radius: 4px;
    }

    #results {
      padding: 1em;
      max-height: 40vh;
      overflow-y: auto;
    }

    .case {
      padding: 0.75em;
      border-bottom: 1px solid #333;
      cursor: pointer;
    }

    .case:hover {
      background-color: #2f2f45;
    }

    .case-title {
      font-weight: bold;
      color: #bbdefb;
    }

    .case-meta {
      font-size: 0.85em;
      color: #aaa;
    }

    .case-snippet {
      margin-top: 0.5em;
      font-size: 0.9em;
      color: #ccc;
    }

    /* Modal */
    #detail-modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.7);
      z-index: 1000;
    }

    #detail-content {
      position: absolute;
      top: 5%;
      left: 5%;
      width: 90%;
      height: 90%;
      background-color: #26263a;
      display: flex;
      flex-direction: row;
      border-radius: 8px;
      overflow: hidden;
    }

    #main-pane {
      flex: 3;
      padding: 1em;
      display: flex;
      flex-direction: column;
    }

    #tabs {
      display: flex;
      border-bottom: 1px solid #444;
    }

    .tab {
      padding: 0.5em 1em;
      cursor: pointer;
      border-bottom: 2px solid transparent;
    }

    .tab.active {
      border-bottom: 2px solid #90caf9;
      color: #90caf9;
    }

    #tab-content {
      flex: 1;
      overflow-y: auto;
      padding: 1em 0;
    }

    #entity-btn {
      margin-top: 0.5em;
      align-self: flex-start;
      background-color: #3949ab;
      color: white;
      border: none;
      padding: 0.5em 1em;
      cursor: pointer;
      border-radius: 4px;
    }

    #entity-btn:hover {
      background-color: #5c6bc0;
    }

    #notes-pane {
      flex: 1;
      border-left: 1px solid #444;
      background-color: #1b1b2b;
      padding: 1em;
      display: flex;
      flex-direction: column;
    }

    #notes-pane h3 {
      margin-top: 0;
      color: #90caf9;
    }

    #notes-list {
      flex: 1;
      overflow-y: auto;
      font-size: 0.9em;
    }

    .note {
      background-color: #31314a;
      padding: 0.5em;
      margin-bottom: 0.5em;
      border-radius: 4px;
    }

    .highlight {
      background-color: #ffeb3b;
      color: black;
      font-weight: bold;
    }

    #close-btn {
      position: absolute;
      top: 5px;
      right: 10px;
      background: none;
      border: none;
      color: #aaa;
      font-size: 1.5em;
      cursor: pointer;
    }

    #close-btn:hover {
      color: white;
    }

    .snippet-select {
      background-color: #3949ab;
      color: white;
      padding: 0.3em 0.5em;
      font-size: 0.8em;
      margin-top: 0.5em;
      display: inline-block;
      cursor: pointer;
      border-radius: 4px;
    }

  </style>
</head>
<body>
  <header>
    <h1>Vibe-Law: Legal Case Search Workspace</h1>
  </header>
  <div id="search-bar">
    <input type="text" id="search-input" placeholder="Search case law...">
  </div>
  <div id="results"></div>

  <div id="detail-modal">
    <div id="detail-content">
      <div id="main-pane">
        <div id="tabs">
          <div class="tab active" data-tab="summary">Summary</div>
          <div class="tab" data-tab="fulltext">Full Text</div>
        </div>
        <div id="tab-content"></div>
        <button id="entity-btn">Extract Entities</button>
      </div>
      <div id="notes-pane">
        <h3>Notes</h3>
        <div id="notes-list"></div>
      </div>
      <button id="close-btn">&times;</button>
    </div>
  </div>

  <script>
    const cases = [
      {
        title: "Smith v. Jones",
        court: "Supreme Court",
        date: "2021-05-12",
        summary: "A dispute over property boundaries between neighbors.",
        fullText: "On May 12, 2021, John Smith and Michael Jones appeared before the Supreme Court..."
      },
      {
        title: "People v. Anderson",
        court: "Court of Appeals",
        date: "2020-11-04",
        summary: "Appeal of a criminal conviction involving theft.",
        fullText: "In the matter of People v. Anderson, the Court of Appeals reviewed the conviction dated November 4, 2020..."
      },
      {
        title: "Brown v. State",
        court: "District Court",
        date: "2019-03-22",
        summary: "Case involving unlawful search and seizure.",
        fullText: "On March 22, 2019, the District Court heard the case of Brown v. State..."
      },
      {
        title: "Johnson v. United States",
        court: "Federal Court",
        date: "2018-07-19",
        summary: "Challenge to federal regulatory authority.",
        fullText: "July 19, 2018, marked the hearing of Johnson v. United States in Federal Court..."
      },
      {
        title: "Miller v. Cooper",
        court: "State Supreme Court",
        date: "2022-01-15",
        summary: "Civil litigation over breach of contract.",
        fullText: "In the State Supreme Court on January 15, 2022, Miller brought a suit against Cooper..."
      },
      {
        title: "Davis v. City of Boston",
        court: "District Court",
        date: "2023-06-10",
        summary: "Alleged violation of municipal codes.",
        fullText: "On June 10, 2023, the District Court heard Davis v. City of Boston..."
      },
      {
        title: "Taylor v. TechCorp",
        court: "Corporate Tribunal",
        date: "2020-09-30",
        summary: "Employment dispute involving wrongful termination.",
        fullText: "Taylor filed a wrongful termination claim against TechCorp on September 30, 2020..."
      },
      {
        title: "Garcia v. Department of Education",
        court: "Appeals Court",
        date: "2021-12-05",
        summary: "Dispute over federal funding for schools.",
        fullText: "In Garcia v. Department of Education, heard December 5, 2021, the Appeals Court ruled..."
      },
      {
        title: "Lee v. State Health Board",
        court: "Health Tribunal",
        date: "2019-08-14",
        summary: "Challenge to vaccination mandates.",
        fullText: "Lee challenged the vaccination mandate before the Health Tribunal on August 14, 2019..."
      },
      {
        title: "Nguyen v. Transit Authority",
        court: "Transportation Court",
        date: "2023-02-01",
        summary: "Injury claim involving public transit.",
        fullText: "Nguyen filed a claim against the Transit Authority on February 1, 2023..."
      }
    ];

    const resultsDiv = document.getElementById('results');
    const searchInput = document.getElementById('search-input');
    const detailModal = document.getElementById('detail-modal');
    const tabContent = document.getElementById('tab-content');
    const tabs = document.querySelectorAll('.tab');
    const entityBtn = document.getElementById('entity-btn');
    const notesList = document.getElementById('notes-list');
    const closeBtn = document.getElementById('close-btn');
    let currentCase = null;
    let currentTab = 'summary';

    function renderCases(filter='') {
      resultsDiv.innerHTML = '';
      cases.filter(c => c.title.toLowerCase().includes(filter.toLowerCase()))
        .forEach(c => {
          const div = document.createElement('div');
          div.className = 'case';
          div.innerHTML = `
            <div class="case-title">${c.title}</div>
            <div class="case-meta">${c.court} - ${c.date}</div>
            <div class="case-snippet">${c.summary}</div>
          `;
          div.onclick = () => openDetail(c);
          resultsDiv.appendChild(div);
        });
    }

    function openDetail(c) {
      currentCase = c;
      detailModal.style.display = 'block';
      renderTab();
      loadNotes();
    }

    function renderTab() {
      tabs.forEach(tab => tab.classList.remove('active'));
      document.querySelector(`[data-tab="${currentTab}"]`).classList.add('active');
      let text = currentCase[currentTab === 'summary' ? 'summary' : 'fullText'];
      tabContent.innerHTML = `<div>${text}</div>`;

      if (currentTab === 'fulltext') {
        const span = document.createElement('span');
        span.className = 'snippet-select';
        span.innerText = 'Save snippet';
        span.onclick = () => {
          const sel = window.getSelection().toString();
          if (sel) {
            saveNote(sel);
          }
        };
        tabContent.appendChild(span);
      }
    }

    function extractEntities(text) {
      return text.replace(/\b([A-Z][a-z]+(?: [A-Z][a-z]+)*)\b/g, '<span class="highlight">$1</span>')
                 .replace(/\b(January|February|March|April|May|June|July|August|September|October|November|December) \d{1,2}, \d{4}\b/g, '<span class="highlight">$&</span>');
    }

    function highlightEntities() {
      let text = currentCase[currentTab === 'summary' ? 'summary' : 'fullText'];
      tabContent.innerHTML = extractEntities(text);
    }

    function saveNote(snippet) {
      const key = `notes-${currentCase.title}`;
      let notes = JSON.parse(localStorage.getItem(key) || '[]');
      notes.push(snippet);
      localStorage.setItem(key, JSON.stringify(notes));
      loadNotes();
    }

    function loadNotes() {
      const key = `notes-${currentCase.title}`;
      let notes = JSON.parse(localStorage.getItem(key) || '[]');
      notesList.innerHTML = '';
      notes.forEach(note => {
        const div = document.createElement('div');
        div.className = 'note';
        div.textContent = note;
        notesList.appendChild(div);
      });
    }

    tabs.forEach(tab => {
      tab.onclick = () => {
        currentTab = tab.dataset.tab;
        renderTab();
      };
    });

    entityBtn.onclick = highlightEntities;
    closeBtn.onclick = () => { detailModal.style.display = 'none'; };

    searchInput.oninput = () => renderCases(searchInput.value);

    renderCases();
  </script>
</body>
</html>