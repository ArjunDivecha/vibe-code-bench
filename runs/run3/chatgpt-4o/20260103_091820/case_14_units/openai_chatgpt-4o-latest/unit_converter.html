<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Unit Converter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f5f7fa;
      color: #333;
    }

    .container {
      max-width: 600px;
      margin: auto;
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    select, input {
      width: 100%;
      padding: 8px;
      margin: 10px 0;
      font-size: 16px;
    }

    .row {
      display: flex;
      gap: 10px;
    }

    .row > div {
      flex: 1;
    }

    button {
      padding: 10px 15px;
      font-size: 16px;
      border: none;
      background: #007bff;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background: #0056b3;
    }

    .formula {
      margin-top: 15px;
      font-style: italic;
      color: #555;
    }

    .quick-buttons {
      margin-top: 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .quick-buttons button {
      flex: 1 1 45%;
      background: #28a745;
    }

    @media (max-width: 500px) {
      .row {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Unit Converter</h1>
    <label for="category">Category:</label>
    <select id="category">
      <option value="length">Length</option>
      <option value="weight">Weight</option>
      <option value="temperature">Temperature</option>
      <option value="volume">Volume</option>
      <option value="time">Time</option>
    </select>

    <div class="row">
      <div>
        <input type="number" id="input1" placeholder="Enter value" />
        <select id="unit1"></select>
      </div>
      <div>
        <input type="number" id="input2" placeholder="Converted value" />
        <select id="unit2"></select>
      </div>
    </div>

    <div class="row" style="justify-content: center;">
      <button id="swap">Swap Units</button>
    </div>

    <div class="formula" id="formula">Conversion formula will appear here.</div>

    <div class="quick-buttons" id="quick-buttons">
      <!-- Populated dynamically -->
    </div>
  </div>

  <script>
    const units = {
      length: {
        base: 'm',
        units: {
          km: 1000,
          m: 1,
          cm: 0.01,
          mm: 0.001,
          miles: 1609.34,
          feet: 0.3048,
          inches: 0.0254
        }
      },
      weight: {
        base: 'kg',
        units: {
          kg: 1,
          g: 0.001,
          lb: 0.453592,
          oz: 0.0283495
        }
      },
      temperature: {
        units: ['C', 'F', 'K']
      },
      volume: {
        base: 'L',
        units: {
          L: 1,
          mL: 0.001,
          gallons: 3.78541,
          cups: 0.24
        }
      },
      time: {
        base: 'seconds',
        units: {
          hours: 3600,
          minutes: 60,
          seconds: 1
        }
      }
    };

    const categorySelect = document.getElementById('category');
    const unit1Select = document.getElementById('unit1');
    const unit2Select = document.getElementById('unit2');
    const input1 = document.getElementById('input1');
    const input2 = document.getElementById('input2');
    const formulaDiv = document.getElementById('formula');
    const quickButtonsDiv = document.getElementById('quick-buttons');
    const swapBtn = document.getElementById('swap');

    function populateUnits(category) {
      unit1Select.innerHTML = '';
      unit2Select.innerHTML = '';
      quickButtonsDiv.innerHTML = '';

      let unitKeys = [];
      if (category === 'temperature') {
        unitKeys = units[category].units;
      } else {
        unitKeys = Object.keys(units[category].units);
      }

      unitKeys.forEach(u => {
        unit1Select.innerHTML += `<option value="${u}">${u}</option>`;
        unit2Select.innerHTML += `<option value="${u}">${u}</option>`;
      });

      // Set default selections
      unit1Select.value = unitKeys[0];
      unit2Select.value = unitKeys[1] || unitKeys[0];

      // Add common conversion buttons
      const commonPairs = {
        length: [['km', 'm'], ['m', 'feet'], ['inches', 'cm']],
        weight: [['kg', 'lb'], ['g', 'oz']],
        temperature: [['C', 'F'], ['F', 'C'], ['C', 'K']],
        volume: [['L', 'mL'], ['gallons', 'L']],
        time: [['hours', 'minutes'], ['minutes', 'seconds']]
      };

      (commonPairs[category] || []).forEach(pair => {
        const btn = document.createElement('button');
        btn.textContent = `${pair[0]} → ${pair[1]}`;
        btn.onclick = () => {
          unit1Select.value = pair[0];
          unit2Select.value = pair[1];
          convertFromInput1();
        };
        quickButtonsDiv.appendChild(btn);
      });
    }

    function convertTemperature(value, from, to) {
      let result;
      let formula = '';
      if (from === to) {
        result = value;
        formula = 'Same units';
      } else if (from === 'C') {
        if (to === 'F') {
          result = value * 9/5 + 32;
          formula = 'F = C × 9/5 + 32';
        } else if (to === 'K') {
          result = value + 273.15;
          formula = 'K = C + 273.15';
        }
      } else if (from === 'F') {
        if (to === 'C') {
          result = (value - 32) * 5/9;
          formula = 'C = (F - 32) × 5/9';
        } else if (to === 'K') {
          result = (value - 32) * 5/9 + 273.15;
          formula = 'K = (F - 32) × 5/9 + 273.15';
        }
      } else if (from === 'K') {
        if (to === 'C') {
          result = value - 273.15;
          formula = 'C = K - 273.15';
        } else if (to === 'F') {
          result = (value - 273.15) * 9/5 + 32;
          formula = 'F = (K - 273.15) × 9/5 + 32';
        }
      }
      return [result, formula];
    }

    function convertValue(value, from, to, category) {
      if (category === 'temperature') {
        return convertTemperature(value, from, to);
      } else {
        const conv = units[category];
        const baseVal = value * conv.units[from];
        const converted = baseVal / conv.units[to];
        const formula = `${value} ${from} × (${conv.units[from]}) ➞ base × (1/${conv.units[to]}) ➞ ${converted} ${to}`;
        return [converted, formula];
      }
    }

    function convertFromInput1() {
      const val = parseFloat(input1.value);
      if (isNaN(val)) {
        input2.value = '';
        formulaDiv.textContent = '';
        return;
      }
      const category = categorySelect.value;
      const from = unit1Select.value;
      const to = unit2Select.value;
      const [result, formula] = convertValue(val, from, to, category);
      input2.value = +result.toFixed(6);
      formulaDiv.textContent = formula;
    }

    function convertFromInput2() {
      const val = parseFloat(input2.value);
      if (isNaN(val)) {
        input1.value = '';
        formulaDiv.textContent = '';
        return;
      }
      const category = categorySelect.value;
      const from = unit2Select.value;
      const to = unit1Select.value;
      const [result, formula] = convertValue(val, from, to, category);
      input1.value = +result.toFixed(6);
      formulaDiv.textContent = `(Reverse) ${formula}`;
    }

    input1.addEventListener('input', convertFromInput1);
    input2.addEventListener('input', convertFromInput2);
    categorySelect.addEventListener('change', () => {
      populateUnits(categorySelect.value);
      convertFromInput1();
    });
    unit1Select.addEventListener('change', convertFromInput1);
    unit2Select.addEventListener('change', convertFromInput1);

    swapBtn.addEventListener('click', () => {
      const tempUnit = unit1Select.value;
      unit1Select.value = unit2Select.value;
      unit2Select.value = tempUnit;

      const tempVal = input1.value;
      input1.value = input2.value;
      input2.value = tempVal;

      convertFromInput1();
    });

    // Initialize
    populateUnits(categorySelect.value);
    convertFromInput1();
  </script>
</body>
</html>