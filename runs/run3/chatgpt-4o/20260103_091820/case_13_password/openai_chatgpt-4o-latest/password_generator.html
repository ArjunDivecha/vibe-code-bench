<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Password Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 600px;
            margin: 40px auto;
            background: white;
            padding: 20px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
        }
        input[type="range"] {
            width: 100%;
        }
        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0;
        }
        .options label {
            font-weight: normal;
        }
        .passwords {
            margin-top: 20px;
        }
        .password-entry {
            background: #eee;
            padding: 10px;
            margin-top: 5px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: monospace;
        }
        .password-entry button {
            margin-left: 10px;
        }
        .strength-meter {
            height: 10px;
            background: #ddd;
            border-radius: 5px;
            margin-top: 5px;
            overflow: hidden;
        }
        .strength {
            height: 100%;
            width: 0%;
            background: red;
            transition: width 0.3s ease;
        }
        button {
            padding: 10px 15px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #45a049;
        }
        .history {
            margin-top: 30px;
        }
        .history h3 {
            margin-bottom: 10px;
        }
        .history-item {
            font-family: monospace;
            background: #f1f1f1;
            padding: 5px;
            margin-bottom: 3px;
            border-radius: 3px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Password Generator</h1>
        <label for="lengthRange">Password Length: <span id="lengthValue">16</span></label>
        <input type="range" id="lengthRange" min="8" max="32" value="16" />

        <div class="options">
            <label><input type="checkbox" id="includeUppercase" checked> Uppercase (A-Z)</label>
            <label><input type="checkbox" id="includeLowercase" checked> Lowercase (a-z)</label>
            <label><input type="checkbox" id="includeNumbers" checked> Numbers (0-9)</label>
            <label><input type="checkbox" id="includeSymbols" checked> Symbols (!@#$...)</label>
        </div>

        <label for="quantity">Number of passwords to generate:</label>
        <input type="number" id="quantity" min="1" max="10" value="3" />

        <button id="generateBtn">Generate Passwords</button>

        <div class="passwords" id="passwordList"></div>

        <div class="history">
            <h3>History</h3>
            <div id="historyList"></div>
        </div>
    </div>

    <script>
        const lengthRange = document.getElementById('lengthRange');
        const lengthValue = document.getElementById('lengthValue');
        const generateBtn = document.getElementById('generateBtn');
        const passwordList = document.getElementById('passwordList');
        const historyList = document.getElementById('historyList');

        const includeUppercase = document.getElementById('includeUppercase');
        const includeLowercase = document.getElementById('includeLowercase');
        const includeNumbers = document.getElementById('includeNumbers');
        const includeSymbols = document.getElementById('includeSymbols');
        const quantityInput = document.getElementById('quantity');

        const history = [];

        lengthRange.addEventListener('input', () => {
            lengthValue.textContent = lengthRange.value;
        });

        function getRandomChar(str) {
            return str[Math.floor(Math.random() * str.length)];
        }

        function generatePassword(length, options) {
            const upper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
            const lower = "abcdefghijklmnopqrstuvwxyz";
            const numbers = "0123456789";
            const symbols = "!@#$%^&*()-_=+[]{}|;:,.<>?/";

            let allChars = "";
            let guaranteed = [];

            if (options.uppercase) {
                allChars += upper;
                guaranteed.push(getRandomChar(upper));
            }
            if (options.lowercase) {
                allChars += lower;
                guaranteed.push(getRandomChar(lower));
            }
            if (options.numbers) {
                allChars += numbers;
                guaranteed.push(getRandomChar(numbers));
            }
            if (options.symbols) {
                allChars += symbols;
                guaranteed.push(getRandomChar(symbols));
            }

            if (allChars.length === 0) {
                return "";
            }

            let remaining = length - guaranteed.length;
            let password = guaranteed;

            for (let i = 0; i < remaining; i++) {
                password.push(getRandomChar(allChars));
            }

            // Shuffle the result
            for (let i = password.length - 1; i > 0; i--) {
                let j = Math.floor(Math.random() * (i + 1));
                [password[i], password[j]] = [password[j], password[i]];
            }

            return password.join('');
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert("Copied to clipboard!");
            });
        }

        function calculateStrength(password) {
            let strength = 0;
            if (/[A-Z]/.test(password)) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;
            if (password.length >= 12) strength++;
            return strength;
        }

        function getStrengthColor(level) {
            const colors = ['red', 'orange', 'yellow', 'lightgreen', 'green'];
            return colors[Math.min(level, colors.length - 1)];
        }

        generateBtn.addEventListener('click', () => {
            passwordList.innerHTML = "";
            const length = parseInt(lengthRange.value);
            const quantity = Math.min(Math.max(parseInt(quantityInput.value), 1), 10);
            const options = {
                uppercase: includeUppercase.checked,
                lowercase: includeLowercase.checked,
                numbers: includeNumbers.checked,
                symbols: includeSymbols.checked
            };

            for (let i = 0; i < quantity; i++) {
                const pwd = generatePassword(length, options);
                if (!pwd) {
                    alert("Please select at least one character type.");
                    return;
                }

                const div = document.createElement("div");
                div.className = "password-entry";

                const span = document.createElement("span");
                span.textContent = pwd;

                const strengthBar = document.createElement("div");
                strengthBar.className = "strength-meter";
                const strength = document.createElement("div");
                strength.className = "strength";
                const level = calculateStrength(pwd);
                strength.style.width = (level * 20) + "%";
                strength.style.background = getStrengthColor(level);
                strengthBar.appendChild(strength);

                const btn = document.createElement("button");
                btn.textContent = "Copy";
                btn.onclick = () => copyToClipboard(pwd);

                const innerDiv = document.createElement("div");
                innerDiv.style.flexGrow = "1";
                innerDiv.style.marginRight = "10px";
                innerDiv.appendChild(span);
                innerDiv.appendChild(strengthBar);

                div.appendChild(innerDiv);
                div.appendChild(btn);

                passwordList.appendChild(div);

                history.unshift(pwd);
            }

            updateHistory();
        });

        function updateHistory() {
            historyList.innerHTML = "";
            const maxItems = 10;
            for (let i = 0; i < Math.min(history.length, maxItems); i++) {
                const item = document.createElement("div");
                item.className = "history-item";
                item.textContent = history[i];
                historyList.appendChild(item);
            }
        }
    </script>
</body>
</html>