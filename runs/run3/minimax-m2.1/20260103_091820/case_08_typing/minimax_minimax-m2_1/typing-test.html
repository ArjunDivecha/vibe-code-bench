<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 2.2rem;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timer-value {
            color: #e74c3c;
        }

        .text-display {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            font-size: 1.4rem;
            line-height: 2;
            margin-bottom: 20px;
            min-height: 150px;
            word-wrap: break-word;
            border: 2px solid #e9ecef;
            transition: border-color 0.3s;
        }

        .text-display.active {
            border-color: #667eea;
        }

        .text-display.correct-mode {
            border-color: #27ae60;
        }

        .char {
            position: relative;
        }

        .char.correct {
            color: #27ae60;
            background: #d4edda;
        }

        .char.incorrect {
            color: #e74c3c;
            background: #f8d7da;
            text-decoration: underline;
        }

        .char.current {
            background: #ffeaa7;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { background: #ffeaa7; }
            51%, 100% { background: transparent; }
        }

        .input-area {
            margin-bottom: 20px;
        }

        .typing-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.2rem;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            outline: none;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .typing-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
        }

        .typing-input:disabled {
            background: #f8f9fa;
            cursor: not-allowed;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            box-shadow: 0 5px 20px rgba(108, 117, 125, 0.4);
        }

        .results-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .results-overlay.show {
            display: flex;
        }

        .results-modal {
            background: white;
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            max-width: 450px;
            width: 90%;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .results-modal h2 {
            color: #333;
            margin-bottom: 30px;
            font-size: 1.8rem;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
        }

        .result-item .value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .result-item .label {
            font-size: 0.85rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .results-modal .btn {
            margin-top: 10px;
        }

        .text-selector {
            text-align: center;
            margin-bottom: 20px;
        }

        .text-selector label {
            margin-right: 10px;
            color: #666;
        }

        .text-selector select {
            padding: 8px 15px;
            font-size: 1rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            outline: none;
            cursor: pointer;
        }

        .text-selector select:focus {
            border-color: #667eea;
        }

        .instructions {
            text-align: center;
            color: #666;
            margin-bottom: 15px;
            font-size: 0.95rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ö° Typing Speed Test</h1>
        
        <div class="stats-bar">
            <div class="stat">
                <div class="stat-value" id="wpm">0</div>
                <div class="stat-label">WPM</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="accuracy">100%</div>
                <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat">
                <div class="stat-value timer-value" id="timer">30</div>
                <div class="stat-label">Seconds</div>
            </div>
        </div>

        <div class="text-selector">
            <label for="textSelect">Choose a text:</label>
            <select id="textSelect">
                <option value="0">Text Sample 1</option>
                <option value="1">Text Sample 2</option>
                <option value="2">Text Sample 3</option>
                <option value="3">Text Sample 4</option>
                <option value="4">Text Sample 5</option>
                <option value="5">Text Sample 6</option>
                <option value="6">Text Sample 7</option>
                <option value="7">Text Sample 8</option>
                <option value="8">Text Sample 9</option>
                <option value="9">Text Sample 10</option>
            </select>
        </div>

        <p class="instructions">Start typing to begin the test. The timer will start automatically.</p>

        <div class="text-display" id="textDisplay"></div>

        <div class="input-area">
            <input type="text" class="typing-input" id="typingInput" placeholder="Start typing here..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
        </div>

        <div class="controls">
            <button class="btn btn-primary" id="restartBtn">üîÑ Restart Test</button>
            <button class="btn btn-secondary" id="newTextBtn">üìù New Text</button>
        </div>
    </div>

    <div class="results-overlay" id="resultsOverlay">
        <div class="results-modal">
            <h2>üéâ Test Complete!</h2>
            <div class="results-grid">
                <div class="result-item">
                    <div class="value" id="finalWpm">0</div>
                    <div class="label">WPM</div>
                </div>
                <div class="result-item">
                    <div class="value" id="finalAccuracy">0%</div>
                    <div class="label">Accuracy</div>
                </div>
                <div class="result-item">
                    <div class="value" id="finalChars">0</div>
                    <div class="label">Characters</div>
                </div>
                <div class="result-item">
                    <div class="value" id="finalErrors">0</div>
                    <div class="label">Errors</div>
                </div>
            </div>
            <button class="btn btn-primary" id="tryAgainBtn">Try Again</button>
        </div>
    </div>

    <script>
        // Text samples for typing practice
        const textSamples = [
            "The quick brown fox jumps over the lazy dog. This classic pangram contains every letter of the alphabet and is often used to test typewriters and keyboards.",
            "Programming is the art of telling another human being what one wants the computer to do. It requires patience, logic, and creativity to solve problems.",
            "In the heart of the forest, ancient trees whispered secrets to the wind. Sunlight filtered through the canopy, creating dancing patterns on the forest floor.",
            "Success is not final, failure is not fatal: it is the courage to continue that counts. Keep pushing forward despite the obstacles in your path.",
            "The ocean waves crashed against the rocky shore, creating a symphony of sound. Seagulls flew overhead, their cries blending with the distant thunder.",
            "Technology has transformed the way we live, work, and communicate. From smartphones to artificial intelligence, innovation continues to shape our future.",
            "A cup of coffee in the morning can be a small moment of peace in a busy day. The aroma and warmth provide comfort and energy to face challenges.",
            "Music has the power to evoke strong emotions and memories. Whether classical, rock, or jazz, each genre tells a story and connects people across cultures.",
            "The stars twinkled in the clear night sky, millions of light-years away. Ancient civilizations used them for navigation and created stories about their patterns.",
            "Learning never exhausts the mind. Every new skill acquired opens doors to understanding and opens new pathways in the vast landscape of knowledge."
        ];

        // DOM Elements
        const textDisplay = document.getElementById('textDisplay');
        const typingInput = document.getElementById('typingInput');
        const wpmDisplay = document.getElementById('wpm');
        const accuracyDisplay = document.getElementById('accuracy');
        const timerDisplay = document.getElementById('timer');
        const restartBtn = document.getElementById('restartBtn');
        const newTextBtn = document.getElementById('newTextBtn');
        const textSelect = document.getElementById('textSelect');
        const resultsOverlay = document.getElementById('resultsOverlay');
        const tryAgainBtn = document.getElementById('tryAgainBtn');

        // State variables
        let currentText = '';
        let charIndex = 0;
        let errors = 0;
        let startTime = null;
        let timerInterval = null;
        let isTyping = false;
        let timeLeft = 30;

        // Initialize the test
        function initTest() {
            currentText = textSamples[textSelect.value];
            charIndex = 0;
            errors = 0;
            isTyping = false;
            timeLeft = 30;
            
            // Clear timer
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Reset displays
            timerDisplay.textContent = '30';
            wpmDisplay.textContent = '0';
            accuracyDisplay.textContent = '100%';
            typingInput.value = '';
            typingInput.disabled = false;
            textDisplay.classList.remove('active', 'correct-mode');
            
            // Render text with spans
            renderText();
        }

        // Render text with character spans
        function renderText() {
            textDisplay.innerHTML = '';
            
            for (let i = 0; i < currentText.length; i++) {
                const span = document.createElement('span');
                span.classList.add('char');
                span.textContent = currentText[i];
                
                if (i === 0) {
                    span.classList.add('current');
                }
                
                textDisplay.appendChild(span);
            }
        }

        // Update text highlighting based on input
        function updateTextDisplay() {
            const spans = textDisplay.querySelectorAll('.char');
            
            for (let i = 0; i < spans.length; i++) {
                spans[i].classList.remove('correct', 'incorrect', 'current');
                
                if (i < charIndex) {
                    const typedChar = typingInput.value[i];
                    spans[i].textContent = currentText[i];
                    
                    if (typedChar === currentText[i]) {
                        spans[i].classList.add('correct');
                    } else {
                        spans[i].classList.add('incorrect');
                    }
                } else if (i === charIndex) {
                    spans[i].classList.add('current');
                }
            }
        }

        // Calculate and update WPM
        function calculateWPM() {
            if (!startTime || charIndex === 0) return;
            
            const timeElapsed = (Date.now() - startTime) / 1000 / 60; // in minutes
            const wordsTyped = charIndex / 5;
            const wpm = Math.round(wordsTyped / timeElapsed);
            
            wpmDisplay.textContent = isNaN(wpm) || !isFinite(wpm) ? 0 : wpm;
        }

        // Calculate and update accuracy
        function calculateAccuracy() {
            if (charIndex === 0) {
                accuracyDisplay.textContent = '100%';
                return;
            }
            
            const accuracy = ((charIndex - errors) / charIndex) * 100;
            accuracyDisplay.textContent = Math.max(0, Math.round(accuracy)) + '%';
        }

        // Start the timer
        function startTimer() {
            startTime = Date.now();
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    endTest();
                }
            }, 1000);
        }

        // End the test and show results
        function endTest() {
            clearInterval(timerInterval);
            isTyping = false;
            typingInput.disabled = true;
            textDisplay.classList.remove('active');
            
            // Calculate final stats
            const finalChars = charIndex;
            const finalWpm = parseInt(wpmDisplay.textContent);
            const finalAccuracy = accuracyDisplay.textContent;
            
            // Update results modal
            document.getElementById('finalWpm').textContent = finalWpm;
            document.getElementById('finalAccuracy').textContent = finalAccuracy;
            document.getElementById('finalChars').textContent = finalChars;
            document.getElementById('finalErrors').textContent = errors;
            
            // Show results
            resultsOverlay.classList.add('show');
        }

        // Handle input event
        function handleInput(e) {
            const inputValue = typingInput.value;
            
            // Start timer on first input
            if (!isTyping && inputValue.length > 0) {
                isTyping = true;
                textDisplay.classList.add('active');
                startTimer();
            }
            
            // Handle backspace
            if (inputValue.length < charIndex) {
                charIndex = inputValue.length;
                updateTextDisplay();
                calculateWPM();
                calculateAccuracy();
                return;
            }
            
            // Only allow typing one more character
            if (inputValue.length > charIndex + 1) {
                typingInput.value = inputValue.slice(0, charIndex + 1);
                return;
            }
            
            const currentChar = inputValue[charIndex];
            
            // Check if character matches
            if (currentChar === currentText[charIndex]) {
                charIndex++;
                textDisplay.classList.add('correct-mode');
            } else {
                errors++;
                charIndex++;
                textDisplay.classList.remove('correct-mode');
            }
            
            updateTextDisplay();
            calculateWPM();
            calculateAccuracy();
            
            // Check if text is complete
            if (charIndex >= currentText.length) {
                setTimeout(endTest, 100);
            }
        }

        // Event listeners
        typingInput.addEventListener('input', handleInput);
        
        restartBtn.addEventListener('click', () => {
            resultsOverlay.classList.remove('show');
            initTest();
        });
        
        newTextBtn.addEventListener('click', () => {
            resultsOverlay.classList.remove('show');
            textSelect.value = (parseInt(textSelect.value) + 1) % textSamples.length;
            initTest();
        });
        
        textSelect.addEventListener('change', () => {
            resultsOverlay.classList.remove('show');
            initTest();
        });
        
        tryAgainBtn.addEventListener('click', () => {
            resultsOverlay.classList.remove('show');
            initTest();
        });
        
        // Prevent pasting
        typingInput.addEventListener('paste', (e) => {
            e.preventDefault();
        });
        
        // Focus input on page load
        window.addEventListener('load', () => {
            initTest();
            typingInput.focus();
        });
    </script>
</body>
</html>