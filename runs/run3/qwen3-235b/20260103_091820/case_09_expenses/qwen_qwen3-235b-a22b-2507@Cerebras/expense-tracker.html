<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --success-color: #2ecc71;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .description {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .card h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.5rem;
            border-bottom: 2px solid var(--light-color);
            padding-bottom: 10px;
        }

        .add-expense-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .add-expense-form {
                grid-template-columns: 1fr;
            }
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--dark-color);
        }

        input, select, textarea {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
            margin-top: 10px;
        }

        button:hover {
            background-color: var(--secondary-color);
        }

        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filters > div {
            flex: 1;
            min-width: 200px;
        }

        .filters button {
            width: 100%;
            margin-top: 23px;
        }

        @media (max-width: 768px) {
            .filters {
                flex-direction: column;
            }
        }

        .expenses-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .expense-item {
            display: grid;
            grid-template-columns: 100px 120px 1fr 80px 50px;
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            align-items: center;
            transition: var(--transition);
        }

        .expense-item:hover {
            background-color: #f8f9fa;
        }

        .expense-amount {
            font-weight: 700;
            color: var(--dark-color);
        }

        .expense-category {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            text-align: center;
        }

        .category-Food { background-color: #ff9f43; color: white; }
        .category-Transport { background-color: #0abde3; color: white; }
        .category-Entertainment { background-color: #ee5a77; color: white; }
        .category-Bills { background-color: #667eea; color: white; }
        .category-Shopping { background-color: #26de81; color: white; }
        .category-Other { background-color: #a55eea; color: white; }

        .expense-date {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .expense-description {
            color: #555;
            font-size: 0.95rem;
        }

        .delete-btn {
            background-color: transparent;
            color: var(--accent-color);
            padding: 5px;
            font-size: 1.2rem;
            margin: 0;
        }

        .delete-btn:hover {
            background-color: rgba(231, 76, 60, 0.1);
        }

        .summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .total {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .chart-container {
            height: 300px;
            margin-top: 20px;
        }

        .no-expenses {
            text-align: center;
            color: #7f8c8d;
            padding: 30px;
            font-style: italic;
        }

        .spending-breakdown {
            margin-top: 15px;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
        }

        .breakdown-item:last-child {
            border-bottom: none;
        }

        .breakdown-category {
            display: flex;
            align-items: center;
        }

        .color-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Expense Tracker</h1>
            <p class="description">Keep track of your spending and manage your budget</p>
        </header>

        <div class="dashboard">
            <div class="card">
                <h2>Add New Expense</h2>
                <form id="expense-form" class="add-expense-form">
                    <div class="form-group">
                        <label for="amount">Amount ($)</label>
                        <input type="number" id="amount" step="0.01" min="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="category">Category</label>
                        <select id="category" required>
                            <option value="Food">Food</option>
                            <option value="Transport">Transport</option>
                            <option value="Entertainment">Entertainment</option>
                            <option value="Bills">Bills</option>
                            <option value="Shopping">Shopping</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea id="description" placeholder="What was this expense for?"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="date">Date</label>
                        <input type="date" id="date" required>
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <button type="submit">Add Expense</button>
                    </div>
                </form>
            </div>

            <div class="card">
                <h2>Spending Summary</h2>
                <div class="summary">
                    <span>Total Spending:</span>
                    <span class="total" id="total-amount">$0.00</span>
                </div>
                <div class="chart-container">
                    <canvas id="category-chart"></canvas>
                </div>
                <div class="spending-breakdown" id="spending-breakdown">
                    <!-- Breakdown items will be added here -->
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Expenses</h2>
            <div class="filters">
                <div>
                    <label for="filter-category">Filter by Category</label>
                    <select id="filter-category">
                        <option value="All">All Categories</option>
                        <option value="Food">Food</option>
                        <option value="Transport">Transport</option>
                        <option value="Entertainment">Entertainment</option>
                        <option value="Bills">Bills</option>
                        <option value="Shopping">Shopping</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div>
                    <label for="filter-start-date">From Date</label>
                    <input type="date" id="filter-start-date">
                </div>
                <div>
                    <label for="filter-end-date">To Date</label>
                    <input type="date" id="filter-end-date">
                </div>
                <div>
                    <button id="apply-filters">Apply Filters</button>
                </div>
            </div>
            <div class="expenses-list" id="expenses-list">
                <!-- Expense items will be added here -->
                <div class="no-expenses">No expenses recorded yet. Add your first expense above!</div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set default date to today
            document.getElementById('date').valueAsDate = new Date();

            // Initialize expenses array from localStorage
            let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
            
            // Chart instance
            let categoryChart = null;

            // DOM elements
            const expenseForm = document.getElementById('expense-form');
            const expensesList = document.getElementById('expenses-list');
            const totalAmount = document.getElementById('total-amount');
            const spendingBreakdown = document.getElementById('spending-breakdown');
            const filterCategory = document.getElementById('filter-category');
            const filterStartDate = document.getElementById('filter-start-date');
            const filterEndDate = document.getElementById('filter-end-date');
            const applyFiltersBtn = document.getElementById('apply-filters');

            // Category colors for chart
            const categoryColors = {
                Food: '#ff9f43',
                Transport: '#0abde3',
                Entertainment: '#ee5a77',
                Bills: '#667eea',
                Shopping: '#26de81',
                Other: '#a55eea'
            };

            // Function to save expenses to localStorage
            function saveExpenses() {
                localStorage.setItem('expenses', JSON.stringify(expenses));
            }

            // Function to format currency
            function formatCurrency(amount) {
                return '$' + Number(amount).toFixed(2);
            }

            // Function to format date
            function formatDate(dateString) {
                const options = { year: 'numeric', month: 'short', day: 'numeric' };
                return new Date(dateString).toLocaleDateString(undefined, options);
            }

            // Function to calculate total spending
            function calculateTotal() {
                return expenses.reduce((total, expense) => total + parseFloat(expense.amount), 0);
            }

            // Function to get spending by category
            function getSpendingByCategory() {
                const categoryTotals = {};
                
                expenses.forEach(expense => {
                    if (!categoryTotals[expense.category]) {
                        categoryTotals[expense.category] = 0;
                    }
                    categoryTotals[expense.category] += parseFloat(expense.amount);
                });
                
                return categoryTotals;
            }

            // Function to filter expenses
            function filterExpenses() {
                const category = filterCategory.value;
                const startDate = filterStartDate.value;
                const endDate = filterEndDate.value;
                
                let filteredExpenses = [...expenses];
                
                if (category !== 'All') {
                    filteredExpenses = filteredExpenses.filter(expense => expense.category === category);
                }
                
                if (startDate) {
                    filteredExpenses = filteredExpenses.filter(expense => expense.date >= startDate);
                }
                
                if (endDate) {
                    filteredExpenses = filteredExpenses.filter(expense => expense.date <= endDate);
                }
                
                return filteredExpenses;
            }

            // Function to render expenses list
            function renderExpenses() {
                const filteredExpenses = filterExpenses();
                expensesList.innerHTML = '';
                
                if (filteredExpenses.length === 0) {
                    expensesList.innerHTML = '<div class="no-expenses">No expenses match the selected filters.</div>';
                    return;
                }
                
                filteredExpenses.forEach(expense => {
                    const expenseItem = document.createElement('div');
                    expenseItem.className = 'expense-item';
                    expenseItem.innerHTML = `
                        <div class="expense-amount">${formatCurrency(expense.amount)}</div>
                        <div class="expense-category category-${expense.category}">${expense.category}</div>
                        <div class="expense-description">${expense.description || 'No description'}</div>
                        <div class="expense-date">${formatDate(expense.date)}</div>
                        <button class="delete-btn" data-id="${expense.id}">Ã—</button>
                    `;
                    expensesList.appendChild(expenseItem);
                });
                
                // Add event listeners to delete buttons
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const expenseId = this.getAttribute('data-id');
                        deleteExpense(expenseId);
                    });
                });
            }

            // Function to delete an expense
            function deleteExpense(id) {
                expenses = expenses.filter(expense => expense.id !== id);
                saveExpenses();
                renderAll();
            }

            // Function to render spending summary
            function renderSummary() {
                // Update total amount
                totalAmount.textContent = formatCurrency(calculateTotal());
                
                // Update spending breakdown
                const categoryTotals = getSpendingByCategory();
                spendingBreakdown.innerHTML = '';
                
                Object.entries(categoryTotals).sort((a, b) => b[1] - a[1]).forEach(([category, amount]) => {
                    const breakdownItem = document.createElement('div');
                    breakdownItem.className = 'breakdown-item';
                    breakdownItem.innerHTML = `
                        <div class="breakdown-category">
                            <div class="color-dot" style="background-color: ${categoryColors[category]}"></div>
                            ${category}
                        </div>
                        <div class="breakdown-amount">${formatCurrency(amount)}</div>
                    `;
                    spendingBreakdown.appendChild(breakdownItem);
                });
                
                // Update chart
                updateChart();
            }

            // Function to update the category chart
            function updateChart() {
                const categoryTotals = getSpendingByCategory();
                const categories = Object.keys(categoryTotals);
                const amounts = Object.values(categoryTotals);
                const colors = categories.map(category => categoryColors[category]);
                
                // Destroy previous chart if it exists
                if (categoryChart) {
                    categoryChart.destroy();
                }
                
                const ctx = document.getElementById('category-chart').getContext('2d');
                categoryChart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: categories,
                        datasets: [{
                            data: amounts,
                            backgroundColor: colors,
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.parsed || 0;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = ((value / total) * 100).toFixed(1);
                                        return `${label}: ${formatCurrency(value)} (${percentage}%)`;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Function to render everything
            function renderAll() {
                renderExpenses();
                renderSummary();
            }

            // Event listener for form submission
            expenseForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const amount = document.getElementById('amount').value;
                const category = document.getElementById('category').value;
                const description = document.getElementById('description').value;
                const date = document.getElementById('date').value;
                
                // Create new expense object
                const newExpense = {
                    id: Date.now().toString(), // Simple unique ID
                    amount,
                    category,
                    description,
                    date
                };
                
                // Add to expenses array
                expenses.unshift(newExpense); // Add to beginning of array
                
                // Save to localStorage
                saveExpenses();
                
                // Reset form
                expenseForm.reset();
                document.getElementById('date').valueAsDate = new Date(); // Reset date to today
                
                // Re-render everything
                renderAll();
            });

            // Event listener for filter changes
            applyFiltersBtn.addEventListener('click', renderExpenses);
            filterCategory.addEventListener('change', renderExpenses);
            filterStartDate.addEventListener('change', renderExpenses);
            filterEndDate.addEventListener('change', renderExpenses);

            // Initialize the app
            renderAll();
        });
    </script>
</body>
</html>