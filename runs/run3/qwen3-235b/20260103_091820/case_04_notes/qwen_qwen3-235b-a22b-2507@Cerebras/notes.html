<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Notes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        h1 {
            color: #444;
            font-weight: 300;
            font-size: 2.5rem;
        }
        
        .app {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
            height: calc(100vh - 120px);
        }
        
        @media (max-width: 768px) {
            .app {
                grid-template-columns: 1fr;
            }
        }
        
        .notes-sidebar {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .search-container {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }
        
        #search {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .notes-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }
        
        .note-item {
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            border-radius: 4px;
            margin-bottom: 5px;
            transition: background-color 0.2s;
        }
        
        .note-item:hover {
            background-color: #f9f9f9;
        }
        
        .note-item.selected {
            background-color: #e6f7ff;
            border-left: 3px solid #1890ff;
        }
        
        .note-title {
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .note-preview {
            font-size: 12px;
            color: #777;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .new-note-btn {
            margin: 15px;
            padding: 12px;
            background-color: #1890ff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        
        .new-note-btn:hover {
            background-color: #0c7cd5;
        }
        
        .note-editor {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .editor-header {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        #note-title {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 500;
        }
        
        .editor-actions {
            display: flex;
            gap: 10px;
            margin-left: 10px;
        }
        
        .action-btn {
            padding: 8px 12px;
            border: 1px solid #ddd;
            background-color: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background-color: #f0f0f0;
        }
        
        .delete-btn {
            color: #ff4d4f;
            border-color: #ff4d4f;
        }
        
        .delete-btn:hover {
            background-color: #fff1f0;
        }
        
        #note-content {
            flex: 1;
            padding: 15px;
            border: none;
            resize: none;
            font-size: 14px;
            line-height: 1.6;
            outline: none;
        }
        
        .formatting {
            padding: 10px 15px;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
            display: flex;
            gap: 10px;
            background-color: #f9f9f9;
        }
        
        .format-btn {
            padding: 6px 10px;
            border: 1px solid #ddd;
            background-color: white;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .format-btn:hover {
            background-color: #f0f0f0;
        }
        
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #999;
            text-align: center;
            padding: 20px;
        }
        
        .empty-state p {
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Simple Notes</h1>
        </header>
        
        <div class="app">
            <div class="notes-sidebar">
                <div class="search-container">
                    <input type="text" id="search" placeholder="Search notes...">
                </div>
                <div class="notes-list" id="notes-list">
                    <!-- Notes will be inserted here -->
                </div>
                <button class="new-note-btn" id="new-note-btn">+ New Note</button>
            </div>
            
            <div class="note-editor" id="note-editor">
                <div class="editor-header">
                    <input type="text" id="note-title" placeholder="Note title...">
                    <div class="editor-actions">
                        <button class="action-btn delete-btn" id="delete-btn">Delete</button>
                    </div>
                </div>
                <div class="formatting">
                    <button class="format-btn" data-format="bold"><b>B</b></button>
                    <button class="format-btn" data-format="italic"><i>I</i></button>
                </div>
                <textarea id="note-content" placeholder="Start writing your note here..."></textarea>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const notesList = document.getElementById('notes-list');
        const noteTitleInput = document.getElementById('note-title');
        const noteContentTextarea = document.getElementById('note-content');
        const newNoteBtn = document.getElementById('new-note-btn');
        const deleteBtn = document.getElementById('delete-btn');
        const searchInput = document.getElementById('search');
        const formatButtons = document.querySelectorAll('.format-btn');

        // State
        let notes = JSON.parse(localStorage.getItem('notes')) || [];
        let currentNoteId = null;

        // Save notes to localStorage
        function saveNotes() {
            localStorage.setItem('notes', JSON.stringify(notes));
        }

        // Create a new note
        function createNote() {
            const newNote = {
                id: Date.now().toString(),
                title: 'Untitled Note',
                content: '',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            notes.unshift(newNote); // Add to beginning of array
            saveNotes();
            renderNotes();
            selectNote(newNote.id);
        }

        // Delete a note
        function deleteNote(id) {
            if (notes.length <= 1) {
                alert('You need at least one note.');
                return;
            }
            
            if (confirm('Are you sure you want to delete this note?')) {
                notes = notes.filter(note => note.id !== id);
                saveNotes();
                
                if (currentNoteId === id) {
                    currentNoteId = notes[0].id;
                    renderSelectedNote();
                }
                
                renderNotes();
            }
        }

        // Update a note
        function updateNote(id, title, content) {
            const noteIndex = notes.findIndex(note => note.id === id);
            if (noteIndex !== -1) {
                notes[noteIndex].title = title;
                notes[noteIndex].content = content;
                notes[noteIndex].updatedAt = new Date().toISOString();
                saveNotes();
                renderNotes();
            }
        }

        // Render the list of notes
        function renderNotes() {
            const searchTerm = searchInput.value.toLowerCase();
            notesList.innerHTML = '';
            
            const filteredNotes = notes.filter(note => 
                note.title.toLowerCase().includes(searchTerm) || 
                note.content.toLowerCase().includes(searchTerm)
            );
            
            if (filteredNotes.length === 0) {
                const emptyItem = document.createElement('div');
                emptyItem.className = 'empty-state';
                emptyItem.innerHTML = `
                    <p>No notes found</p>
                `;
                notesList.appendChild(emptyItem);
                return;
            }
            
            filteredNotes.forEach(note => {
                const noteElement = document.createElement('div');
                noteElement.className = `note-item ${currentNoteId === note.id ? 'selected' : ''}`;
                noteElement.dataset.id = note.id;
                
                // Create a plain text version of the content for preview
                const contentForPreview = note.content
                    .replace(/<[^>]*>/g, '') // Remove HTML tags
                    .replace(/&nbsp;/g, ' ')
                    .replace(/&lt;/g, '<')
                    .replace(/&gt;/g, '>')
                    .replace(/&amp;/g, '&');
                    
                // Truncate preview text
                const previewText = contentForPreview.length > 80 
                    ? contentForPreview.substring(0, 80) + '...' 
                    : contentForPreview;
                
                noteElement.innerHTML = `
                    <div class="note-title">${note.title}</div>
                    <div class="note-preview">${previewText}</div>
                `;
                
                noteElement.addEventListener('click', () => {
                    selectNote(note.id);
                });
                
                notesList.appendChild(noteElement);
            });
        }

        // Select a note for editing
        function selectNote(id) {
            currentNoteId = id;
            renderNotes();
            renderSelectedNote();
        }

        // Render the currently selected note in the editor
        function renderSelectedNote() {
            const note = notes.find(n => n.id === currentNoteId);
            
            if (note) {
                noteTitleInput.value = note.title;
                noteContentTextarea.value = note.content;
            } else if (notes.length > 0) {
                // If no note is selected but we have notes, select the first one
                selectNote(notes[0].id);
            } else {
                // No notes at all
                noteTitleInput.value = '';
                noteContentTextarea.value = '';
            }
        }

        // Format text in textarea
        function formatText(format) {
            const textarea = noteContentTextarea;
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            
            let formattedText = '';
            let cursorOffset = 0;
            
            if (selectedText) {
                switch (format) {
                    case 'bold':
                        formattedText = `<b>${selectedText}</b>`;
                        cursorOffset = 3; // Position after the closing </b>
                        break;
                    case 'italic':
                        formattedText = `<i>${selectedText}</i>`;
                        cursorOffset = 3; // Position after the closing </i>
                        break;
                }
                
                textarea.value = textarea.value.substring(0, start) + formattedText + textarea.value.substring(end);
                textarea.setSelectionRange(start + cursorOffset, start + cursorOffset);
            } else {
                // If no text is selected, insert the formatting tags at cursor position
                switch (format) {
                    case 'bold':
                        formattedText = '<b></b>';
                        cursorOffset = start + 3; // Position between the tags
                        break;
                    case 'italic':
                        formattedText = '<i></i>';
                        cursorOffset = start + 3; // Position between the tags
                        break;
                }
                
                textarea.value = textarea.value.substring(0, start) + formattedText + textarea.value.substring(start);
                textarea.setSelectionRange(cursorOffset, cursorOffset);
            }
            
            // Trigger input event to update the note
            textarea.dispatchEvent(new Event('input'));
        }

        // Event Listeners
        newNoteBtn.addEventListener('click', createNote);
        
        deleteBtn.addEventListener('click', () => {
            if (currentNoteId) {
                deleteNote(currentNoteId);
            }
        });
        
        noteTitleInput.addEventListener('input', () => {
            if (currentNoteId) {
                updateNote(currentNoteId, noteTitleInput.value, noteContentTextarea.value);
            }
        });
        
        noteContentTextarea.addEventListener('input', () => {
            if (currentNoteId) {
                updateNote(currentNoteId, noteTitleInput.value, noteContentTextarea.value);
            }
        });
        
        searchInput.addEventListener('input', renderNotes);
        
        formatButtons.forEach(btn => {
            btn.addEventListener('click', (e) => {
                formatText(e.target.dataset.format);
            });
        });
        
        // Initialize
        if (notes.length > 0) {
            selectNote(notes[0].id);
        } else {
            createNote();
        }
    </script>
</body>
</html>