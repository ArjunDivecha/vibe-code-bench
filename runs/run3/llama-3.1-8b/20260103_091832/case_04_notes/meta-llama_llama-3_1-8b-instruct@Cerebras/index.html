<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Note Taking App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .note-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .note-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .note-list li {
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }
        .note-list li:hover {
            background-color: #f0f0f0;
        }
        .note {
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            width: 500px;
        }
        .note h2 {
            margin-top: 0;
        }
        .note textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
        }
        .toolbar {
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }
        .toolbar button {
            margin: 5px;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        .toolbar button:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <div class="note-container">
        <h1>Note Taking App</h1>
        <div class="toolbar">
            <button id="new-note-btn">New Note</button>
            <button id="search-btn">Search</button>
        </div>
        <ul class="note-list" id="note-list">
        </ul>
        <div class="note" id="note-container" style="display: none;">
            <h2 id="note-title"></h2>
            <textarea id="note-content"></textarea>
            <button id="save-btn">Save</button>
            <button id="delete-btn">Delete</button>
        </div>
        <script>
            const noteList = document.getElementById('note-list');
            const noteContainer = document.getElementById('note-container');
            const noteTitle = document.getElementById('note-title');
            const noteContent = document.getElementById('note-content');
            const saveBtn = document.getElementById('save-btn');
            const deleteBtn = document.getElementById('delete-btn');
            const newNoteBtn = document.getElementById('new-note-btn');
            const searchBtn = document.getElementById('search-btn');

            let notes = localStorage.getItem('notes') ? JSON.parse(localStorage.getItem('notes')) : [];

            newNoteBtn.addEventListener('click', () => {
                noteContainer.style.display = 'block';
                noteTitle.value = '';
                noteContent.value = '';
                saveBtn.addEventListener('click', () => {
                    const newNote = {
                        title: noteTitle.value,
                        content: noteContent.value,
                        formatted: false
                    };
                    notes.push(newNote);
                    localStorage.setItem('notes', JSON.stringify(notes));
                    renderNotes();
                    noteContainer.style.display = 'none';
                });
            });

            deleteBtn.addEventListener('click', () => {
                notes = notes.filter(note => note.title !== noteTitle.value);
                localStorage.setItem('notes', JSON.stringify(notes));
                renderNotes();
                noteContainer.style.display = 'none';
            });

            searchBtn.addEventListener('click', () => {
                const searchValue = prompt('Enter search term');
                const filteredNotes = notes.filter(note => note.title.toLowerCase().includes(searchValue.toLowerCase()) || note.content.toLowerCase().includes(searchValue.toLowerCase()));
                renderNotes(filteredNotes);
            });

            function renderNotes(notes = this.notes) {
                noteList.innerHTML = '';
                notes.forEach(note => {
                    const noteElement = document.createElement('li');
                    noteElement.innerHTML = `
                        <h2>${note.title}</h2>
                        <p>${note.content}</p>
                        <button class="view-btn" data-title="${note.title}" data-content="${note.content}">View</button>
                        <button class="edit-btn" data-title="${note.title}" data-content="${note.content}">Edit</button>
                        <button class="delete-btn" data-title="${note.title}">Delete</button>
                    `;
                    noteList.appendChild(noteElement);
                    const viewBtn = noteElement.querySelector('.view-btn');
                    const editBtn = noteElement.querySelector('.edit-btn');
                    const deleteBtn = noteElement.querySelector('.delete-btn');
                    viewBtn.addEventListener('click', () => {
                        noteContainer.style.display = 'block';
                        noteTitle.value = note.title;
                        noteContent.value = note.content;
                    });
                    editBtn.addEventListener('click', () => {
                        noteContainer.style.display = 'block';
                        noteTitle.value = note.title;
                        noteContent.value = note.content;
                        saveBtn.addEventListener('click', () => {
                            note.title = noteTitle.value;
                            note.content = noteContent.value;
                            localStorage.setItem('notes', JSON.stringify(notes));
                            renderNotes();
                            noteContainer.style.display = 'none';
                        });
                    });
                    deleteBtn.addEventListener('click', () => {
                        notes = notes.filter(n => n.title !== note.title);
                        localStorage.setItem('notes', JSON.stringify(notes));
                        renderNotes();
                    });
                });
            }

            renderNotes();

            noteList.addEventListener('click', event => {
                if (event.target.tagName === 'BUTTON' && event.target.classList.contains('view-btn')) {
                    const noteTitle = event.target.dataset.title;
                    const noteContent = event.target.dataset.content;
                    noteContainer.style.display = 'block';
                    noteTitle.value = noteTitle;
                    noteContent.value = noteContent;
                }
            });
        </script>
    </div>
</body>
</html>