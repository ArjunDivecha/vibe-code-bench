<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Dashboard</title>
    <style>
        :root {
            --bg-sunny: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            --bg-cloudy: linear-gradient(135deg, #bdc3c7 0%, #2c3e50 100%);
            --bg-rainy: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            --bg-default: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
            --card-bg: rgba(255, 255, 255, 0.9);
            --text-color: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: var(--bg-default);
            color: var(--text-color);
            transition: background 0.5s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            width: 100%;
            padding: 20px;
            text-align: center;
            background-color: rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            margin-bottom: 20px;
        }

        h1 {
            margin: 0;
            color: #fff;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }

        .container {
            width: 90%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 30px;
            padding-bottom: 40px;
        }

        /* City Grid */
        .city-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .city-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .city-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .city-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .weather-icon {
            font-size: 3rem;
            margin: 10px 0;
        }

        .temp {
            font-size: 2rem;
            font-weight: bold;
            color: #444;
        }

        .condition {
            color: #666;
            margin-bottom: 5px;
            text-transform: capitalize;
        }

        .humidity {
            font-size: 0.9rem;
            color: #888;
        }

        /* Chart Section */
        .chart-section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        canvas {
            width: 100%;
            max-width: 800px;
            height: 300px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(3px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #aaa;
            background: none;
            border: none;
        }

        .close-btn:hover {
            color: #333;
        }

        .modal-details {
            margin-top: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            text-align: left;
        }

        .detail-item {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 8px;
        }

        .detail-label {
            font-size: 0.8rem;
            color: #888;
        }

        .detail-value {
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
        }

        @media (max-width: 600px) {
            .city-grid {
                grid-template-columns: 1fr;
            }
            
            .temp {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>

    <header>
        <h1>Global Weather Dashboard</h1>
    </header>

    <div class="container">
        <!-- City List -->
        <div class="city-grid" id="cityGrid">
            <!-- Cards injected by JS -->
        </div>

        <!-- Chart -->
        <div class="chart-section">
            <h2>Temperature Comparison</h2>
            <canvas id="tempChart"></canvas>
        </div>
    </div>

    <!-- Details Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content" id="modalContent">
            <button class="close-btn" onclick="closeModal()">&times;</button>
            <h2 id="modalCityName">City Name</h2>
            <div class="weather-icon" id="modalIcon">‚òÄÔ∏è</div>
            <div class="condition" id="modalCondition">Sunny</div>
            <div class="temp" id="modalTemp">25¬∞C</div>
            
            <div class="modal-details">
                <div class="detail-item">
                    <div class="detail-label">Humidity</div>
                    <div class="detail-value" id="modalHumidity">50%</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Wind Speed</div>
                    <div class="detail-value" id="modalWind">10 km/h</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Feels Like</div>
                    <div class="detail-value" id="modalFeelsLike">27¬∞C</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Forecast</div>
                    <div class="detail-value" id="modalForecast">Clear</div>
                </div>
            </div>
            <p style="margin-top: 20px; color: #666; font-style: italic;" id="modalDesc">
                Description goes here.
            </p>
        </div>
    </div>

    <script>
        // Mock Data
        const weatherData = [
            { 
                id: 1, 
                name: "New York", 
                temp: 22, 
                condition: "sunny", 
                humidity: 45, 
                wind: 15, 
                feels_like: 24,
                desc: "Clear skies and bright sunshine throughout the day." 
            },
            { 
                id: 2, 
                name: "London", 
                temp: 14, 
                condition: "rainy", 
                humidity: 82, 
                wind: 20, 
                feels_like: 12,
                desc: "Persistent light rain and breezy conditions." 
            },
            { 
                id: 3, 
                name: "Tokyo", 
                temp: 26, 
                condition: "cloudy", 
                humidity: 60, 
                wind: 10, 
                feels_like: 28,
                desc: "Overcast clouds covering most of the sky." 
            },
            { 
                id: 4, 
                name: "Sydney", 
                temp: 28, 
                condition: "sunny", 
                humidity: 50, 
                wind: 18, 
                feels_like: 30,
                desc: "Beautiful sunny weather, perfect for the beach." 
            },
            { 
                id: 5, 
                name: "Paris", 
                temp: 18, 
                condition: "cloudy", 
                humidity: 65, 
                wind: 12, 
                feels_like: 18,
                desc: "Partly cloudy with sunny intervals." 
            }
        ];

        // Icons map
        const icons = {
            sunny: "‚òÄÔ∏è",
            rainy: "üåßÔ∏è",
            cloudy: "‚òÅÔ∏è"
        };

        // Render City Cards
        const cityGrid = document.getElementById('cityGrid');

        function renderCities() {
            cityGrid.innerHTML = '';
            weatherData.forEach(city => {
                const card = document.createElement('div');
                card.className = 'city-card';
                card.onclick = () => openModal(city);

                const icon = icons[city.condition] || "‚ùì";

                card.innerHTML = `
                    <div class="city-name">${city.name}</div>
                    <div class="weather-icon">${icon}</div>
                    <div class="temp">${city.temp}¬∞C</div>
                    <div class="condition">${city.condition}</div>
                    <div class="humidity">üíß ${city.humidity}%</div>
                `;
                cityGrid.appendChild(card);
            });
        }

        // Modal Logic
        const modalOverlay = document.getElementById('modalOverlay');
        const body = document.body;

        function openModal(city) {
            document.getElementById('modalCityName').innerText = city.name;
            document.getElementById('modalIcon').innerText = icons[city.condition] || "‚ùì";
            document.getElementById('modalTemp').innerText = city.temp + "¬∞C";
            document.getElementById('modalCondition').innerText = city.condition;
            document.getElementById('modalHumidity').innerText = city.humidity + "%";
            document.getElementById('modalWind').innerText = city.wind + " km/h";
            document.getElementById('modalFeelsLike').innerText = city.feels_like + "¬∞C";
            document.getElementById('modalForecast').innerText = city.condition.charAt(0).toUpperCase() + city.condition.slice(1);
            document.getElementById('modalDesc').innerText = city.desc;

            // Change background based on condition
            updateBackground(city.condition);

            modalOverlay.classList.add('active');
        }

        function closeModal() {
            modalOverlay.classList.remove('active');
            // Reset background or keep it? Let's keep it to show interaction
            // Or reset to default after a delay?
            // Let's reset to default for a neutral feel
            setTimeout(() => {
                if (!modalOverlay.classList.contains('active')) {
                    updateBackground('default');
                }
            }, 300);
        }

        // Close modal on click outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                closeModal();
            }
        });

        function updateBackground(condition) {
            let bgVar = '--bg-default';
            if (condition === 'sunny') bgVar = '--bg-sunny';
            if (condition === 'rainy') bgVar = '--bg-rainy';
            if (condition === 'cloudy') bgVar = '--bg-cloudy';
            
            // We need to get the computed value of the variable to set it, 
            // or we can just access the variable directly if we defined it in :root
            // But since we want to set the body background to that variable:
            body.style.background = `var(${bgVar})`;
        }

        // Simple Canvas Bar Chart
        function drawChart() {
            const canvas = document.getElementById('tempChart');
            const ctx = canvas.getContext('2d');
            
            // Adjust canvas resolution for sharpness
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);

            const width = rect.width;
            const height = rect.height;
            const padding = 40;
            const chartHeight = height - padding * 2;
            const chartWidth = width - padding * 2;

            // Clear
            ctx.clearRect(0, 0, width, height);

            // Find max temp for scaling
            const maxTemp = Math.max(...weatherData.map(d => d.temp)) + 5;

            const barWidth = chartWidth / weatherData.length;
            const barSpacing = 20;

            weatherData.forEach((city, index) => {
                const x = padding + index * barWidth + barSpacing / 2;
                const barH = (city.temp / maxTemp) * chartHeight;
                const y = height - padding - barH;
                const w = barWidth - barSpacing;

                // Draw Bar
                // Gradient for bar
                const gradient = ctx.createLinearGradient(0, y, 0, height - padding);
                gradient.addColorStop(0, '#ff7e5f');
                gradient.addColorStop(1, '#feb47b');
                
                ctx.fillStyle = gradient;
                
                // Rounded top bars logic (simplified)
                ctx.fillRect(x, y, w, barH);
                
                // Draw Temp Text
                ctx.fillStyle = '#333';
                ctx.font = 'bold 14px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText(city.temp + "¬∞", x + w / 2, y - 10);

                // Draw City Name
                ctx.fillStyle = '#555';
                ctx.font = '12px sans-serif';
                ctx.fillText(city.name, x + w / 2, height - padding + 20);
            });

            // Draw Axis Line
            ctx.beginPath();
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.strokeStyle = '#ccc';
            ctx.stroke();
        }

        // Initialize
        renderCities();
        
        // Wait for layout to settle before drawing chart
        window.onload = drawChart;
        window.onresize = drawChart;

    </script>
</body>
</html>