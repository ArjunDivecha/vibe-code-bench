<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Timer</title>
    <style>
        :root {
            --tomato: #FF6347;
            --tomato-dark: #D94F35;
            --break-color: #4CAF50;
            --break-dark: #388E3C;
            --bg-color: #FFF5F5;
            --text-color: #333;
            --white: #ffffff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            transition: background-color 0.5s ease;
        }

        .container {
            background: var(--white);
            padding: 3rem;
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
            border: 3px solid var(--tomato);
            transition: border-color 0.5s ease;
        }

        /* Header Styles */
        h1 {
            color: var(--tomato);
            margin: 0;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            transition: color 0.5s ease;
        }

        .session-badge {
            background-color: #eee;
            color: #555;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 2rem;
            transition: all 0.5s ease;
        }

        /* Timer Display */
        .timer-display {
            font-size: 6rem;
            font-weight: 700;
            color: var(--tomato);
            font-variant-numeric: tabular-nums;
            line-height: 1;
            margin-bottom: 2rem;
            user-select: none;
            transition: color 0.5s ease;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        button {
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: transform 0.1s ease, background-color 0.3s ease, filter 0.3s ease;
            outline: none;
        }

        button:active {
            transform: scale(0.95);
        }

        .btn-primary {
            background-color: var(--tomato);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 99, 71, 0.3);
        }

        .btn-primary:hover {
            background-color: var(--tomato-dark);
        }

        .btn-reset {
            background-color: #f0f0f0;
            color: #666;
        }

        .btn-reset:hover {
            background-color: #e0e0e0;
        }

        /* Break Mode Styles */
        body.break-mode {
            --bg-color: #E8F5E9;
        }

        body.break-mode .container {
            border-color: var(--break-color);
        }

        body.break-mode h1,
        body.break-mode .timer-display {
            color: var(--break-color);
        }

        body.break-mode .btn-primary {
            background-color: var(--break-color);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        body.break-mode .btn-primary:hover {
            background-color: var(--break-dark);
        }

        body.break-mode .session-badge {
            background-color: #C8E6C9;
            color: #2E7D32;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Pomodoro</h1>
        <div class="session-badge" id="session-label">Work Session 1</div>
        
        <div class="timer-display" id="timer">25:00</div>
        
        <div class="controls">
            <button class="btn-primary" id="start-pause-btn" onclick="toggleTimer()">Start</button>
            <button class="btn-reset" onclick="resetTimer()">Reset</button>
        </div>
    </div>

    <script>
        // Configuration
        const WORK_TIME = 25 * 60; // 25 minutes in seconds
        const BREAK_TIME = 5 * 60; // 5 minutes in seconds

        // State
        let timeLeft = WORK_TIME;
        let isRunning = false;
        let isWorkSession = true;
        let sessionCount = 1;
        let timerInterval = null;
        let audioContext = null;

        // DOM Elements
        const timerDisplay = document.getElementById('timer');
        const startPauseBtn = document.getElementById('start-pause-btn');
        const sessionLabel = document.getElementById('session-label');
        const body = document.body;

        // Initialize Audio Context (lazy load on interaction)
        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
        }

        // Play Beep Sound
        function playAlert() {
            initAudio();
            
            // Create oscillator
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            // Beep settings
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(880, audioContext.currentTime); // A5
            oscillator.frequency.exponentialRampToValueAtTime(440, audioContext.currentTime + 0.5); // Drop pitch
            
            // Volume envelope
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        // Format seconds to MM:SS
        function formatTime(seconds) {
            const m = Math.floor(seconds / 60);
            const s = seconds % 60;
            return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }

        // Update UI
        function updateDisplay() {
            timerDisplay.textContent = formatTime(timeLeft);
            document.title = `${formatTime(timeLeft)} - Pomodoro`;
            
            const mode = isWorkSession ? 'Work' : 'Break';
            sessionLabel.textContent = `${mode} Session ${sessionCount}`;
            
            if (isWorkSession) {
                body.classList.remove('break-mode');
            } else {
                body.classList.add('break-mode');
            }
        }

        // Switch between Work and Break
        function switchMode() {
            playAlert();
            
            if (isWorkSession) {
                // Switch to Break
                isWorkSession = false;
                timeLeft = BREAK_TIME;
            } else {
                // Switch to Work
                isWorkSession = true;
                sessionCount++;
                timeLeft = WORK_TIME;
            }
            updateDisplay();
        }

        // Core Timer Logic
        function tick() {
            if (timeLeft > 0) {
                timeLeft--;
                updateDisplay();
            } else {
                switchMode();
            }
        }

        // Toggle Start/Pause
        function toggleTimer() {
            initAudio(); // Ensure audio context is ready
            
            if (isRunning) {
                // Pause
                clearInterval(timerInterval);
                isRunning = false;
                startPauseBtn.textContent = "Start";
            } else {
                // Start
                timerInterval = setInterval(tick, 1000);
                isRunning = true;
                startPauseBtn.textContent = "Pause";
            }
        }

        // Reset Timer
        function resetTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            startPauseBtn.textContent = "Start";
            
            // Reset to beginning of current mode
            timeLeft = isWorkSession ? WORK_TIME : BREAK_TIME;
            updateDisplay();
        }

        // Initial Render
        updateDisplay();

    </script>
</body>
</html>