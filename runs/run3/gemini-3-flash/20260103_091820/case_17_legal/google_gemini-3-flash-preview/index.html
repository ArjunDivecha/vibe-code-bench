<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibe-Law | Legal Workspace</title>
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-accent: #334155;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --accent-color: #38bdf8;
            --border-color: #334155;
            --highlight-bg: rgba(56, 189, 248, 0.2);
            --highlight-text: #7dd3fc;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header */
        header {
            padding: 1rem 2rem;
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-weight: 800;
            font-size: 1.2rem;
            letter-spacing: -0.025em;
            color: var(--accent-color);
        }

        .search-container {
            flex-grow: 1;
            max-width: 600px;
            margin: 0 2rem;
            position: relative;
        }

        input[type="text"] {
            width: 100%;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            padding: 0.6rem 1rem;
            border-radius: 6px;
            color: white;
            outline: none;
        }

        input[type="text"]:focus {
            border-color: var(--accent-color);
        }

        /* Main Workspace */
        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Results List */
        #results-pane {
            width: 350px;
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            background: var(--bg-secondary);
        }

        .case-card {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background 0.2s;
        }

        .case-card:hover {
            background: var(--bg-accent);
        }

        .case-card.active {
            background: var(--bg-accent);
            border-left: 4px solid var(--accent-color);
        }

        .case-title {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .case-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .case-snippet {
            font-size: 0.8rem;
            color: var(--text-muted);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Detail View */
        #detail-pane {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-primary);
            overflow: hidden;
        }

        .detail-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .tab-bar {
            display: flex;
            gap: 1rem;
            padding: 0 1.5rem;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .tab {
            padding: 0.75rem 1rem;
            font-size: 0.85rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            color: var(--text-muted);
        }

        .tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
        }

        .content-area {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            line-height: 1.6;
            position: relative;
        }

        .toolbar {
            padding: 0.5rem 1.5rem;
            background: var(--bg-accent);
            display: flex;
            gap: 10px;
        }

        button {
            background: var(--accent-color);
            color: var(--bg-primary);
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.8rem;
            cursor: pointer;
        }

        button:hover {
            opacity: 0.9;
        }

        /* Sidebar Notes */
        #notes-pane {
            width: 300px;
            border-left: 1px solid var(--border-color);
            background: var(--bg-secondary);
            display: flex;
            flex-direction: column;
        }

        .notes-header {
            padding: 1rem;
            font-weight: bold;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        #notes-list {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .note-item {
            background: var(--bg-primary);
            padding: 0.75rem;
            border-radius: 4px;
            margin-bottom: 1rem;
            font-size: 0.8rem;
            border: 1px solid var(--border-color);
            position: relative;
        }

        .delete-note {
            position: absolute;
            top: 5px;
            right: 5px;
            color: #ef4444;
            cursor: pointer;
            font-size: 12px;
        }

        /* Entity Highlighting */
        .entity-name { background: #1e3a8a; color: #93c5fd; padding: 0 2px; border-radius: 2px; }
        .entity-date { background: #064e3b; color: #6ee7b7; padding: 0 2px; border-radius: 2px; }

        .placeholder-text {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-muted);
            text-align: center;
            padding: 2rem;
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-primary); }
        ::-webkit-scrollbar-thumb { background: var(--bg-accent); border-radius: 4px; }
    </style>
</head>
<body>

<header>
    <div class="logo">VIBE-LAW <span style="font-weight:300; font-size: 0.8rem; color: var(--text-muted)">WORKSPACE</span></div>
    <div class="search-container">
        <input type="text" id="case-search" placeholder="Search precedents, statutes, or case titles...">
    </div>
    <div style="font-size: 0.8rem; color: var(--text-muted)">Attorney Access: J. Doe</div>
</header>

<main>
    <section id="results-pane">
        <!-- Results injected here -->
    </section>

    <section id="detail-pane">
        <div id="no-selection" class="placeholder-text">
            <div>
                <h3>No Case Selected</h3>
                <p>Select a case from the left panel to begin analysis.</p>
            </div>
        </div>

        <div id="case-content" style="display: none; height: 100%; flex-direction: column;">
            <div class="detail-header">
                <h2 id="view-title"></h2>
                <div id="view-meta" class="case-meta"></div>
            </div>
            
            <div class="toolbar">
                <button onclick="extractEntities()">Extract Entities</button>
                <button onclick="saveSelectedSnippet()" style="background: #10b981;">Save Selection to Notes</button>
            </div>

            <div class="tab-bar">
                <div class="tab active" onclick="switchTab('summary')">Summary</div>
                <div class="tab" onclick="switchTab('full')">Full Text</div>
            </div>

            <div id="view-body" class="content-area">
                <!-- Content injected here -->
            </div>
        </div>
    </section>

    <section id="notes-pane">
        <div class="notes-header">Snippet Clipboard</div>
        <div id="notes-list">
            <!-- Notes injected here -->
        </div>
    </section>
</main>

<script>
    const mockCases = [
        {
            id: 1,
            title: "Anderson v. TechCorp Solutions",
            court: "U.S. District Court, N.D. Cal.",
            date: "2023-10-12",
            summary: "A landmark case regarding the misclassification of software engineers as independent contractors. The court ruled that the degree of control exercised by TechCorp established an employer-employee relationship.",
            fullText: "The plaintiff, Sarah Anderson, filed this action on January 15, 2022, alleging violations of the Fair Labor Standards Act. TechCorp Solutions, established in 2015, argued that its platform merely connects freelancers. However, Chief Judge Martinez observed that the proprietary algorithm dictated working hours. On October 12, 2023, the court found for the plaintiff...",
            entities: { names: ["Sarah Anderson", "Martinez"], dates: ["January 15, 2022", "2015", "October 12, 2023"] }
        },
        {
            id: 2,
            title: "State of New York v. Global Mining Inc.",
            court: "NY Supreme Court",
            date: "2023-08-05",
            summary: "Environmental litigation concerning groundwater contamination in upstate New York. Focuses on the 'Strict Liability' doctrine for ultra-hazardous activities.",
            fullText: "Global Mining Inc. began operations in the Hudson Valley in 1998. Attorney General James filed suit after local residents reported high levels of lead. The 2023 ruling by Justice Elena Rossi established that the chemical storage methods used by Global Mining Inc. were inherently dangerous...",
            entities: { names: ["James", "Elena Rossi"], dates: ["1998", "2023"] }
        },
        {
            id: 3,
            title: "CryptoTrust v. SEC",
            court: "D.C. Circuit Court of Appeals",
            date: "2024-01-20",
            summary: "Appeal regarding the classification of digital tokens as securities under the Howey Test. Significant implications for the DeFi industry.",
            fullText: "In this appeal, CryptoTrust challenges the SEC's 2022 enforcement action. The central question is whether the CT-Token constitutes an investment contract. Judge Henderson noted that the expectation of profit was derived solely from the efforts of others. Decided January 20, 2024...",
            entities: { names: ["Henderson"], dates: ["2022", "January 20, 2024"] }
        },
        {
            id: 4,
            title: "Riverside Property vs. City of Portland",
            court: "Oregon State Court",
            date: "2023-11-30",
            summary: "Eminent domain dispute involving the expansion of the light rail system and just compensation for commercial properties.",
            fullText: "The City of Portland sought to acquire 2.5 acres from Riverside Property. Commissioner Smith argued the public benefit outweighed private interest. The court evaluated the 2021 appraisal which valued the land at $4.2 million...",
            entities: { names: ["Smith"], dates: ["2021", "2023-11-30"] }
        },
        {
            id: 5,
            title: "In re: BioHealth Patent Litigation",
            court: "U.S. Patent & Trademark Office",
            date: "2023-05-14",
            summary: "Validity challenge for a CRISPR-based gene editing patent. Focuses on 'Prior Art' and non-obviousness.",
            fullText: "BioHealth holds Patent No. 8,452,110. Competitors argue that the work of Dr. Aris Thorne in 2012 rendered the 2014 filing obvious. The board reviewed evidence from May 14, 2023...",
            entities: { names: ["Aris Thorne"], dates: ["2012", "2014", "May 14, 2023"] }
        }
    ];

    // Add more mock data to reach 10-15
    for(let i=6; i<=12; i++) {
        mockCases.push({
            id: i,
            title: `Case Ref ${1000 + i} v. Standard Corp`,
            court: "Appellate Division",
            date: "2023-06-" + (10 + i),
            summary: "Summary of procedural history and final judgment for standard commercial litigation.",
            fullText: `Standard text for case ${i}. The parties appeared before the court in June 2023. No further evidence was found regarding the breach of contract claim.`,
            entities: { names: ["Standard Corp"], dates: ["June 2023"] }
        });
    }

    let currentCase = null;
    let currentTab = 'summary';

    // UI Initialization
    function init() {
        renderResults(mockCases);
        loadNotes();

        document.getElementById('case-search').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const filtered = mockCases.filter(c => 
                c.title.toLowerCase().includes(term) || 
                c.summary.toLowerCase().includes(term)
            );
            renderResults(filtered);
        });
    }

    function renderResults(cases) {
        const pane = document.getElementById('results-pane');
        pane.innerHTML = cases.map(c => `
            <div class="case-card ${currentCase?.id === c.id ? 'active' : ''}" onclick="selectCase(${c.id})">
                <div class="case-title">${c.title}</div>
                <div class="case-meta">${c.court} • ${c.date}</div>
                <div class="case-snippet">${c.summary}</div>
            </div>
        `).join('');
    }

    function selectCase(id) {
        currentCase = mockCases.find(c => c.id === id);
        document.getElementById('no-selection').style.display = 'none';
        document.getElementById('case-content').style.display = 'flex';
        
        document.getElementById('view-title').innerText = currentCase.title;
        document.getElementById('view-meta').innerText = `${currentCase.court} | Filed: ${currentCase.date}`;
        
        // Update active card styling
        document.querySelectorAll('.case-card').forEach(el => el.classList.remove('active'));
        renderResults(mockCases); // Refresh list to show active

        switchTab('summary');
    }

    function switchTab(tab) {
        currentTab = tab;
        document.querySelectorAll('.tab').forEach(el => {
            el.classList.toggle('active', el.innerText.toLowerCase() === tab);
        });
        
        const body = document.getElementById('view-body');
        body.innerHTML = currentTab === 'summary' ? currentCase.summary : currentCase.fullText;
    }

    function extractEntities() {
        if (!currentCase) return;
        let text = currentTab === 'summary' ? currentCase.summary : currentCase.fullText;
        
        currentCase.entities.names.forEach(name => {
            const regex = new RegExp(`(${name})`, 'gi');
            text = text.replace(regex, `<span class="entity-name">$1</span>`);
        });

        currentCase.entities.dates.forEach(date => {
            const regex = new RegExp(`(${date})`, 'gi');
            text = text.replace(regex, `<span class="entity-date">$1</span>`);
        });

        document.getElementById('view-body').innerHTML = text;
    }

    // Notes Logic
    function saveSelectedSnippet() {
        const selection = window.getSelection().toString().trim();
        if (!selection) {
            alert("Please select some text in the case view first.");
            return;
        }

        const notes = JSON.parse(localStorage.getItem('vibelaw_notes') || '[]');
        const newNote = {
            id: Date.now(),
            caseTitle: currentCase.title,
            text: selection
        };
        
        notes.unshift(newNote);
        localStorage.setItem('vibelaw_notes', JSON.stringify(notes));
        renderNotes();
    }

    function loadNotes() {
        renderNotes();
    }

    function renderNotes() {
        const notes = JSON.parse(localStorage.getItem('vibelaw_notes') || '[]');
        const list = document.getElementById('notes-list');
        list.innerHTML = notes.map(n => `
            <div class="note-item">
                <div class="delete-note" onclick="deleteNote(${n.id})">✕</div>
                <div style="font-weight:bold; font-size: 0.7rem; margin-bottom: 5px; color: var(--accent-color)">
                    ${n.caseTitle}
                </div>
                "${n.text}"
            </div>
        `).join('') || '<div style="color:var(--text-muted); font-size:0.8rem; text-align:center">No saved snippets.</div>';
    }

    function deleteNote(id) {
        let notes = JSON.parse(localStorage.getItem('vibelaw_notes') || '[]');
        notes = notes.filter(n => n.id !== id);
        localStorage.setItem('vibelaw_notes', JSON.stringify(notes));
        renderNotes();
    }

    init();
</script>
</body>
</html>