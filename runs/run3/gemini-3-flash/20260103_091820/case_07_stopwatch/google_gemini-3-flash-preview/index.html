<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Stopwatch & Timer</title>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --accent-color: #00ff88;
            --text-color: #ffffff;
            --secondary-text: #b0b0b0;
            --danger-color: #ff4444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .mode-toggle {
            display: flex;
            background: #333;
            border-radius: 10px;
            margin-bottom: 2rem;
            padding: 5px;
        }

        .mode-btn {
            flex: 1;
            padding: 10px;
            border: none;
            background: transparent;
            color: var(--secondary-text);
            cursor: pointer;
            border-radius: 7px;
            font-weight: bold;
            transition: 0.3s;
        }

        .mode-btn.active {
            background: var(--accent-color);
            color: #000;
        }

        .display {
            font-family: 'Courier New', Courier, monospace;
            font-size: 3.5rem;
            font-weight: bold;
            color: var(--accent-color);
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
            margin-bottom: 2rem;
            letter-spacing: 2px;
        }

        .inputs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 2rem;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-size: 0.7rem;
            color: var(--secondary-text);
            margin-bottom: 5px;
        }

        input[type="number"] {
            width: 60px;
            background: #333;
            border: 1px solid #444;
            color: white;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-size: 1.2rem;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        button {
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: opacity 0.2s;
        }

        button:active {
            opacity: 0.7;
        }

        .btn-start { background-color: var(--accent-color); color: #000; }
        .btn-stop { background-color: var(--danger-color); color: #fff; }
        .btn-lap { background-color: #444; color: #fff; }
        .btn-reset { background-color: #666; color: #fff; }

        .laps-container {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            border-top: 1px solid #333;
            padding-top: 10px;
        }

        .lap-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #222;
            font-family: monospace;
            color: var(--secondary-text);
        }

        .hidden { display: none !important; }

        /* Scrollbar styling */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #444; border-radius: 10px; }
    </style>
</head>
<body>

<div class="container">
    <div class="mode-toggle">
        <button id="stopwatchModeBtn" class="mode-btn active" onclick="switchMode('stopwatch')">STOPWATCH</button>
        <button id="timerModeBtn" class="mode-btn" onclick="switchMode('timer')">TIMER</button>
    </div>

    <div id="display" class="display">00:00:00.00</div>

    <!-- Timer Inputs -->
    <div id="timerInputs" class="inputs hidden">
        <div class="input-group">
            <label>HH</label>
            <input type="number" id="timerH" min="0" max="99" value="0">
        </div>
        <div class="input-group">
            <label>MM</label>
            <input type="number" id="timerM" min="0" max="59" value="0">
        </div>
        <div class="input-group">
            <label>SS</label>
            <input type="number" id="timerS" min="0" max="59" value="0">
        </div>
    </div>

    <div class="controls">
        <button id="startBtn" class="btn-start" onclick="start()">START</button>
        <button id="stopBtn" class="btn-stop hidden" onclick="stop()">STOP</button>
        <button id="lapBtn" class="btn-lap" onclick="lap()">LAP</button>
        <button id="resetBtn" class="btn-reset" onclick="reset()">RESET</button>
    </div>

    <div id="laps" class="laps-container"></div>
</div>

<script>
    let mode = 'stopwatch'; // 'stopwatch' or 'timer'
    let startTime;
    let elapsedTime = 0;
    let timerInterval;
    let running = false;
    let laps = [];

    const displayEl = document.getElementById('display');
    const timerInputs = document.getElementById('timerInputs');
    const lapBtn = document.getElementById('lapBtn');
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    const lapsList = document.getElementById('laps');

    function switchMode(newMode) {
        if (running) stop();
        mode = newMode;
        reset();

        document.getElementById('stopwatchModeBtn').classList.toggle('active', mode === 'stopwatch');
        document.getElementById('timerModeBtn').classList.toggle('active', mode === 'timer');
        
        if (mode === 'timer') {
            timerInputs.classList.remove('hidden');
            lapBtn.classList.add('hidden');
            displayEl.innerText = "00:00:00";
        } else {
            timerInputs.classList.add('hidden');
            lapBtn.classList.remove('hidden');
            displayEl.innerText = "00:00:00.00";
        }
    }

    function formatTime(ms, includeMs = true) {
        let h = Math.floor(ms / 3600000);
        let m = Math.floor((ms % 3600000) / 60000);
        let s = Math.floor((ms % 60000) / 1000);
        let mil = Math.floor((ms % 1000) / 10);

        let res = [h, m, s].map(v => v.toString().padStart(2, '0')).join(':');
        if (includeMs) res += '.' + mil.toString().padStart(2, '0');
        return res;
    }

    function updateDisplay() {
        if (mode === 'stopwatch') {
            const now = Date.now();
            const diff = now - startTime + elapsedTime;
            displayEl.innerText = formatTime(diff);
        } else {
            const now = Date.now();
            const diff = startTime - now;
            if (diff <= 0) {
                stop();
                displayEl.innerText = "00:00:00";
                alert("Timer Finished!");
                return;
            }
            displayEl.innerText = formatTime(diff, false);
        }
    }

    function start() {
        if (running) return;

        if (mode === 'stopwatch') {
            startTime = Date.now();
        } else {
            // If starting fresh, get values from inputs
            if (elapsedTime === 0) {
                const h = parseInt(document.getElementById('timerH').value) || 0;
                const m = parseInt(document.getElementById('timerM').value) || 0;
                const s = parseInt(document.getElementById('timerS').value) || 0;
                elapsedTime = (h * 3600 + m * 60 + s) * 1000;
                
                if (elapsedTime <= 0) return;
            }
            startTime = Date.now() + elapsedTime;
        }

        timerInterval = setInterval(updateDisplay, mode === 'stopwatch' ? 10 : 100);
        running = true;
        
        startBtn.classList.add('hidden');
        stopBtn.classList.remove('hidden');
    }

    function stop() {
        if (!running) return;
        
        clearInterval(timerInterval);
        if (mode === 'stopwatch') {
            elapsedTime += Date.now() - startTime;
        } else {
            elapsedTime = startTime - Date.now();
        }
        
        running = false;
        startBtn.classList.remove('hidden');
        stopBtn.classList.add('hidden');
    }

    function reset() {
        stop();
        elapsedTime = 0;
        laps = [];
        lapsList.innerHTML = '';
        if (mode === 'stopwatch') {
            displayEl.innerText = "00:00:00.00";
        } else {
            displayEl.innerText = "00:00:00";
        }
    }

    function lap() {
        if (!running || mode !== 'stopwatch') return;
        const now = Date.now();
        const currentLapTime = now - startTime + elapsedTime;
        laps.push(currentLapTime);
        
        const lapDiv = document.createElement('div');
        lapDiv.className = 'lap-item';
        lapDiv.innerHTML = `<span>Lap ${laps.length}</span> <span>${formatTime(currentLapTime)}</span>`;
        lapsList.prepend(lapDiv);
    }
</script>

</body>
</html>