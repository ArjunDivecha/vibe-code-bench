<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChromaFlow - Color Palette Generator</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --text-color: #212529;
            --card-shadow: 0 4px 12px rgba(0,0,0,0.1);
            --transition-speed: 0.3s;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        header {
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            z-index: 10;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        button {
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all var(--transition-speed);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: #212529;
            color: white;
        }

        .btn-primary:hover {
            background: #444;
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #eee;
        }

        .btn-outline:hover {
            background: #eee;
        }

        main {
            flex: 1;
            display: flex;
            width: 100%;
            height: 100%;
        }

        .color-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            position: relative;
            transition: background var(--transition-speed) ease;
            cursor: pointer;
        }

        .color-info {
            background: rgba(255, 255, 255, 0.9);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            backdrop-filter: blur(5px);
            box-shadow: var(--card-shadow);
            transition: transform 0.2s;
            max-width: 90%;
        }

        .color-info:hover {
            transform: scale(1.05);
        }

        .hex-code {
            font-size: 1.4rem;
            font-weight: 800;
            text-transform: uppercase;
            margin-bottom: 0.2rem;
            display: block;
        }

        .rgb-code {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-bottom: 1rem;
            display: block;
        }

        .color-name {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: block;
            color: #555;
        }

        .actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .icon-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
            border-radius: 50%;
            transition: background 0.2s;
        }

        .icon-btn:hover {
            background: rgba(0,0,0,0.05);
        }

        .locked .lock-icon::before { content: "üîí"; }
        .unlocked .lock-icon::before { content: "üîì"; }

        /* Toast Notification */
        #toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #333;
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 30px;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 100;
        }

        #toast.show {
            transform: translateX(-50%) translateY(0);
        }

        /* Sidebar for Favorites */
        #favorites-panel {
            position: fixed;
            right: -350px;
            top: 0;
            width: 320px;
            height: 100%;
            background: white;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            z-index: 20;
            transition: right 0.3s ease;
            padding: 2rem;
            overflow-y: auto;
        }

        #favorites-panel.open {
            right: 0;
        }

        .fav-item {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }

        .fav-palette {
            display: flex;
            height: 40px;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 0.5rem;
            cursor: pointer;
        }

        .fav-color {
            flex: 1;
        }

        .close-fav {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .instruction {
            position: fixed;
            bottom: 1.5rem;
            left: 1.5rem;
            background: rgba(255,255,255,0.8);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            pointer-events: none;
        }

        @media (max-width: 768px) {
            main { flex-direction: column; }
            .color-column { width: 100%; }
            .instruction { display: none; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">ChromaFlow</div>
        <div class="controls">
            <button class="btn-outline" onclick="toggleFavorites()">‚ù§Ô∏è Saved</button>
            <button class="btn-outline" onclick="saveCurrentPalette()">Save Palette</button>
            <button class="btn-primary" onclick="generatePalette()">Generate (Space)</button>
        </div>
    </header>

    <main id="palette-container">
        <!-- 5 Color Columns will be injected here -->
    </main>

    <div id="favorites-panel">
        <span class="close-fav" onclick="toggleFavorites()">&times;</span>
        <h2 style="margin-bottom: 1.5rem;">Your Palettes</h2>
        <div id="favorites-list"></div>
    </div>

    <div id="toast">Copied to clipboard!</div>

    <div class="instruction">Press <strong>Spacebar</strong> to generate new colors</div>

    <script>
        const container = document.getElementById('palette-container');
        const favoritesList = document.getElementById('favorites-list');
        const favoritesPanel = document.getElementById('favorites-panel');
        const toast = document.getElementById('toast');
        
        let colors = [];
        let favorites = JSON.parse(localStorage.getItem('chromaflow_palettes')) || [];

        // Basic color names mapping for demo (simulating a library)
        const colorNames = {
            '#FF6B6B': 'Pastel Red',
            '#4ECDC4': 'Turquoise',
            '#45B7D1': 'Sky Blue',
            '#FFA07A': 'Light Salmon',
            '#98D8C8': 'Seafoam',
            '#F7FFF7': 'White Smoke',
            '#1A535C': 'Deep Teal',
            '#FFD93D': 'Sun Yellow',
            '#6C5CE7': 'Soft Purple',
            '#A8E6CF': 'Mint'
        };

        function generateRandomHex() {
            const chars = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += chars[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        function hexToRgb(hex) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgb(${r}, ${g}, ${b})`;
        }

        // Get luminance to decide if text should be black or white
        function getLuminance(hex) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return (0.299 * r + 0.587 * g + 0.114 * b) / 255;
        }

        function initPalette() {
            container.innerHTML = '';
            colors = [];
            for (let i = 0; i < 5; i++) {
                const hex = generateRandomHex();
                colors.push({
                    hex: hex,
                    locked: false
                });
                createColorColumn(i, hex);
            }
        }

        function createColorColumn(index, hex) {
            const col = document.createElement('div');
            col.className = 'color-column';
            col.id = `col-${index}`;
            col.style.backgroundColor = hex;
            col.onclick = (e) => {
                if(e.target.closest('.icon-btn')) return;
                copyToClipboard(hex);
            };

            const luminance = getLuminance(hex);
            const textColor = luminance > 0.5 ? '#000' : '#fff';

            col.innerHTML = `
                <div class="color-info" style="color: #333">
                    <span class="hex-code">${hex}</span>
                    <span class="rgb-code">${hexToRgb(hex)}</span>
                    <span class="color-name">${colorNames[hex] || 'Custom Shade'}</span>
                    <div class="actions">
                        <button class="icon-btn lock-toggle ${colors[index].locked ? 'locked' : 'unlocked'}" 
                                onclick="toggleLock(${index})">
                            <span class="lock-icon"></span>
                        </button>
                    </div>
                </div>
            `;
            container.appendChild(col);
        }

        function generatePalette() {
            colors.forEach((colorObj, index) => {
                if (!colorObj.locked) {
                    const newHex = generateRandomHex();
                    colorObj.hex = newHex;
                    
                    const col = document.getElementById(`col-${index}`);
                    col.style.backgroundColor = newHex;
                    
                    const hexDisplay = col.querySelector('.hex-code');
                    const rgbDisplay = col.querySelector('.rgb-code');
                    hexDisplay.innerText = newHex;
                    rgbDisplay.innerText = hexToRgb(newHex);
                }
            });
        }

        function toggleLock(index) {
            colors[index].locked = !colors[index].locked;
            const btn = document.querySelector(`#col-${index} .lock-toggle`);
            btn.classList.toggle('locked');
            btn.classList.toggle('unlocked');
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast(`Copied ${text}!`);
            });
        }

        function showToast(message) {
            toast.innerText = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        function saveCurrentPalette() {
            const palette = colors.map(c => c.hex);
            favorites.push(palette);
            localStorage.setItem('chromaflow_palettes', JSON.stringify(favorites));
            renderFavorites();
            showToast('Palette saved!');
        }

        function renderFavorites() {
            favoritesList.innerHTML = favorites.length === 0 ? '<p>No saved palettes yet.</p>' : '';
            favorites.forEach((palette, pIdx) => {
                const div = document.createElement('div');
                div.className = 'fav-item';
                
                let paletteHtml = `<div class="fav-palette" onclick="loadPalette(${pIdx})">`;
                palette.forEach(hex => {
                    paletteHtml += `<div class="fav-color" style="background:${hex}"></div>`;
                });
                paletteHtml += `</div>`;
                
                div.innerHTML = `
                    ${paletteHtml}
                    <button class="btn-outline" style="font-size: 0.7rem; padding: 4px 8px;" onclick="deleteFavorite(${pIdx})">Delete</button>
                `;
                favoritesList.appendChild(div);
            });
        }

        function loadPalette(index) {
            const palette = favorites[index];
            palette.forEach((hex, i) => {
                colors[i].hex = hex;
                const col = document.getElementById(`col-${i}`);
                col.style.backgroundColor = hex;
                col.querySelector('.hex-code').innerText = hex;
                col.querySelector('.rgb-code').innerText = hexToRgb(hex);
            });
            toggleFavorites();
        }

        function deleteFavorite(index) {
            favorites.splice(index, 1);
            localStorage.setItem('chromaflow_palettes', JSON.stringify(favorites));
            renderFavorites();
        }

        function toggleFavorites() {
            favoritesPanel.classList.toggle('open');
        }

        // Event Listeners
        window.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                generatePalette();
            }
        });

        // Initialize
        initPalette();
        renderFavorites();

    </script>
</body>
</html>