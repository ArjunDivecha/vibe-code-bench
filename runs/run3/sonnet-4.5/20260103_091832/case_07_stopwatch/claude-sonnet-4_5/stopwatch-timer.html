<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stopwatch & Timer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background: #1a1a2e;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            max-width: 500px;
            width: 100%;
        }

        .mode-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: #16213e;
            border-radius: 10px;
            padding: 5px;
        }

        .mode-btn {
            flex: 1;
            padding: 12px;
            border: none;
            background: transparent;
            color: #8b92a8;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .mode-btn.active {
            background: #0f3460;
            color: #00d4ff;
        }

        .display {
            background: #0a0a0a;
            border: 3px solid #2a2a3e;
            border-radius: 15px;
            padding: 30px 20px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .time-display {
            font-size: 56px;
            color: #00ff88;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
            letter-spacing: 4px;
            font-weight: bold;
        }

        .timer-inputs {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .timer-input-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .timer-input-group label {
            color: #8b92a8;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .timer-input-group input {
            width: 70px;
            padding: 10px;
            font-size: 24px;
            text-align: center;
            background: #16213e;
            border: 2px solid #2a2a3e;
            border-radius: 8px;
            color: #00d4ff;
            font-weight: bold;
        }

        .timer-input-group input:focus {
            outline: none;
            border-color: #00d4ff;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-start {
            background: #00ff88;
            color: #1a1a2e;
        }

        .btn-start:hover {
            background: #00cc6f;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.3);
        }

        .btn-stop {
            background: #ff4757;
            color: white;
        }

        .btn-stop:hover {
            background: #ee5a6f;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 71, 87, 0.3);
        }

        .btn-lap {
            background: #00d4ff;
            color: #1a1a2e;
        }

        .btn-lap:hover {
            background: #00b8e6;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.3);
        }

        .btn-reset {
            background: #ffa502;
            color: #1a1a2e;
        }

        .btn-reset:hover {
            background: #ff8c00;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 165, 2, 0.3);
        }

        .laps {
            margin-top: 30px;
            max-height: 250px;
            overflow-y: auto;
        }

        .laps h3 {
            color: #00d4ff;
            margin-bottom: 15px;
            text-align: center;
        }

        .lap-item {
            background: #16213e;
            padding: 12px 20px;
            margin-bottom: 8px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            color: #8b92a8;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .lap-number {
            color: #00d4ff;
            font-weight: bold;
        }

        .lap-time {
            color: #00ff88;
            font-weight: bold;
        }

        .hidden {
            display: none;
        }

        .laps::-webkit-scrollbar {
            width: 8px;
        }

        .laps::-webkit-scrollbar-track {
            background: #16213e;
            border-radius: 4px;
        }

        .laps::-webkit-scrollbar-thumb {
            background: #0f3460;
            border-radius: 4px;
        }

        .laps::-webkit-scrollbar-thumb:hover {
            background: #1a5490;
        }

        .alert-message {
            background: #ff4757;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            font-weight: bold;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="mode-toggle">
            <button class="mode-btn active" id="stopwatchBtn">⏱️ Stopwatch</button>
            <button class="mode-btn" id="timerBtn">⏲️ Timer</button>
        </div>

        <!-- Stopwatch Mode -->
        <div id="stopwatchMode">
            <div class="display">
                <div class="time-display" id="stopwatchDisplay">00:00:00.00</div>
            </div>
            <div class="controls">
                <button class="btn-start" id="startStopwatch">Start</button>
                <button class="btn-stop hidden" id="stopStopwatch">Stop</button>
                <button class="btn-lap hidden" id="lapStopwatch">Lap</button>
                <button class="btn-reset" id="resetStopwatch">Reset</button>
            </div>
            <div class="laps hidden" id="lapsContainer">
                <h3>Lap Times</h3>
                <div id="lapsList"></div>
            </div>
        </div>

        <!-- Timer Mode -->
        <div id="timerMode" class="hidden">
            <div class="timer-inputs">
                <div class="timer-input-group">
                    <label>Hours</label>
                    <input type="number" id="hoursInput" min="0" max="23" value="0">
                </div>
                <div class="timer-input-group">
                    <label>Minutes</label>
                    <input type="number" id="minutesInput" min="0" max="59" value="0">
                </div>
                <div class="timer-input-group">
                    <label>Seconds</label>
                    <input type="number" id="secondsInput" min="0" max="59" value="30">
                </div>
            </div>
            <div class="display">
                <div class="time-display" id="timerDisplay">00:00:30</div>
            </div>
            <div class="controls">
                <button class="btn-start" id="startTimer">Start</button>
                <button class="btn-stop hidden" id="pauseTimer">Pause</button>
                <button class="btn-reset" id="resetTimer">Reset</button>
            </div>
            <div id="timerAlert" class="hidden alert-message">⏰ Time's Up!</div>
        </div>
    </div>

    <script>
        // Stopwatch functionality
        let stopwatchInterval = null;
        let stopwatchTime = 0;
        let lapCounter = 0;

        const stopwatchDisplay = document.getElementById('stopwatchDisplay');
        const startStopwatchBtn = document.getElementById('startStopwatch');
        const stopStopwatchBtn = document.getElementById('stopStopwatch');
        const lapStopwatchBtn = document.getElementById('lapStopwatch');
        const resetStopwatchBtn = document.getElementById('resetStopwatch');
        const lapsContainer = document.getElementById('lapsContainer');
        const lapsList = document.getElementById('lapsList');

        function formatTime(ms) {
            const totalSeconds = Math.floor(ms / 1000);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            const milliseconds = Math.floor((ms % 1000) / 10);

            return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}.${String(milliseconds).padStart(2, '0')}`;
        }

        function updateStopwatchDisplay() {
            stopwatchDisplay.textContent = formatTime(stopwatchTime);
        }

        startStopwatchBtn.addEventListener('click', () => {
            stopwatchInterval = setInterval(() => {
                stopwatchTime += 10;
                updateStopwatchDisplay();
            }, 10);
            startStopwatchBtn.classList.add('hidden');
            stopStopwatchBtn.classList.remove('hidden');
            lapStopwatchBtn.classList.remove('hidden');
        });

        stopStopwatchBtn.addEventListener('click', () => {
            clearInterval(stopwatchInterval);
            startStopwatchBtn.classList.remove('hidden');
            stopStopwatchBtn.classList.add('hidden');
            lapStopwatchBtn.classList.add('hidden');
        });

        lapStopwatchBtn.addEventListener('click', () => {
            lapCounter++;
            const lapItem = document.createElement('div');
            lapItem.className = 'lap-item';
            lapItem.innerHTML = `
                <span class="lap-number">Lap ${lapCounter}</span>
                <span class="lap-time">${formatTime(stopwatchTime)}</span>
            `;
            lapsList.insertBefore(lapItem, lapsList.firstChild);
            lapsContainer.classList.remove('hidden');
        });

        resetStopwatchBtn.addEventListener('click', () => {
            clearInterval(stopwatchInterval);
            stopwatchTime = 0;
            lapCounter = 0;
            updateStopwatchDisplay();
            lapsList.innerHTML = '';
            lapsContainer.classList.add('hidden');
            startStopwatchBtn.classList.remove('hidden');
            stopStopwatchBtn.classList.add('hidden');
            lapStopwatchBtn.classList.add('hidden');
        });

        // Timer functionality
        let timerInterval = null;
        let timerTimeRemaining = 0;
        let timerInitialTime = 0;

        const hoursInput = document.getElementById('hoursInput');
        const minutesInput = document.getElementById('minutesInput');
        const secondsInput = document.getElementById('secondsInput');
        const timerDisplay = document.getElementById('timerDisplay');
        const startTimerBtn = document.getElementById('startTimer');
        const pauseTimerBtn = document.getElementById('pauseTimer');
        const resetTimerBtn = document.getElementById('resetTimer');
        const timerAlert = document.getElementById('timerAlert');

        function formatTimerTime(totalSeconds) {
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function updateTimerDisplay() {
            timerDisplay.textContent = formatTimerTime(timerTimeRemaining);
        }

        function updateTimerFromInputs() {
            const hours = parseInt(hoursInput.value) || 0;
            const minutes = parseInt(minutesInput.value) || 0;
            const seconds = parseInt(secondsInput.value) || 0;
            timerTimeRemaining = hours * 3600 + minutes * 60 + seconds;
            timerInitialTime = timerTimeRemaining;
            updateTimerDisplay();
        }

        function playBeep() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 1);
        }

        [hoursInput, minutesInput, secondsInput].forEach(input => {
            input.addEventListener('input', () => {
                if (!timerInterval) {
                    updateTimerFromInputs();
                }
            });
        });

        startTimerBtn.addEventListener('click', () => {
            if (timerTimeRemaining === 0) {
                updateTimerFromInputs();
            }
            if (timerTimeRemaining === 0) return;

            timerInterval = setInterval(() => {
                timerTimeRemaining--;
                updateTimerDisplay();

                if (timerTimeRemaining <= 0) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    timerAlert.classList.remove('hidden');
                    playBeep();
                    startTimerBtn.classList.remove('hidden');
                    pauseTimerBtn.classList.add('hidden');
                    
                    // Auto-hide alert after 5 seconds
                    setTimeout(() => {
                        timerAlert.classList.add('hidden');
                    }, 5000);
                }
            }, 1000);

            startTimerBtn.classList.add('hidden');
            pauseTimerBtn.classList.remove('hidden');
            [hoursInput, minutesInput, secondsInput].forEach(input => input.disabled = true);
        });

        pauseTimerBtn.addEventListener('click', () => {
            clearInterval(timerInterval);
            timerInterval = null;
            startTimerBtn.classList.remove('hidden');
            pauseTimerBtn.classList.add('hidden');
        });

        resetTimerBtn.addEventListener('click', () => {
            clearInterval(timerInterval);
            timerInterval = null;
            timerTimeRemaining = 0;
            updateTimerFromInputs();
            timerAlert.classList.add('hidden');
            startTimerBtn.classList.remove('hidden');
            pauseTimerBtn.classList.add('hidden');
            [hoursInput, minutesInput, secondsInput].forEach(input => input.disabled = false);
        });

        // Mode switching
        const stopwatchBtn = document.getElementById('stopwatchBtn');
        const timerBtn = document.getElementById('timerBtn');
        const stopwatchMode = document.getElementById('stopwatchMode');
        const timerMode = document.getElementById('timerMode');

        stopwatchBtn.addEventListener('click', () => {
            stopwatchBtn.classList.add('active');
            timerBtn.classList.remove('active');
            stopwatchMode.classList.remove('hidden');
            timerMode.classList.add('hidden');
            
            // Pause timer if running
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
                startTimerBtn.classList.remove('hidden');
                pauseTimerBtn.classList.add('hidden');
            }
        });

        timerBtn.addEventListener('click', () => {
            timerBtn.classList.add('active');
            stopwatchBtn.classList.remove('active');
            timerMode.classList.remove('hidden');
            stopwatchMode.classList.add('hidden');
            
            // Pause stopwatch if running
            if (stopwatchInterval) {
                clearInterval(stopwatchInterval);
                startStopwatchBtn.classList.remove('hidden');
                stopStopwatchBtn.classList.add('hidden');
                lapStopwatchBtn.classList.add('hidden');
            }
        });

        // Initialize timer display
        updateTimerFromInputs();
    </script>
</body>
</html>