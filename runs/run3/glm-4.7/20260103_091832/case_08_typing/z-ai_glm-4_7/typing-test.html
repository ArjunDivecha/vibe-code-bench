<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            margin-bottom: 25px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .text-display {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            font-size: 1.3rem;
            line-height: 1.8;
            margin-bottom: 25px;
            font-family: 'Courier New', monospace;
            min-height: 150px;
            user-select: none;
        }

        .char {
            padding: 2px 1px;
            border-radius: 3px;
        }

        .char.correct {
            color: #28a745;
            background-color: rgba(40, 167, 69, 0.1);
        }

        .char.incorrect {
            color: #dc3545;
            background-color: rgba(220, 53, 69, 0.1);
            text-decoration: underline;
        }

        .char.current {
            background-color: #ffc107;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { background-color: #ffc107; }
            51%, 100% { background-color: #ffeb3b; }
        }

        .char.pending {
            color: #999;
        }

        .input-area {
            margin-bottom: 25px;
        }

        #textInput {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.2rem;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            outline: none;
            transition: border-color 0.3s;
        }

        #textInput:focus {
            border-color: #667eea;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        button {
            padding: 12px 30px;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        #restartBtn {
            background: #667eea;
            color: white;
        }

        #restartBtn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        #newTextBtn {
            background: #764ba2;
            color: white;
        }

        #newTextBtn:hover {
            background: #6a3d8f;
            transform: translateY(-2px);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .modal-stats {
            margin: 20px 0;
        }

        .modal-stat {
            margin: 15px 0;
        }

        .modal-stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .modal-stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 25px;
        }

        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .mode-btn {
            padding: 8px 20px;
            background: #e0e0e0;
            color: #666;
        }

        .mode-btn.active {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚å®Ô∏è Typing Speed Test</h1>
        
        <div class="mode-selector">
            <button class="mode-btn active" data-mode="timed">30 Second Mode</button>
            <button class="mode-btn" data-mode="complete">Complete Text</button>
        </div>

        <div class="stats-bar">
            <div class="stat">
                <div class="stat-label">Time</div>
                <div class="stat-value" id="timer">30</div>
            </div>
            <div class="stat">
                <div class="stat-label">WPM</div>
                <div class="stat-value" id="wpm">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">Accuracy</div>
                <div class="stat-value" id="accuracy">100%</div>
            </div>
        </div>

        <div class="text-display" id="textDisplay"></div>

        <div class="input-area">
            <input type="text" id="textInput" placeholder="Start typing here..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
        </div>

        <div class="buttons">
            <button id="restartBtn">üîÑ Try Again</button>
            <button id="newTextBtn">üìù New Text</button>
        </div>
    </div>

    <div class="modal" id="resultModal">
        <div class="modal-content">
            <h2>üéâ Test Complete!</h2>
            <div class="modal-stats">
                <div class="modal-stat">
                    <div class="modal-stat-label">Words Per Minute</div>
                    <div class="modal-stat-value" id="finalWpm">0</div>
                </div>
                <div class="modal-stat">
                    <div class="modal-stat-label">Accuracy</div>
                    <div class="modal-stat-value" id="finalAccuracy">0%</div>
                </div>
                <div class="modal-stat">
                    <div class="modal-stat-label">Characters Typed</div>
                    <div class="modal-stat-value" id="finalChars">0</div>
                </div>
            </div>
            <div class="modal-buttons">
                <button id="modalRestartBtn">üîÑ Try Again</button>
                <button id="modalNewTextBtn">üìù New Text</button>
            </div>
        </div>
    </div>

    <script>
        const textSamples = [
            "The quick brown fox jumps over the lazy dog. This classic sentence contains every letter of the alphabet and has been used for typing practice since the late nineteenth century.",
            
            "Programming is the art of telling a computer what to do. It requires logical thinking, attention to detail, and the ability to break down complex problems into smaller, manageable pieces.",
            
            "The ocean covers more than seventy percent of our planet's surface. It contains mysteries that humans have yet to discover and creatures that seem alien to our understanding of life.",
            
            "In a hole in the ground there lived a hobbit. Not a nasty, dirty, wet hole, filled with the ends of worms and an oozy smell, nor yet a dry, bare, sandy hole with nothing in it to sit down on.",
            
            "Success is not final, failure is not fatal: it is the courage to continue that counts. These words remind us that persistence matters more than any single outcome.",
            
            "The journey of a thousand miles begins with a single step. Every expert was once a beginner, and every masterpiece started with a single brushstroke or keystroke.",
            
            "Technology advances at an exponential rate. What seemed like science fiction a decade ago is now commonplace in our daily lives, from smartphones to artificial intelligence.",
            
            "A room without books is like a body without a soul. Reading opens doors to new worlds, introduces us to fascinating characters, and expands our understanding of the human experience.",
            
            "The best time to plant a tree was twenty years ago. The second best time is now. This proverb reminds us that it's never too late to start something meaningful.",
            
            "Music is the universal language of mankind. It transcends borders, cultures, and generations, speaking directly to our emotions in ways that words alone cannot achieve."
        ];

        let currentText = "";
        let currentIndex = 0;
        let startTime = null;
        let timerInterval = null;
        let timeLeft = 30;
        let isTestActive = false;
        let isTimedMode = true;
        let totalKeystrokes = 0;
        let correctKeystrokes = 0;

        const textDisplay = document.getElementById('textDisplay');
        const textInput = document.getElementById('textInput');
        const timerDisplay = document.getElementById('timer');
        const wpmDisplay = document.getElementById('wpm');
        const accuracyDisplay = document.getElementById('accuracy');
        const restartBtn = document.getElementById('restartBtn');
        const newTextBtn = document.getElementById('newTextBtn');
        const resultModal = document.getElementById('resultModal');
        const modalRestartBtn = document.getElementById('modalRestartBtn');
        const modalNewTextBtn = document.getElementById('modalNewTextBtn');
        const finalWpm = document.getElementById('finalWpm');
        const finalAccuracy = document.getElementById('finalAccuracy');
        const finalChars = document.getElementById('finalChars');
        const modeBtns = document.querySelectorAll('.mode-btn');

        function getRandomText() {
            return textSamples[Math.floor(Math.random() * textSamples.length)];
        }

        function displayText() {
            textDisplay.innerHTML = '';
            for (let i = 0; i < currentText.length; i++) {
                const span = document.createElement('span');
                span.className = 'char pending';
                span.textContent = currentText[i];
                textDisplay.appendChild(span);
            }
            updateCursor();
        }

        function updateCursor() {
            const chars = textDisplay.querySelectorAll('.char');
            chars.forEach((char, index) => {
                char.classList.remove('current');
                if (index === currentIndex) {
                    char.classList.add('current');
                }
            });
        }

        function startTest() {
            if (!isTestActive) {
                isTestActive = true;
                startTime = new Date();
                
                if (isTimedMode) {
                    timerInterval = setInterval(updateTimer, 1000);
                }
            }
        }

        function updateTimer() {
            timeLeft--;
            timerDisplay.textContent = timeLeft;
            
            if (timeLeft <= 0) {
                endTest();
            }
        }

        function calculateStats() {
            const timeElapsed = isTimedMode ? (30 - timeLeft) / 60 : (new Date() - startTime) / 60000;
            const timeInMinutes = Math.max(timeElapsed, 0.0167); // Minimum of 1 second
            
            const wordsTyped = correctKeystrokes / 5; // Standard: 5 chars = 1 word
            const wpm = Math.round(wordsTyped / timeInMinutes);
            
            const accuracy = totalKeystrokes > 0 ? Math.round((correctKeystrokes / totalKeystrokes) * 100) : 100;
            
            return { wpm, accuracy };
        }

        function updateStats() {
            const stats = calculateStats();
            wpmDisplay.textContent = stats.wpm;
            accuracyDisplay.textContent = stats.accuracy + '%';
        }

        function endTest() {
            isTestActive = false;
            clearInterval(timerInterval);
            textInput.disabled = true;
            
            const stats = calculateStats();
            finalWpm.textContent = stats.wpm;
            finalAccuracy.textContent = stats.accuracy + '%';
            finalChars.textContent = correctKeystrokes;
            
            resultModal.classList.add('show');
        }

        function resetTest(newText = false) {
            clearInterval(timerInterval);
            isTestActive = false;
            currentIndex = 0;
            timeLeft = 30;
            totalKeystrokes = 0;
            correctKeystrokes = 0;
            
            if (newText) {
                currentText = getRandomText();
            }
            
            timerDisplay.textContent = isTimedMode ? '30' : '0';
            wpmDisplay.textContent = '0';
            accuracyDisplay.textContent = '100%';
            textInput.value = '';
            textInput.disabled = false;
            resultModal.classList.remove('show');
            
            displayText();
            textInput.focus();
        }

        function handleInput(e) {
            if (!isTestActive && textInput.value.length === 1) {
                startTest();
            }

            const typed = textInput.value;
            const chars = textDisplay.querySelectorAll('.char');
            
            totalKeystrokes = typed.length;
            correctKeystrokes = 0;

            for (let i = 0; i < chars.length; i++) {
                chars[i].classList.remove('correct', 'incorrect', 'current', 'pending');
                
                if (i < typed.length) {
                    if (typed[i] === currentText[i]) {
                        chars[i].classList.add('correct');
                        correctKeystrokes++;
                    } else {
                        chars[i].classList.add('incorrect');
                    }
                } else {
                    chars[i].classList.add('pending');
                }
            }

            currentIndex = Math.min(typed.length, currentText.length);
            updateCursor();
            updateStats();

            // Check if text is complete (for complete mode)
            if (!isTimedMode && typed.length >= currentText.length) {
                endTest();
            }
        }

        // Event Listeners
        textInput.addEventListener('input', handleInput);
        
        restartBtn.addEventListener('click', () => resetTest(false));
        newTextBtn.addEventListener('click', () => resetTest(true));
        modalRestartBtn.addEventListener('click', () => resetTest(false));
        modalNewTextBtn.addEventListener('click', () => resetTest(true));

        modeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                modeBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                isTimedMode = btn.dataset.mode === 'timed';
                timerDisplay.textContent = isTimedMode ? '30' : '0';
                resetTest(true);
            });
        });

        // Prevent form submission on Enter
        textInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
            }
        });

        // Initialize
        currentText = getRandomText();
        displayText();
        textInput.focus();
    </script>
</body>
</html>