<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibe-Law | Legal Case Search Workspace</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #111827;
            --bg-tertiary: #1a2332;
            --bg-hover: #243045;
            --border-color: #2a3a52;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --accent-blue: #3b82f6;
            --accent-blue-hover: #2563eb;
            --accent-gold: #f59e0b;
            --highlight-name: #fef3c7;
            --highlight-date: #dbeafe;
            --success: #10b981;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-blue), #1e40af);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .logo-text span {
            color: var(--accent-blue);
        }

        .search-container {
            flex: 1;
            max-width: 600px;
            margin: 0 2rem;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            transition: border-color 0.2s;
        }

        .search-bar:focus-within {
            border-color: var(--accent-blue);
        }

        .search-icon {
            padding: 0 1rem;
            color: var(--text-muted);
        }

        .search-input {
            flex: 1;
            background: transparent;
            border: none;
            padding: 0.8rem 0;
            color: var(--text-primary);
            font-size: 0.95rem;
            outline: none;
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-btn {
            background: var(--accent-blue);
            border: none;
            padding: 0.8rem 1.5rem;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-btn:hover {
            background: var(--accent-blue-hover);
        }

        /* Main Layout */
        .main-container {
            display: flex;
            height: calc(100vh - 73px);
        }

        /* Results Panel */
        .results-panel {
            flex: 1;
            min-width: 400px;
            max-width: 500px;
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            background: var(--bg-secondary);
        }

        .results-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .results-count {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .case-list {
            padding: 0.5rem;
        }

        .case-item {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .case-item:hover {
            border-color: var(--accent-blue);
            background: var(--bg-hover);
        }

        .case-item.active {
            border-color: var(--accent-blue);
            background: var(--bg-hover);
            box-shadow: 0 0 0 1px var(--accent-blue);
        }

        .case-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .case-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }

        .case-meta span {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .court-badge {
            background: var(--accent-blue);
            color: white;
            padding: 0.15rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .case-preview {
            font-size: 0.85rem;
            color: var(--text-muted);
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Detail Panel */
        .detail-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-primary);
            overflow: hidden;
        }

        .detail-placeholder {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
        }

        .detail-placeholder-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        .detail-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .detail-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-secondary);
        }

        .detail-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
        }

        .detail-meta {
            display: flex;
            gap: 1.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 0 2rem;
        }

        .tab {
            padding: 1rem 1.5rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .tab:hover {
            color: var(--text-primary);
        }

        .tab.active {
            color: var(--accent-blue);
            border-bottom-color: var(--accent-blue);
        }

        /* Tab Content */
        .tab-content {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        /* Actions Bar */
        .actions-bar {
            display: flex;
            gap: 0.75rem;
            padding: 1rem 2rem;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--accent-blue);
            color: white;
            border: none;
        }

        .btn-primary:hover {
            background: var(--accent-blue-hover);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--bg-hover);
        }

        /* Content Styles */
        .summary-section {
            margin-bottom: 2rem;
        }

        .summary-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .summary-text {
            color: var(--text-primary);
            line-height: 1.8;
        }

        .full-text {
            color: var(--text-primary);
            line-height: 1.8;
            font-size: 0.95rem;
        }

        .full-text p {
            margin-bottom: 1.5rem;
        }

        /* Entity Highlights */
        .highlight-name {
            background: rgba(245, 158, 11, 0.2);
            color: var(--accent-gold);
            padding: 0.1rem 0.3rem;
            border-radius: 3px;
            font-weight: 500;
        }

        .highlight-date {
            background: rgba(59, 130, 246, 0.2);
            color: var(--accent-blue);
            padding: 0.1rem 0.3rem;
            border-radius: 3px;
        }

        /* Notes Sidebar */
        .notes-sidebar {
            width: 320px;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .notes-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notes-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .notes-count {
            background: var(--accent-blue);
            color: white;
            padding: 0.1rem 0.5rem;
            border-radius: 10px;
            font-size: 0.75rem;
        }

        .notes-list {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .note-item {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            position: relative;
        }

        .note-case {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .note-text {
            font-size: 0.85rem;
            color: var(--text-primary);
            line-height: 1.5;
            margin-bottom: 0.5rem;
        }

        .note-date {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .note-delete {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0.25rem;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .note-item:hover .note-delete {
            opacity: 1;
        }

        .note-delete:hover {
            color: #ef4444;
        }

        .add-note-form {
            padding: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .add-note-textarea {
            width: 100%;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 0.75rem;
            color: var(--text-primary);
            font-size: 0.85rem;
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }

        .add-note-textarea:focus {
            outline: none;
            border-color: var(--accent-blue);
        }

        .add-note-btn {
            width: 100%;
            margin-top: 0.75rem;
            background: var(--accent-blue);
            color: white;
            border: none;
            padding: 0.6rem;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
        }

        .add-note-btn:hover {
            background: var(--accent-blue-hover);
        }

        /* Empty State */
        .empty-notes {
            text-align: center;
            color: var(--text-muted);
            padding: 2rem 1rem;
        }

        .empty-notes-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            opacity: 0.5;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--success);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .notes-sidebar {
                width: 280px;
            }
        }

        @media (max-width: 900px) {
            .main-container {
                flex-direction: column;
            }

            .results-panel {
                max-width: none;
                max-height: 40vh;
            }

            .notes-sidebar {
                display: none;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <div class="logo-icon">‚öñ</div>
            <div class="logo-text">Vibe<span>-Law</span></div>
        </div>
        <div class="search-container">
            <div class="search-bar">
                <span class="search-icon">üîç</span>
                <input type="text" class="search-input" id="searchInput" placeholder="Search case law by title, court, or keywords...">
                <button class="search-btn" onclick="performSearch()">Search</button>
            </div>
        </div>
    </header>

    <div class="main-container">
        <!-- Results Panel -->
        <aside class="results-panel">
            <div class="results-header">
                <span class="results-count" id="resultsCount">15 cases found</span>
            </div>
            <div class="case-list" id="caseList">
                <!-- Cases will be rendered here -->
            </div>
        </aside>

        <!-- Detail Panel -->
        <main class="detail-panel" id="detailPanel">
            <div class="detail-placeholder">
                <div class="detail-placeholder-icon">üìú</div>
                <h2>Select a Case</h2>
                <p>Click on a case from the list to view details</p>
            </div>
        </main>

        <!-- Notes Sidebar -->
        <aside class="notes-sidebar">
            <div class="notes-header">
                <div class="notes-title">
                    üìù Notes <span class="notes-count" id="notesCount">0</span>
                </div>
            </div>
            <div class="notes-list" id="notesList">
                <div class="empty-notes">
                    <div class="empty-notes-icon">üìã</div>
                    <p>No notes yet</p>
                    <small>Select text and save snippets</small>
                </div>
            </div>
            <div class="add-note-form" id="addNoteForm" style="display: none;">
                <textarea class="add-note-textarea" id="noteText" placeholder="Your note..."></textarea>
                <button class="add-note-btn" onclick="addNote()">Save Note</button>
            </div>
        </aside>
    </div>

    <div class="toast" id="toast">Note saved successfully!</div>

    <script>
        // Mock Legal Cases Data
        const mockCases = [
            {
                id: 1,
                title: "Miranda v. Arizona",
                court: "Supreme Court",
                date: "1966-06-13",
                citation: "384 U.S. 436",
                preview: "The Supreme Court held that the Fifth Amendment's protection against self-incrimination requires law enforcement officials to advise a suspect of their rights before interrogation begins.",
                summary: {
                    holding: "The Court held that both inculpatory and exculpatory statements made in response to interrogation by a defendant in police custody will be admissible at trial only if the prosecution can show that the defendant was informed of the right to consult with an attorney before and during questioning and of the right against self-incrimination prior to questioning by police, and that the defendant not only understood these rights, but voluntarily waived them.",
                    facts: "Ernesto Arturo Miranda was arrested in Phoenix and taken to a police station where he was identified by the victim of a kidnapping and rape. After two hours of interrogation, Miranda signed a written confession that included a statement that the confession was made voluntarily and without threats or promises of immunity.",
                    issue: "Does the police practice of interrogating individuals without notifying them of their right to counsel and their protection against self-incrimination violate the Fifth Amendment?"
                },
                fullText: `OPINION OF THE COURT

The cases before us raise questions which go to the roots of our concepts of American criminal jurisprudence: the restraints society must observe consistent with the Federal Constitution in prosecuting individuals for crime. More specifically, we deal with the admissibility of statements obtained from an individual who is subjected to custodial police interrogation and the necessity for procedures which assure that the individual is accorded his privilege under the Fifth Amendment to the Constitution not to be compelled to incriminate himself.

We dealt with certain phases of this problem recently in Escobedo v. Illinois, 378 U. S. 478 (1964). In Escobedo, as well as in other cases, we sought protective devices to dispel the compulsion inherent in custodial surroundings.

Mr. Chief Justice Warren delivered the opinion of the Court.

The prosecution may not use statements, whether exculpatory or inculpatory, stemming from custodial interrogation of the defendant unless it demonstrates the use of procedural safeguards effective to secure the privilege against self-incrimination. By custodial interrogation, we mean questioning initiated by law enforcement officers after a person has been taken into custody or otherwise deprived of his freedom of action in any significant way.

As for the procedural safeguards to be employed, unless other fully effective means are devised to inform accused persons of their right of silence and to assure a continuous opportunity to exercise it, the following measures are required. Prior to any questioning, the person must be warned that he has a right to remain silent, that any statement he does make may be used as evidence against him, and that he has a right to the presence of an attorney, either retained or appointed.`
            },
            {
                id: 2,
                title: "Brown v. Board of Education",
                court: "Supreme Court",
                date: "1954-05-17",
                citation: "347 U.S. 483",
                preview: "The Supreme Court declared state laws establishing separate public schools for black and white students to be unconstitutional, overturning Plessy v. Ferguson.",
                summary: {
                    holding: "Separate educational facilities are inherently unequal. Therefore, the segregation of children in public schools solely on the basis of race deprives children of the minority group of equal educational opportunities, even though the physical facilities and other tangible factors may be equal.",
                    facts: "Black children had been denied admission to public schools attended by white children under laws requiring or permitting segregation according to race. The NAACP argued that segregated schools sent the message to black children that they were inferior to whites.",
                    issue: "Does segregation of children in public schools solely on the basis of race violate the Equal Protection Clause of the Fourteenth Amendment?"
                },
                fullText: `OPINION OF THE COURT

Mr. Chief Justice Warren delivered the opinion of the Court.

These cases come to us from the States of Kansas, South Carolina, Virginia, and Delaware. They are premised on different facts and different local conditions, but a common legal question justifies their consideration together in this consolidated opinion.

In each of the cases, minors of the Negro race, through their legal representatives, seek the aid of the courts in obtaining admission to the public schools of their community on a nonsegregated basis. In each instance, they had been denied admission to schools attended by white children under laws requiring or permitting segregation according to race.

The plaintiffs contend that segregated public schools are not "equal" and cannot be made "equal," and that hence they are deprived of the equal protection of the laws. Because of the obvious importance of the question presented, the Court took jurisdiction.

Today, education is perhaps the most important function of state and local governments. Compulsory school attendance laws and the great expenditures for education both demonstrate our recognition of the importance of education to our democratic society. It is required in the performance of our most basic public responsibilities, even service in the armed forces. It is the very foundation of good citizenship.

We come then to the question presented: Does segregation of children in public schools solely on the basis of race, even though the physical facilities and other "tangible" factors may be equal, deprive the children of the minority group of equal educational opportunities? We believe that it does.`
            },
            {
                id: 3,
                title: "Roe v. Wade",
                court: "Supreme Court",
                date: "1973-01-22",
                citation: "410 U.S. 113",
                preview: "The Court ruled that the Constitution protects a pregnant woman's liberty to choose to have an abortion without excessive government restriction.",
                summary: {
                    holding: "The Constitution of the United States does not explicitly mention any right of privacy. However, the Court has recognized that a right of personal privacy does exist under the Constitution. The right of privacy, whether it be founded in the Fourteenth Amendment's concept of personal liberty and restrictions upon state action, or in the Ninth Amendment's reservation of rights to the people, is broad enough to encompass a woman's decision whether or not to terminate her pregnancy.",
                    facts: "Jane Roe, a single woman who was residing in Dallas County, Texas, instituted this action in March 1970 against the District Attorney of the county. She sought a declaratory judgment that the Texas criminal abortion statutes were unconstitutional on their face, and an injunction restraining the defendant from enforcing the statutes.",
                    issue: "Does the Constitution embrace a woman's right to terminate her pregnancy by abortion?"
                },
                fullText: `OPINION OF THE COURT

Mr. Justice Blackmun delivered the opinion of the Court.

This Texas federal appeal and its Georgia companion, Doe v. Bolton, present constitutional challenges to state criminal abortion legislation. The Texas statutes under attack here are typical of those that have been in effect in many States for approximately a century. The Georgia statutes, in contrast, have a modern cast and are a legislative product that, to some extent at least, obviously reflects the influences of recent attitudinal changes, of advancing medical knowledge and techniques, and of new thinking about an old issue.

We forthwith acknowledge our awareness of the sensitive and emotional nature of the abortion controversy, of the vigorous opposing views, even among physicians, and of the deep and seemingly absolute convictions that the subject inspires. One's philosophy, one's experiences, one's exposure to the raw edges of human existence, one's religious training, one's attitudes toward life and family and their values, and the moral standards one establishes and seeks to observe, are all likely to influence and to color one's thinking and conclusions about abortion.

The Constitution does not explicitly mention any right of privacy. In a line of decisions, however, going back perhaps as far as Union Pacific R. Co. v. Botsford, 141 U. S. 250, 251 (1891), the Court has recognized that a right of personal privacy, or a guarantee of certain areas or zones of privacy, does exist under the Constitution.`
            },
            {
                id: 4,
                title: "Gideon v. Wainwright",
                court: "Supreme Court",
                date: "1963-03-18",
                citation: "372 U.S. 335",
                preview: "The Court held that the Sixth Amendment's guarantee of counsel is a fundamental right essential to a fair trial, applicable to the states through the Fourteenth Amendment.",
                summary: {
                    holding: "In our adversary system of criminal justice, any person haled into court who is too poor to hire a lawyer cannot be assured a fair trial unless counsel is provided for him. This seems to us to be an obvious truth. Governments, both state and federal, quite properly spend vast sums of money to establish machinery to try defendants accused of crime.",
                    facts: "Clarence Earl Gideon was charged in Florida state court with a felony for breaking and entering. He lacked funds and was unable to hire a lawyer to prepare his defense. When he requested the court to appoint an attorney for him, the court refused, stating that under Florida state law, counsel could be appointed only in capital cases.",
                    issue: "Does the Sixth Amendment's right to counsel in criminal cases apply to defendants in state courts through the Fourteenth Amendment?"
                },
                fullText: `OPINION OF THE COURT

Mr. Justice Black delivered the opinion of the Court.

Petitioner was charged in a Florida State Court with having broken and entered a poolroom with intent to commit a misdemeanor. This offense is a felony under Florida law. Appearing in court without funds and without a lawyer, petitioner asked the court to appoint counsel for him, whereupon the following colloquy took place:

"MR. GIDEON: The Court, I ask the Court to appoint counsel to represent me in this trial. THE COURT: Mr. Gideon, I am sorry, but I cannot appoint Counsel to represent you in this case. Under the laws of the State of Florida, the only time the Court can appoint Counsel to represent a Defendant is when that person is charged with a capital offense. I am sorry, but I will have to deny your request to appoint Counsel to defend you in this case."

Put to trial before a jury, Gideon conducted his defense about as well as could be expected from a layman. He made an opening statement to the jury, cross-examined the State's witnesses, presented witnesses in his own defense, declined to testify himself, and made a short argument to the jury. The jury returned a verdict of guilty, and petitioner was sentenced to serve five years in the state prison.

From that conviction he appealed to the State Supreme Court, which affirmed without opinion. He then filed in this Court a petition for a writ of certiorari, which we granted.`
            },
            {
                id: 5,
                title: "Marbury v. Madison",
                court: "Supreme Court",
                date: "1803-02-24",
                citation: "5 U.S. 137",
                preview: "This case established the principle of judicial review, affirming the Supreme Court's power to strike down laws that violate the Constitution.",
                summary: {
                    holding: "It is emphatically the province and duty of the judicial department to say what the law is. Those who apply the rule to particular cases must of necessity expound and interpret that rule. If two laws conflict with each other, the courts must decide on the operation of each.",
                    facts: "William Marbury had been appointed Justice of the Peace in the District of Columbia by President John Adams shortly before leaving office. His commission was signed and sealed, but not delivered. When Thomas Jefferson assumed office, he ordered his Secretary of State, James Madison, not to deliver Marbury's commission.",
                    issue: "Does Marbury have a right to his commission, and if so, do the laws of the United States afford him a remedy?"
                },
                fullText: `OPINION OF THE COURT

Mr. Chief Justice Marshall delivered the opinion of the Court.

At the last term, on the affidavits then read and filed with the clerk, a rule was granted in this case, directing the Secretary of State to show cause why a mandamus should not issue, directing him to deliver to William Marbury his commission as a justice of the peace for the county of Washington, in the District of Columbia.

The peculiar delicacy of this case, the novelty of some of its circumstances, and the real difficulty attending the points which occur in it, require a complete exposition of the principles on which the opinion to be given by the Court is founded.

These principles have been, on the side of the applicant, very ably argued at the bar. In rendering the opinion of the Court, there will be some departure in form, though not in substance, from the points stated in that argument.

In the order in which the Court has viewed this subject, the following questions have been considered and decided.

1. Has the applicant a right to the commission he demands?

2. If he has a right, and that right has been violated, do the laws of his country afford him a remedy?

3. If they do afford him a remedy, is it a mandamus issuing from this court?

The first object of inquiry is: Has the applicant a right to the commission he demands?`
            },
            {
                id: 6,
                title: "Citizens United v. FEC",
                court: "Supreme Court",
                date: "2010-01-21",
                citation: "558 U.S. 310",
                preview: "The Court held that the free speech clause of the First Amendment prohibits the government from restricting independent expenditures for political communications by corporations.",
                summary: {
                    holding: "The Government may not suppress political speech on the basis of the speaker's corporate identity. No sufficient governmental interest justifies limits on the political speech of nonprofit or for-profit corporations. The Court finds that the Bipartisan Campaign Reform Act's restrictions on corporate-funded independent political broadcasts in the 60 days before an election are unconstitutional.",
                    facts: "Citizens United, a conservative nonprofit organization, sought to air a film critical of Hillary Clinton and to advertise the film during television broadcasts in the 2008 presidential primary season. The Bipartisan Campaign Reform Act prohibited corporations and unions from using their general treasury funds for electioneering communications.",
                    issue: "Whether the Bipartisan Campaign Reform Act's restrictions on electioneering communications violate the First Amendment?"
                },
                fullText: `OPINION OF THE COURT

Mr. Justice Kennedy delivered the opinion of the Court.

The Court has recognized that First Amendment protection extends to corporations. In First National Bank of Boston v. Bellotti, this Court invalidated a Massachusetts law that prohibited corporations from spending money to influence referenda on any issue except one materially affecting their property or business.

The Court reasoned that the "identity of the speaker is not decisive in determining whether speech is protected. Corporations and other associations, like individuals, contribute to the 'discussion, debate, and the dissemination of information and ideas' that the First Amendment seeks to foster."

The Court has applied these principles and conclusions to corporations and unions with regard to campaign finance. In Buckley v. Valeo, the Court upheld limits on contributions to candidates but struck down limits on expenditures by candidates and independent expenditures by individuals and groups.

The Government's interest in preventing corruption or the appearance of corruption is limited to quid pro quo corruption. The appearance of influence or access, furthermore, will not cause the electorate to lose faith in our democracy.`
            },
            {
                id: 7,
                title: "United States v. Nixon",
                court: "Supreme Court",
                date: "1974-07-24",
                citation: "418 U.S. 683",
                preview: "The Court unanimously ruled that President Nixon must comply with a subpoena for tape recordings, rejecting his claim of absolute executive privilege.",
                summary: {
                    holding: "Neither the doctrine of separation of powers nor the need for confidentiality of high-level communications, without more, can sustain an absolute, unqualified Presidential privilege of immunity from judicial process under all circumstances. The President is not above the law.",
                    facts: "A special prosecutor appointed to investigate the Watergate scandal subpoenaed tape recordings of conversations between President Nixon and his advisers. Nixon claimed executive privilege and refused to turn over the tapes.",
                    issue: "Is the President's right to safeguard certain information using his 'executive privilege' power entirely immune from judicial review?"
                },
                fullText: `OPINION OF THE COURT

Mr. Chief Justice Burger delivered the opinion of the Court.

This case presents for review the denial of a motion, filed in the District Court on behalf of the President of the United States, in the course of a pending criminal prosecution, to quash a third-party subpoena duces tecum issued by the United States District Court for the District of Columbia, pursuant to Rule 17(c) of the Federal Rules of Criminal Procedure.

The subpoena was served upon the President's custodian of records, and it called for the production before the District Court of certain tape recordings and documents relating to precisely identified conversations and meetings between the President and his advisers.

The President, invoking a claim of executive privilege, filed a motion to quash the subpoena. The District Court denied the motion, and the Court of Appeals affirmed.

The question whether the President of the United States has an absolute privilege against disclosure of materials subpoenaed for use in a criminal trial is a matter of great public importance and of first impression in this Court.`
            },
            {
                id: 8,
                title: "Obergefell v. Hodges",
                court: "Supreme Court",
                date: "2015-06-26",
                citation: "576 U.S. 644",
                preview: "The Court ruled that the fundamental right to marry is guaranteed to same-sex couples under the Due Process and Equal Protection Clauses of the Fourteenth Amendment.",
                summary: {
                    holding: "The Constitution grants couples of the same-sex the right to marry, which requires states to issue marriage licenses to same-sex couples and to recognize marriages lawfully performed in other states. No union is more profound than marriage, for it embodies the highest ideals of love, fidelity, devotion, sacrifice, and family.",
                    facts: "Petitioners, same-sex couples who sought to marry, challenged state laws that denied them the right to marry or refused to recognize their marriages lawfully performed in other states. The cases were consolidated for review.",
                    issue: "Does the Fourteenth Amendment require a state to license a marriage between two people of the same sex?"
                },
                fullText: `OPINION OF THE COURT

Mr. Justice Kennedy delivered the opinion of the Court.

The Constitution promises liberty to all within its reach, a liberty that includes certain specific rights that allow persons, within a lawful realm, to define and express their identity. The petitioners in these cases seek to find that liberty by marrying someone of the same sex and having their marriages deemed lawful on the same terms and conditions as marriages between persons of the opposite sex.

The identification and protection of fundamental rights is an enduring part of the judicial duty to interpret the Constitution. That responsibility, however, "has not been reduced to any formula." Rather, it requires courts to exercise reasoned judgment in identifying interests of the person so fundamental that the State must accord them its respect.

The right to personal choice regarding marriage is inherent in the concept of individual autonomy. Choices about marriage shape an individual's destiny. As the Supreme Judicial Court of Massachusetts has explained, because "it fulfils yearnings for security, safe haven, and connection that express our common humanity, civil marriage is an esteemed institution, and the decision whether and whom to marry is among life's momentous acts of self-definition."`
            },
            {
                id: 9,
                title: "Dred Scott v. Sandford",
                court: "Supreme Court",
                date: "1857-03-06",
                citation: "60 U.S. 393",
                preview: "The Court ruled that African Americans were not and could never be citizens of the United States, and that Congress had no authority to prohibit slavery in federal territories.",
                summary: {
                    holding: "People of African descent, whether enslaved or free, were not American citizens and could not sue in federal court. The Court also ruled that Congress lacked power to prohibit slavery in the territories, effectively declaring the Missouri Compromise unconstitutional.",
                    facts: "Dred Scott, an enslaved man, had been taken by his owner from Missouri, a slave state, to Illinois and the Wisconsin Territory, where slavery was prohibited. Scott argued that his residence in free territory made him a free man.",
                    issue: "Was Dred Scott a citizen of the United States with the right to sue in federal court?"
                },
                fullText: `OPINION OF THE COURT

Mr. Chief Justice Taney delivered the opinion of the Court.

The question is simply this: Can a negro, whose ancestors were imported into this country, and sold as slaves, become a member of the political community formed and brought into existence by the Constitution of the United States, and as such become entitled to all the rights, and privileges, and immunities, guarantied by that instrument to the citizen? One of which rights is the privilege of suing in a court of the United States in the cases specified in the Constitution.

We think they are not, and that they are not included, and were not intended to be included, under the word "citizens" in the Constitution, and can therefore claim none of the rights and privileges which that instrument provides for and secures to citizens of the United States.

On the contrary, they were at that time considered as a subordinate and inferior class of beings, who had been subjugated by the dominant race, and, whether emancipated or not, yet remained subject to their authority, and had no rights or privileges but such as those who held the power and the Government might choose to grant them.`
            },
            {
                id: 10,
                title: "Plessy v. Ferguson",
                court: "Supreme Court",
                date: "1896-05-18",
                citation: "163 U.S. 537",
                preview: "The Court upheld racial segregation under the doctrine of 'separate but equal,' which would remain the law until overturned by Brown v. Board of Education.",
                summary: {
                    holding: "The separation of races does not by itself imply the inferiority of either race. If one race be inferior to the other socially, the Constitution of the United States cannot put them upon the same plane. The 'separate but equal' doctrine was established.",
                    facts: "Homer Plessy, who was seven-eighths white and one-eighth African American, boarded a train in Louisiana and sat in a car reserved for white passengers. When he refused to move to the 'colored' car, he was arrested.",
                    issue: "Is Louisiana's law mandating racial segregation on its trains an unconstitutional infringement on the Equal Protection Clause of the Fourteenth Amendment?"
                },
                fullText: `OPINION OF THE COURT

Mr. Justice Brown delivered the opinion of the Court.

This case turns upon the constitutionality of an act of the General Assembly of the State of Louisiana, passed in 1890, providing for separate railway carriages for the white and colored races.

The first section of the statute enacts "that all railway companies carrying passengers in their coaches in this State, shall provide equal but separate accommodations for the white, and colored races, by providing two or more passenger coaches for each passenger train, or by dividing the passenger coaches by a partition so as to secure separate accommodations."

The object of the amendment was undoubtedly to enforce the absolute equality of the two races before the law, but in the nature of things it could not have been intended to abolish distinctions based upon color, or to enforce social, as distinguished from political equality, or a commingling of the two races upon terms unsatisfactory to either.

We consider the underlying fallacy of the plaintiff's argument to consist in the assumption that the enforced separation of the two races stamps the colored race with a badge of inferiority. If this be so, it is not by reason of anything found in the act, but solely because the colored race chooses to put that construction upon it.`
            },
            {
                id: 11,
                title: "Mapp v. Ohio",
                court: "Supreme Court",
                date: "1961-06-19",
                citation: "367 U.S. 643",
                preview: "The Court extended the exclusionary rule to state courts, requiring that evidence obtained in violation of the Fourth Amendment be excluded from state criminal trials.",
                summary: {
                    holding: "All evidence obtained by searches and seizures in violation of the Constitution is, by that same authority, inadmissible in a state court. The exclusionary rule applies to the states through the Fourteenth Amendment's Due Process Clause.",
                    facts: "Police officers entered Dollree Mapp's home without a warrant and forcibly searched it. They claimed to be looking for a bombing suspect but instead found obscene materials, which they used to convict Mapp.",
                    issue: "Were the confiscated materials protected by the Fourth Amendment's protection against unreasonable searches and seizures?"
                },
                fullText: `OPINION OF THE COURT

Mr. Justice Clark delivered the opinion of the Court.

This case presents serious questions concerning the role of the Fourth Amendment in the increasingly important fight against crime in the Nation today. The specific issue before us is whether evidence obtained by state officers during a search which violated the Fourth Amendment may be admitted in a state criminal prosecution.

The petitioner, Dollree Mapp, was convicted of possessing obscene materials after an admittedly illegal search of her home by Cleveland police. The Supreme Court of Ohio affirmed the conviction, rejecting her argument that the evidence should have been excluded as the fruit of an unlawful search and seizure.

We hold that all evidence obtained by searches and seizures in violation of the Constitution is, by that same authority, inadmissible in a state court.

The rule that evidence obtained by an illegal search and seizure is inadmissible has long been recognized as a vital principle of criminal procedure in the federal courts. We now extend that principle to the states.`
            },
            {
                id: 12,
                title: "Tinker v. Des Moines",
                court: "Supreme Court",
                date: "1969-02-24",
                citation: "393 U.S. 503",
                preview: "The Court ruled that students do not shed their constitutional rights at the schoolhouse gate, affirming their right to free speech.",
                summary: {
                    holding: "Students do not abandon their constitutional rights to freedom of speech or expression at the schoolhouse gate. School officials cannot prohibit speech unless they can reasonably forecast that the speech will cause substantial disruption or material interference with school activities.",
                    facts: "John Tinker, Mary Beth Tinker, and Christopher Eckhardt decided to wear black armbands to school to protest the Vietnam War. School officials learned of the plan and adopted a policy prohibiting the wearing of armbands. The students wore them anyway and were suspended.",
                    issue: "Does a prohibition against the wearing of armbands in public school, as a form of symbolic protest, violate the First Amendment's freedom of speech protections?"
                },
                fullText: `OPINION OF THE COURT

Mr. Justice Fortas delivered the opinion of the Court.

Petitioners, three public school pupils in Des Moines, Iowa, were suspended from school for wearing black armbands to protest the Government's policy in Vietnam. They sought nominal damages and an injunction against a regulation that the respondents had promulgated banning the wearing of armbands.

The District Court dismissed the complaint on the ground that the regulation was within the Board's power, despite the absence of any finding of substantial interference with the conduct of school activities. The Court of Appeals, sitting en banc, affirmed by an equally divided court.

It can hardly be argued that either students or teachers shed their constitutional rights to freedom of speech or expression at the schoolhouse gate. This has been the unmistakable holding of this Court for almost 50 years.

In our system, state-operated schools may not be enclaves of totalitarianism. School officials do not possess absolute authority over their students. Students in school as well as out of school are "persons" under our Constitution. They are possessed of fundamental rights which the State must respect, just as they themselves must respect their obligations to the State.`
            },
            {
                id: 13,
                title: "New York Times Co. v. Sullivan",
                court: "Supreme Court",
                date: "1964-03-09",
                citation: "376 U.S. 254",
                preview: "The Court established the 'actual malice' standard for defamation claims by public officials, requiring proof of knowledge of falsity or reckless disregard for the truth.",
                summary: {
                    holding: "The constitutional guarantees require a federal rule that prohibits a public official from recovering damages for a defamatory falsehood relating to his official conduct unless he proves 'actual malice' ‚Äî that the statement was made with knowledge of its falsity or with reckless disregard of whether it was true or false.",
                    facts: "The New York Times published an editorial advertisement describing the abuse of civil rights protesters in Montgomery, Alabama. L.B. Sullivan, the city commissioner, sued for libel, claiming the ad contained false statements about him.",
                    issue: "Does Alabama's libel law, by requiring public officials to prove 'actual malice' to recover damages for defamation, violate the First Amendment?"
                },
                fullText: `OPINION OF THE COURT

Mr. Justice Brennan delivered the opinion of the Court.

We are required in this case to determine for the first time the extent to which the constitutional protections for speech and press limit a State's power to award damages for libel in actions brought by public officials against critics of their official conduct.

The case concerns an advertisement published by The New York Times on behalf of a committee whose members included many of Alabama's most prominent clergymen. The advertisement described the abuse of civil rights protesters in Montgomery, Alabama.

L. B. Sullivan, one of three elected Commissioners of the City of Montgomery, Alabama, filed a libel action against the Times and the individual signers of the advertisement. A jury in the Circuit Court of Montgomery County awarded him $500,000 damages.

We hold that the rule of law applied by the Alabama courts is constitutionally deficient for failure to provide the safeguards for freedom of speech and of the press that are required by the First and Fourteenth Amendments in a libel action brought by a public official against critics of his official conduct.`
            },
            {
                id: 14,
                title: "Bush v. Gore",
                court: "Supreme Court",
                date: "2000-12-12",
                citation: "531 U.S. 98",
                preview: "The Court ruled that the Florida Supreme Court's manual recount of ballots was unconstitutional, effectively ending the disputed 2000 presidential election.",
                summary: {
                    holding: "The Florida Supreme Court's scheme for recounting ballots violated the Equal Protection Clause because it did not provide equal treatment to all voters. The lack of a specific recount standard meant that different counties used different criteria, violating equal protection.",
                    facts: "The 2000 presidential election between George W. Bush and Al Gore came down to Florida's electoral votes. The initial count was extremely close, leading to recounts and legal challenges. The Florida Supreme Court ordered a manual recount.",
                    issue: "Did the Florida Supreme Court's decision to order a manual recount of ballots violate the Equal Protection Clause of the Fourteenth Amendment?"
                },
                fullText: `PER CURIAM OPINION

The petitioners, George W. Bush and Richard Cheney, respectfully request that this Court stay the mandate of the Florida Supreme Court pending the filing and disposition of a petition for a writ of certiorari. The Florida Supreme Court's decision effectively orders the selective inclusion of additional votes for Vice President Gore, and the exclusion of additional votes for Governor Bush, thereby changing the existing certified vote totals and the outcome of the election.

The counting of votes that are of questionable legality does in my view threaten irreparable harm to petitioner, and to the country, by casting a cloud upon what he claims to be the legitimacy of his election.

The case before us presents serious questions about the interpretation and application of Florida election law. The Florida Supreme Court's decision to order a manual recount of ballots raises significant constitutional issues under the Equal Protection Clause of the Fourteenth Amendment.

The problem here is that the Florida Supreme Court's decision does not provide equal treatment to all voters. Different counties use different standards to determine what counts as a vote. This unequal treatment violates the fundamental principle of equal protection.`
            },
            {
                id: 15,
                title: "District of Columbia v. Heller",
                court: "Supreme Court",
                date: "2008-06-26",
                citation: "554 U.S. 570",
                preview: "The Court held that the Second Amendment protects an individual's right to possess a firearm for self-defense, unconnected with service in a militia.",
                summary: {
                    holding: "The Second Amendment protects an individual right to possess a firearm unconnected with service in a militia, and to use that arm for traditionally lawful purposes, such as self-defense within the home. The District's handgun ban and requirement that firearms in the home be kept nonfunctional violate the Second Amendment.",
                    facts: "Dick Heller, a special police officer in the District of Columbia, applied to register a handgun he wished to keep at home. The District denied his application under a law that prohibited handgun registration. Heller challenged the law as violating the Second Amendment.",
                    issue: "Does the Second Amendment protect an individual's right to own a gun?"
                },
                fullText: `OPINION OF THE COURT

Mr. Justice Scalia delivered the opinion of the Court.

We consider whether a District of Columbia prohibition on the possession of usable handguns in the home violates the Second Amendment to the Constitution.

The Second Amendment provides: "A well regulated Militia, being necessary to the security of a free State, the right of the people to keep and bear Arms, shall not be infringed."

The petitioners and Justice Stevens suggest that the operative clause of the Second Amendment should be read in light of the preamble's reference to the "Militia." According to them, the Amendment protects only the right to possess and carry a firearm when serving in a state militia.

We reject that interpretation. The Amendment's prefatory clause announces a purpose, but does not limit or expand the scope of the operative clause. The operative clause's text and history demonstrate that it connotes an individual right to keep and bear arms.

The District's total ban on handgun possession in the home amounts to a prohibition of an entire class of "arms" that Americans overwhelmingly choose for the lawful purpose of self-defense. Under any of the standards of scrutiny that we have applied to enumerated constitutional rights, banning from the home "the most preferred firearm in the nation to 'keep' and use for protection of one's home and family" would fail constitutional muster.`
            }
        ];

        // State
        let currentCase = null;
        let notes = JSON.parse(localStorage.getItem('vibeLawNotes')) || [];
        let entitiesExtracted = false;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderCases(mockCases);
            renderNotes();
            setupSearch();
        });

        // Search functionality
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase().trim();
            if (!query) {
                renderCases(mockCases);
                return;
            }

            const filtered = mockCases.filter(c => 
                c.title.toLowerCase().includes(query) ||
                c.court.toLowerCase().includes(query) ||
                c.preview.toLowerCase().includes(query) ||
                c.fullText.toLowerCase().includes(query)
            );

            renderCases(filtered);
        }

        // Render case list
        function renderCases(cases) {
            const container = document.getElementById('caseList');
            const countEl = document.getElementById('resultsCount');
            
            countEl.textContent = `${cases.length} case${cases.length !== 1 ? 's' : ''} found`;
            
            if (cases.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üîç</div>
                        <p>No cases found</p>
                        <small>Try a different search term</small>
                    </div>
                `;
                return;
            }

            container.innerHTML = cases.map(c => `
                <div class="case-item ${currentCase && currentCase.id === c.id ? 'active' : ''}" 
                     onclick="selectCase(${c.id})" data-id="${c.id}">
                    <div class="case-title">${c.title}</div>
                    <div class="case-meta">
                        <span class="court-badge">${c.court}</span>
                        <span>üìÖ ${formatDate(c.date)}</span>
                        <span>üìÑ ${c.citation}</span>
                    </div>
                    <div class="case-preview">${c.preview}</div>
                </div>
            `).join('');
        }

        // Select a case
        function selectCase(id) {
            currentCase = mockCases.find(c => c.id === id);
            entitiesExtracted = false;
            
            // Update active state in list
            document.querySelectorAll('.case-item').forEach(el => {
                el.classList.toggle('active', parseInt(el.dataset.id) === id);
            });

            renderDetailView();
            
            // Show note form
            document.getElementById('addNoteForm').style.display = 'block';
            document.getElementById('noteText').value = '';
        }

        // Render detail view
        function renderDetailView() {
            const panel = document.getElementById('detailPanel');
            
            if (!currentCase) {
                panel.innerHTML = `
                    <div class="detail-placeholder">
                        <div class="detail-placeholder-icon">üìú</div>
                        <h2>Select a Case</h2>
                        <p>Click on a case from the list to view details</p>
                    </div>
                `;
                return;
            }

            panel.innerHTML = `
                <div class="detail-content">
                    <div class="detail-header">
                        <div class="detail-title">${currentCase.title}</div>
                        <div class="detail-meta">
                            <span class="court-badge">${currentCase.court}</span>
                            <span>üìÖ ${formatDate(currentCase.date)}</span>
                            <span>üìÑ ${currentCase.citation}</span>
                        </div>
                    </div>
                    
                    <div class="tabs">
                        <button class="tab active" onclick="switchTab('summary')">Summary</button>
                        <button class="tab" onclick="switchTab('fulltext')">Full Text</button>
                    </div>

                    <div class="actions-bar">
                        <button class="btn btn-primary" onclick="extractEntities()">
                            <span>üè∑Ô∏è</span> Extract Entities
                        </button>
                        <button class="btn btn-secondary" onclick="copyToClipboard()">
                            <span>üìã</span> Copy Text
                        </button>
                    </div>

                    <div class="tab-content">
                        <div class="tab-pane active" id="tab-summary">
                            <div class="summary-section">
                                <div class="summary-label">Holding</div>
                                <div class="summary-text">${currentCase.summary.holding}</div>
                            </div>
                            <div class="summary-section">
                                <div class="summary-label">Facts</div>
                                <div class="summary-text">${currentCase.summary.facts}</div>
                            </div>
                            <div class="summary-section">
                                <div class="summary-label">Issue</div>
                                <div class="summary-text">${currentCase.summary.issue}</div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab-fulltext">
                            <div class="full-text" id="fullTextContent">${formatFullText(currentCase.fullText)}</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Switch tabs
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }

        // Extract entities (simulated)
        function extractEntities() {
            if (!currentCase) return;
            
            entitiesExtracted = !entitiesExtracted;
            
            if (entitiesExtracted) {
                const fullTextEl = document.getElementById('fullTextContent');
                let text = currentCase.fullText;
                
                // Extract and highlight names (capitalized words that look like names)
                const namePattern = /\b([A-Z][a-z]+(?:\s+[A-Z][a-z]+){1,2})\s+v\.\s+([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)\b/g;
                text = text.replace(namePattern, '<span class="highlight-name">$&</span>');
                
                // Extract and highlight dates
                const datePattern = /\b((?:January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{1,2},?\s+\d{4})\b/g;
                text = text.replace(datePattern, '<span class="highlight-date">$1</span>');
                
                // Also match YYYY-MM-DD format
                const datePattern2 = /\b(\d{4}-\d{2}-\d{2})\b/g;
                text = text.replace(datePattern2, '<span class="highlight-date">$1</span>');
                
                // Match years
                const yearPattern = /\b(18\d{2}|19\d{2}|20\d{2})\b/g;
                text = text.replace(yearPattern, '<span class="highlight-date">$1</span>');
                
                fullTextEl.innerHTML = formatFullText(text);
            } else {
                document.getElementById('fullTextContent').innerHTML = formatFullText(currentCase.fullText);
            }
        }

        // Format full text
        function formatFullText(text) {
            return text.split('\n\n').map(p => `<p>${p}</p>`).join('');
        }

        // Copy to clipboard
        function copyToClipboard() {
            if (!currentCase) return;
            navigator.clipboard.writeText(currentCase.fullText);
            showToast('Text copied to clipboard!');
        }

        // Notes functionality
        function addNote() {
            const noteText = document.getElementById('noteText').value.trim();
            if (!noteText || !currentCase) return;

            const note = {
                id: Date.now(),
                caseId: currentCase.id,
                caseTitle: currentCase.title,
                text: noteText,
                date: new Date().toISOString()
            };

            notes.unshift(note);
            saveNotes();
            renderNotes();
            document.getElementById('noteText').value = '';
            showToast('Note saved successfully!');
        }

        function deleteNote(id) {
            notes = notes.filter(n => n.id !== id);
            saveNotes();
            renderNotes();
        }

        function saveNotes() {
            localStorage.setItem('vibeLawNotes', JSON.stringify(notes));
        }

        function renderNotes() {
            const container = document.getElementById('notesList');
            const countEl = document.getElementById('notesCount');
            
            countEl.textContent = notes.length;
            
            if (notes.length === 0) {
                container.innerHTML = `
                    <div class="empty-notes">
                        <div class="empty-notes-icon">üìã</div>
                        <p>No notes yet</p>
                        <small>Select a case and add notes</small>
                    </div>
                `;
                return;
            }

            container.innerHTML = notes.map(n => `
                <div class="note-item">
                    <button class="note-delete" onclick="deleteNote(${n.id})">√ó</button>
                    <div class="note-case" title="${n.caseTitle}">üìÑ ${n.caseTitle}</div>
                    <div class="note-text">${n.text}</div>
                    <div class="note-date">${formatDate(n.date)}</div>
                </div>
            `).join('');
        }

        // Utility functions
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>