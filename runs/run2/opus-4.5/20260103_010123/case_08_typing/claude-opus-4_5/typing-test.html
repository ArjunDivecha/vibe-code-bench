<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            max-width: 900px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #1a1a2e;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .stat-box.timer {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            box-shadow: 0 5px 20px rgba(245, 87, 108, 0.4);
        }

        .stat-box.accuracy {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            box-shadow: 0 5px 20px rgba(79, 172, 254, 0.4);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 5px;
        }

        .text-display {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            font-size: 1.3rem;
            line-height: 2;
            border: 3px solid #e9ecef;
            min-height: 150px;
            font-family: 'Courier New', Courier, monospace;
        }

        .char {
            position: relative;
            padding: 2px 0;
        }

        .char.correct {
            color: #28a745;
            background-color: rgba(40, 167, 69, 0.1);
        }

        .char.incorrect {
            color: #dc3545;
            background-color: rgba(220, 53, 69, 0.2);
            text-decoration: underline;
        }

        .char.current {
            border-left: 2px solid #007bff;
            animation: blink 1s infinite;
        }

        .char.untyped {
            color: #6c757d;
        }

        @keyframes blink {
            0%, 50% { border-color: #007bff; }
            51%, 100% { border-color: transparent; }
        }

        .input-area {
            margin-bottom: 25px;
        }

        #typing-input {
            width: 100%;
            padding: 20px;
            font-size: 1.2rem;
            border: 3px solid #667eea;
            border-radius: 15px;
            outline: none;
            transition: all 0.3s ease;
            font-family: 'Courier New', Courier, monospace;
        }

        #typing-input:focus {
            border-color: #764ba2;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        #typing-input:disabled {
            background-color: #e9ecef;
            cursor: not-allowed;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 40px;
            font-size: 1.1rem;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(245, 87, 108, 0.4);
        }

        .results-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .results-modal.show {
            display: flex;
        }

        .results-content {
            background: white;
            padding: 50px;
            border-radius: 25px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .results-content h2 {
            color: #1a1a2e;
            margin-bottom: 30px;
            font-size: 2rem;
        }

        .final-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .final-stat {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }

        .final-stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .final-stat-label {
            color: #666;
            margin-top: 5px;
        }

        .grade {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .grade-text {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
        }

        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
        }

        .mode-btn {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: transparent;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .mode-btn.active {
            background: #667eea;
            color: white;
        }

        .mode-btn:hover {
            background: #667eea;
            color: white;
        }

        .instructions {
            background: #e7f1ff;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            color: #0056b3;
            font-size: 0.95rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚å®Ô∏è Typing Speed Test</h1>
        <p class="subtitle">Test your typing skills and improve your speed!</p>

        <div class="mode-selector">
            <button class="mode-btn active" data-time="30">30 Seconds</button>
            <button class="mode-btn" data-time="60">60 Seconds</button>
            <button class="mode-btn" data-time="120">2 Minutes</button>
        </div>

        <div class="stats-bar">
            <div class="stat-box">
                <div class="stat-value" id="wpm">0</div>
                <div class="stat-label">WPM</div>
            </div>
            <div class="stat-box timer">
                <div class="stat-value" id="timer">30</div>
                <div class="stat-label">Seconds</div>
            </div>
            <div class="stat-box accuracy">
                <div class="stat-value" id="accuracy">100%</div>
                <div class="stat-label">Accuracy</div>
            </div>
        </div>

        <div class="instructions" id="instructions">
            Click on the text box below and start typing to begin the test!
        </div>

        <div class="text-display" id="text-display"></div>

        <div class="input-area">
            <input type="text" id="typing-input" placeholder="Start typing here..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
        </div>

        <div class="buttons">
            <button class="btn-primary" id="restart-btn">üîÑ New Text</button>
            <button class="btn-secondary" id="reset-btn">‚Ü©Ô∏è Reset</button>
        </div>
    </div>

    <div class="results-modal" id="results-modal">
        <div class="results-content">
            <div class="grade" id="grade">üèÜ</div>
            <h2>Test Complete!</h2>
            <p class="grade-text" id="grade-text">Great job!</p>
            <div class="final-stats">
                <div class="final-stat">
                    <div class="final-stat-value" id="final-wpm">0</div>
                    <div class="final-stat-label">Words Per Minute</div>
                </div>
                <div class="final-stat">
                    <div class="final-stat-value" id="final-accuracy">0%</div>
                    <div class="final-stat-label">Accuracy</div>
                </div>
                <div class="final-stat">
                    <div class="final-stat-value" id="final-chars">0</div>
                    <div class="final-stat-label">Characters Typed</div>
                </div>
                <div class="final-stat">
                    <div class="final-stat-value" id="final-errors">0</div>
                    <div class="final-stat-label">Errors</div>
                </div>
            </div>
            <button class="btn-primary" id="try-again-btn">üöÄ Try Again</button>
        </div>
    </div>

    <script>
        const textSamples = [
            "The quick brown fox jumps over the lazy dog. This classic sentence contains every letter of the alphabet and is perfect for typing practice. Focus on accuracy first, then work on building your speed gradually.",
            "Programming is the art of telling a computer what to do through a series of instructions. Good programmers write code that humans can understand, not just machines. Clean code is like good prose.",
            "The ocean waves crashed against the rocky shore as seagulls circled overhead. The salty breeze carried the scent of adventure and possibility. Every sunset brings the promise of a new dawn.",
            "Technology has transformed the way we live, work, and communicate with each other. Smartphones have become extensions of ourselves, connecting us to information and people around the world instantly.",
            "Music has the power to evoke emotions and memories like nothing else can. A single melody can transport you back to a specific moment in time, reminding you of people and places long forgotten.",
            "The art of cooking is both a science and a creative expression. Combining ingredients in the right proportions can create dishes that delight the senses and bring people together around the table.",
            "Space exploration represents humanity's greatest adventure and our insatiable curiosity about the universe. Every discovery we make about distant planets and stars teaches us something about ourselves.",
            "Reading opens doors to new worlds and perspectives that we might never experience otherwise. Books are time machines, allowing us to visit ancient civilizations and imagine future possibilities.",
            "Exercise is not just about physical health but also mental wellbeing. Regular movement releases endorphins that improve mood and reduce stress. Even a short walk can make a big difference.",
            "The mountains stood majestically against the clear blue sky, their snow-capped peaks glistening in the morning sunlight. Nature's grandeur reminds us how small we are in this vast universe."
        ];

        let currentText = "";
        let currentIndex = 0;
        let startTime = null;
        let timerInterval = null;
        let timeLimit = 30;
        let timeRemaining = 30;
        let isTestActive = false;
        let isTestComplete = false;
        let correctChars = 0;
        let totalTyped = 0;
        let errors = 0;

        const textDisplay = document.getElementById('text-display');
        const typingInput = document.getElementById('typing-input');
        const wpmDisplay = document.getElementById('wpm');
        const timerDisplay = document.getElementById('timer');
        const accuracyDisplay = document.getElementById('accuracy');
        const resultsModal = document.getElementById('results-modal');
        const restartBtn = document.getElementById('restart-btn');
        const resetBtn = document.getElementById('reset-btn');
        const tryAgainBtn = document.getElementById('try-again-btn');
        const instructionsEl = document.getElementById('instructions');
        const modeBtns = document.querySelectorAll('.mode-btn');

        function getRandomText() {
            const randomIndex = Math.floor(Math.random() * textSamples.length);
            return textSamples[randomIndex];
        }

        function initializeTest() {
            currentText = getRandomText();
            currentIndex = 0;
            startTime = null;
            timeRemaining = timeLimit;
            isTestActive = false;
            isTestComplete = false;
            correctChars = 0;
            totalTyped = 0;
            errors = 0;

            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }

            typingInput.value = "";
            typingInput.disabled = false;
            wpmDisplay.textContent = "0";
            timerDisplay.textContent = timeLimit;
            accuracyDisplay.textContent = "100%";
            instructionsEl.textContent = "Click on the text box below and start typing to begin the test!";

            renderText();
        }

        function renderText() {
            let html = "";
            for (let i = 0; i < currentText.length; i++) {
                let charClass = "char untyped";
                if (i < currentIndex) {
                    charClass = "char " + (currentText[i] === typingInput.value[i] ? "correct" : "incorrect");
                } else if (i === currentIndex) {
                    charClass = "char current untyped";
                }
                
                let char = currentText[i];
                if (char === " ") {
                    char = "&nbsp;";
                }
                html += `<span class="${charClass}">${char}</span>`;
            }
            textDisplay.innerHTML = html;
        }

        function startTimer() {
            startTime = new Date();
            isTestActive = true;
            instructionsEl.textContent = "Keep typing! Focus on accuracy and speed.";

            timerInterval = setInterval(() => {
                timeRemaining--;
                timerDisplay.textContent = timeRemaining;

                if (timeRemaining <= 0) {
                    endTest();
                }

                updateStats();
            }, 1000);
        }

        function updateStats() {
            if (!startTime) return;

            const timeElapsed = (new Date() - startTime) / 1000 / 60; // in minutes
            const wordsTyped = correctChars / 5; // standard: 5 chars = 1 word
            const wpm = timeElapsed > 0 ? Math.round(wordsTyped / timeElapsed) : 0;
            wpmDisplay.textContent = wpm;

            const accuracy = totalTyped > 0 ? Math.round((correctChars / totalTyped) * 100) : 100;
            accuracyDisplay.textContent = accuracy + "%";
        }

        function endTest() {
            isTestActive = false;
            isTestComplete = true;
            
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }

            typingInput.disabled = true;

            const timeElapsed = (new Date() - startTime) / 1000 / 60;
            const finalWpm = timeElapsed > 0 ? Math.round((correctChars / 5) / timeElapsed) : 0;
            const finalAccuracy = totalTyped > 0 ? Math.round((correctChars / totalTyped) * 100) : 100;

            document.getElementById('final-wpm').textContent = finalWpm;
            document.getElementById('final-accuracy').textContent = finalAccuracy + "%";
            document.getElementById('final-chars').textContent = totalTyped;
            document.getElementById('final-errors').textContent = errors;

            // Determine grade
            let grade, gradeText;
            if (finalWpm >= 80 && finalAccuracy >= 95) {
                grade = "üèÜ";
                gradeText = "Outstanding! You're a typing master!";
            } else if (finalWpm >= 60 && finalAccuracy >= 90) {
                grade = "ü•á";
                gradeText = "Excellent work! Professional level typing!";
            } else if (finalWpm >= 40 && finalAccuracy >= 85) {
                grade = "ü•à";
                gradeText = "Great job! Above average typing speed!";
            } else if (finalWpm >= 25 && finalAccuracy >= 80) {
                grade = "ü•â";
                gradeText = "Good effort! Keep practicing!";
            } else {
                grade = "üí™";
                gradeText = "Nice start! Practice makes perfect!";
            }

            document.getElementById('grade').textContent = grade;
            document.getElementById('grade-text').textContent = gradeText;

            resultsModal.classList.add('show');
        }

        function handleInput(e) {
            if (isTestComplete) return;

            const inputValue = typingInput.value;
            currentIndex = inputValue.length;

            if (!isTestActive && inputValue.length > 0) {
                startTimer();
            }

            // Calculate stats
            correctChars = 0;
            errors = 0;
            for (let i = 0; i < inputValue.length; i++) {
                if (i < currentText.length) {
                    if (inputValue[i] === currentText[i]) {
                        correctChars++;
                    } else {
                        errors++;
                    }
                }
            }
            totalTyped = inputValue.length;

            renderText();
            updateStats();

            // Check if completed all text
            if (inputValue.length >= currentText.length) {
                endTest();
            }
        }

        // Event Listeners
        typingInput.addEventListener('input', handleInput);

        typingInput.addEventListener('paste', (e) => {
            e.preventDefault();
        });

        restartBtn.addEventListener('click', () => {
            initializeTest();
            typingInput.focus();
        });

        resetBtn.addEventListener('click', () => {
            const savedText = currentText;
            initializeTest();
            currentText = savedText;
            renderText();
            typingInput.focus();
        });

        tryAgainBtn.addEventListener('click', () => {
            resultsModal.classList.remove('show');
            initializeTest();
            typingInput.focus();
        });

        modeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                modeBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                timeLimit = parseInt(btn.dataset.time);
                initializeTest();
            });
        });

        // Close modal on outside click
        resultsModal.addEventListener('click', (e) => {
            if (e.target === resultsModal) {
                resultsModal.classList.remove('show');
            }
        });

        // Initialize on load
        initializeTest();
    </script>
</body>
</html>