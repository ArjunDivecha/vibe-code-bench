<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #eee;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            color: #a0a0a0;
            margin-bottom: 30px;
        }

        .stats-bar {
            display: flex;
            gap: 40px;
            margin-bottom: 30px;
            background: rgba(255,255,255,0.1);
            padding: 15px 40px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #a0a0a0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #4cc9f0;
        }

        .stat-value.accuracy {
            color: #4ade80;
        }

        .stat-value.time {
            color: #f472b6;
        }

        .text-container {
            background: rgba(255,255,255,0.05);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            max-width: 800px;
            width: 100%;
            position: relative;
        }

        .text-display {
            font-family: 'Courier New', monospace;
            font-size: 1.3rem;
            line-height: 1.8;
            letter-spacing: 0.5px;
            user-select: none;
        }

        .char {
            padding: 2px 1px;
            border-radius: 3px;
            transition: all 0.1s ease;
        }

        .char.correct {
            color: #4ade80;
            background: rgba(74, 222, 128, 0.1);
        }

        .char.incorrect {
            color: #f87171;
            background: rgba(248, 113, 113, 0.2);
            text-decoration: underline;
        }

        .char.current {
            background: #fbbf24;
            color: #1a1a2e;
            animation: blink 1s infinite;
        }

        .char.pending {
            color: #6b7280;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.7; }
        }

        .input-area {
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
        }

        #textInput {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.1rem;
            font-family: 'Courier New', monospace;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            color: #eee;
            outline: none;
            transition: all 0.3s ease;
        }

        #textInput:focus {
            border-color: #4cc9f0;
            background: rgba(255,255,255,0.15);
        }

        #textInput::placeholder {
            color: #6b7280;
        }

        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 12px 25px;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4cc9f0, #4361ee);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(76, 201, 240, 0.4);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: #eee;
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.2);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 450px;
            width: 90%;
            border: 1px solid rgba(255,255,255,0.1);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal h2 {
            font-size: 2rem;
            margin-bottom: 25px;
            color: #4cc9f0;
        }

        .final-stats {
            margin-bottom: 30px;
        }

        .final-stat {
            margin: 15px 0;
        }

        .final-stat .label {
            color: #a0a0a0;
            font-size: 0.9rem;
        }

        .final-stat .value {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .final-stat.wpm .value { color: #4cc9f0; }
        .final-stat.accuracy .value { color: #4ade80; }
        .final-stat.time .value { color: #f472b6; }

        .message {
            margin: 15px 0;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .message.success {
            background: rgba(74, 222, 128, 0.2);
            color: #4ade80;
        }

        .message.info {
            background: rgba(76, 201, 240, 0.2);
            color: #4cc9f0;
        }

        .timer-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

        .timer-toggle label {
            cursor: pointer;
            color: #a0a0a0;
        }

        .timer-toggle input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>‚å®Ô∏è Typing Speed Test</h1>
    <p class="subtitle">Test your typing skills and improve your speed!</p>

    <div class="stats-bar">
        <div class="stat">
            <div class="stat-label">WPM</div>
            <div class="stat-value" id="wpm">0</div>
        </div>
        <div class="stat">
            <div class="stat-label">Accuracy</div>
            <div class="stat-value accuracy" id="accuracy">100%</div>
        </div>
        <div class="stat">
            <div class="stat-label">Time</div>
            <div class="stat-value time" id="time">0s</div>
        </div>
    </div>

    <div class="text-container">
        <div class="text-display" id="textDisplay"></div>
    </div>

    <div class="input-area">
        <input type="text" id="textInput" placeholder="Start typing here..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
    </div>

    <div class="controls">
        <button class="btn-primary" id="newTextBtn">üìù New Text</button>
        <button class="btn-secondary" id="restartBtn">üîÑ Restart</button>
        <div class="timer-toggle">
            <input type="checkbox" id="timerMode">
            <label for="timerMode">30-second timer mode</label>
        </div>
    </div>

    <div id="message" class="message" style="display: none;"></div>

    <!-- Results Modal -->
    <div class="modal" id="resultsModal">
        <div class="modal-content">
            <h2>üéâ Test Complete!</h2>
            <div class="final-stats">
                <div class="final-stat wpm">
                    <div class="label">Words Per Minute</div>
                    <div class="value" id="finalWpm">0</div>
                </div>
                <div class="final-stat accuracy">
                    <div class="label">Accuracy</div>
                    <div class="value" id="finalAccuracy">0%</div>
                </div>
                <div class="final-stat time">
                    <div class="label">Time</div>
                    <div class="value" id="finalTime">0s</div>
                </div>
            </div>
            <button class="btn-primary" id="tryAgainBtn">Try Again</button>
        </div>
    </div>

    <script>
        // Text samples
        const textSamples = [
            "The quick brown fox jumps over the lazy dog. This classic sentence contains every letter of the alphabet and has been used for typing practice for generations. It is simple yet effective for testing keyboard skills.",
            
            "Programming is the art of telling a computer what to do. It requires patience, logic, and creativity. Good programmers write code that humans can understand, not just machines. Keep practicing and you will improve every day.",
            
            "In the heart of the city, skyscrapers reach for the clouds while busy streets below buzz with activity. People from all walks of life hurry to their destinations, creating a symphony of urban existence that never truly sleeps.",
            
            "The ocean waves crashed against the rocky shore, creating a soothing rhythm that echoed through the coastal town. Seagulls cried overhead as the sun began its descent, painting the sky in brilliant shades of orange and pink.",
            
            "Technology has transformed the way we live, work, and communicate. From smartphones to artificial intelligence, innovations continue to shape our future. Embracing change is essential in this rapidly evolving digital landscape.",
            
            "A journey of a thousand miles begins with a single step. Every expert was once a beginner. Consistent practice and dedication are the keys to mastering any skill. Believe in yourself and never give up on your dreams.",
            
            "The ancient library held secrets from civilizations long forgotten. Dusty tomes lined the shelves, each containing knowledge waiting to be rediscovered. Scholars traveled from distant lands to study its precious collections.",
            
            "Coffee shops have become modern gathering places where ideas are born and friendships are forged. The aroma of freshly brewed beans mingles with conversation, creating an atmosphere of creativity and connection.",
            
            "Mountains stand as silent witnesses to the passage of time. Their peaks pierce the sky while valleys below cradle life in all its forms. Hiking through nature reminds us of the beauty and majesty of our world.",
            
            "Music has the power to transcend language and cultural barriers. A simple melody can evoke memories, stir emotions, and bring people together. Whether classical or contemporary, it speaks to the human soul."
        ];

        // Game state
        let currentText = '';
        let currentIndex = 0;
        let correctChars = 0;
        let totalCharsTyped = 0;
        let startTime = null;
        let timerInterval = null;
        let isTestActive = false;
        let isTimerMode = false;
        const TIMER_DURATION = 30;

        // DOM elements
        const textDisplay = document.getElementById('textDisplay');
        const textInput = document.getElementById('textInput');
        const wpmDisplay = document.getElementById('wpm');
        const accuracyDisplay = document.getElementById('accuracy');
        const timeDisplay = document.getElementById('time');
        const newTextBtn = document.getElementById('newTextBtn');
        const restartBtn = document.getElementById('restartBtn');
        const timerModeCheckbox = document.getElementById('timerMode');
        const resultsModal = document.getElementById('resultsModal');
        const tryAgainBtn = document.getElementById('tryAgainBtn');
        const messageEl = document.getElementById('message');

        // Initialize
        function init() {
            loadRandomText();
            setupEventListeners();
        }

        // Load random text
        function loadRandomText() {
            const randomIndex = Math.floor(Math.random() * textSamples.length);
            currentText = textSamples[randomIndex];
            displayText();
            resetTest();
        }

        // Display text with character spans
        function displayText() {
            textDisplay.innerHTML = currentText.split('').map((char, index) => {
                let className = 'char pending';
                if (index === 0) className = 'char current';
                return `<span class="${className}" data-index="${index}">${char === ' ' ? '&nbsp;' : char}</span>`;
            }).join('');
        }

        // Reset test state
        function resetTest() {
            currentIndex = 0;
            correctChars = 0;
            totalCharsTyped = 0;
            startTime = null;
            isTestActive = false;
            textInput.value = '';
            clearInterval(timerInterval);
            
            wpmDisplay.textContent = '0';
            accuracyDisplay.textContent = '100%';
            timeDisplay.textContent = '0s';
            
            // Reset character display
            const chars = textDisplay.querySelectorAll('.char');
            chars.forEach((char, index) => {
                char.className = index === 0 ? 'char current' : 'char pending';
            });
            
            textInput.disabled = false;
            textInput.focus();
            hideMessage();
        }

        // Setup event listeners
        function setupEventListeners() {
            textInput.addEventListener('input', handleInput);
            newTextBtn.addEventListener('click', loadRandomText);
            restartBtn.addEventListener('click', resetTest);
            timerModeCheckbox.addEventListener('change', (e) => {
                isTimerMode = e.target.checked;
                resetTest();
            });
            tryAgainBtn.addEventListener('click', () => {
                resultsModal.classList.remove('show');
                loadRandomText();
            });

            // Keep focus on input
            document.addEventListener('click', (e) => {
                if (!e.target.closest('button') && !e.target.closest('input[type="checkbox"]')) {
                    textInput.focus();
                }
            });
        }

        // Handle input
        function handleInput(e) {
            const typedText = textInput.value;
            const typedChar = typedText.slice(-1);

            // Start timer on first input
            if (!isTestActive && typedText.length === 1) {
                startTest();
            }

            if (!isTestActive) return;

            // Get current character
            const chars = textDisplay.querySelectorAll('.char');
            
            // Handle backspace
            if (e.inputType === 'deleteContentBackward') {
                if (currentIndex > 0) {
                    chars[currentIndex].classList.remove('current');
                    currentIndex--;
                    chars[currentIndex].classList.remove('correct', 'incorrect');
                    chars[currentIndex].classList.add('current');
                }
                return;
            }

            // Prevent typing beyond text length
            if (currentIndex >= currentText.length) return;

            totalCharsTyped++;
            const expectedChar = currentText[currentIndex];
            const currentCharEl = chars[currentIndex];

            // Check if correct
            if (typedChar === expectedChar) {
                correctChars++;
                currentCharEl.classList.add('correct');
            } else {
                currentCharEl.classList.add('incorrect');
            }

            currentCharEl.classList.remove('current');
            currentIndex++;

            // Move to next character
            if (currentIndex < currentText.length) {
                chars[currentIndex].classList.add('current');
                chars[currentIndex].classList.remove('pending');
            } else {
                // Test complete
                endTest(true);
            }

            // Update stats
            updateStats();
        }

        // Start test
        function startTest() {
            isTestActive = true;
            startTime = Date.now();

            if (isTimerMode) {
                let timeLeft = TIMER_DURATION;
                timerInterval = setInterval(() => {
                    timeLeft--;
                    timeDisplay.textContent = timeLeft + 's';
                    updateStats();

                    if (timeLeft <= 0) {
                        endTest(false);
                    }
                }, 1000);
            } else {
                timerInterval = setInterval(() => {
                    updateStats();
                }, 100);
            }
        }

        // Update statistics
        function updateStats() {
            if (!startTime) return;

            const elapsed = isTimerMode 
                ? TIMER_DURATION - parseInt(timeDisplay.textContent)
                : (Date.now() - startTime) / 1000;

            timeDisplay.textContent = Math.floor(elapsed) + 's';

            // Calculate WPM (words per minute)
            // Standard: 5 characters = 1 word
            const minutes = elapsed / 60;
            const wpm = minutes > 0 ? Math.round((correctChars / 5) / minutes) : 0;
            wpmDisplay.textContent = wpm;

            // Calculate accuracy
            const accuracy = totalCharsTyped > 0 
                ? Math.round((correctChars / totalCharsTyped) * 100) 
                : 100;
            accuracyDisplay.textContent = accuracy + '%';
        }

        // End test
        function endTest(completed) {
            isTestActive = false;
            clearInterval(timerInterval);
            textInput.disabled = true;

            const elapsed = isTimerMode 
                ? TIMER_DURATION 
                : (Date.now() - startTime) / 1000;

            const minutes = elapsed / 60;
            const wpm = minutes > 0 ? Math.round((correctChars / 5) / minutes) : 0;
            const accuracy = totalCharsTyped > 0 
                ? Math.round((correctChars / totalCharsTyped) * 100) 
                : 100;

            // Show modal
            document.getElementById('finalWpm').textContent = wpm;
            document.getElementById('finalAccuracy').textContent = accuracy + '%';
            document.getElementById('finalTime').textContent = Math.floor(elapsed) + 's';
            
            // Add message based on performance
            let message = '';
            if (completed) {
                message = "üèÜ Great job! You completed the text!";
            } else {
                message = "‚è±Ô∏è Time's up! Keep practicing!";
            }
            
            resultsModal.classList.add('show');
        }

        // Show message
        function showMessage(text, type = 'info') {
            messageEl.textContent = text;
            messageEl.className = `message ${type}`;
            messageEl.style.display = 'block';
        }

        // Hide message
        function hideMessage() {
            messageEl.style.display = 'none';
        }

        // Start the app
        init();
    </script>
</body>
</html>