<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Stopwatch & Timer</title>
    <style>
        :root {
            --bg-color: #0f0f0f;
            --panel-color: #1a1a1a;
            --accent-color: #00ff41;
            --text-color: #ffffff;
            --dim-text: #888;
            --danger: #ff4444;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            background: var(--panel-color);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
            width: 350px;
            text-align: center;
            border: 1px solid #333;
        }

        .mode-toggle {
            display: flex;
            margin-bottom: 2rem;
            background: #000;
            border-radius: 25px;
            padding: 5px;
        }

        .mode-btn {
            flex: 1;
            padding: 10px;
            border: none;
            background: transparent;
            color: var(--dim-text);
            cursor: pointer;
            border-radius: 20px;
            transition: 0.3s;
            font-weight: bold;
        }

        .mode-btn.active {
            background: var(--accent-color);
            color: #000;
        }

        .display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--accent-color);
            text-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
            margin: 1rem 0;
            font-variant-numeric: tabular-nums;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 1.5rem;
        }

        button {
            padding: 12px;
            border: 1px solid #444;
            border-radius: 5px;
            background: #222;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
            transition: 0.2s;
        }

        button:hover {
            background: #333;
        }

        button:active {
            transform: scale(0.98);
        }

        .btn-start { border-color: var(--accent-color); color: var(--accent-color); }
        .btn-stop { border-color: var(--danger); color: var(--danger); }

        .input-group {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 1rem;
        }

        .input-group input {
            width: 50px;
            background: #000;
            border: 1px solid #444;
            color: var(--accent-color);
            padding: 5px;
            text-align: center;
            font-size: 1.2rem;
        }

        .laps-container {
            margin-top: 1.5rem;
            max-height: 150px;
            overflow-y: auto;
            border-top: 1px solid #333;
            padding-top: 10px;
        }

        .lap-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            font-size: 0.9rem;
            color: var(--dim-text);
        }

        .hidden { display: none; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: #111; }
        ::-webkit-scrollbar-thumb { background: #333; }
    </style>
</head>
<body>

    <div class="container">
        <div class="mode-toggle">
            <button id="swMode" class="mode-btn active" onclick="switchMode('stopwatch')">STOPWATCH</button>
            <button id="tmMode" class="mode-btn" onclick="switchMode('timer')">TIMER</button>
        </div>

        <!-- Stopwatch Display -->
        <div id="stopwatchSection">
            <div id="swDisplay" class="display">00:00:00.00</div>
            <div class="controls">
                <button id="swStart" class="btn-start" onclick="startStopwatch()">START</button>
                <button id="swStop" class="btn-stop hidden" onclick="stopStopwatch()">STOP</button>
                <button id="swLap" onclick="recordLap()">LAP</button>
                <button id="swReset" onclick="resetStopwatch()">RESET</button>
            </div>
            <div id="laps" class="laps-container"></div>
        </div>

        <!-- Timer Display -->
        <div id="timerSection" class="hidden">
            <div class="input-group" id="timerInputs">
                <input type="number" id="tmH" placeholder="HH" min="0" max="99" value="00">
                <input type="number" id="tmM" placeholder="MM" min="0" max="59" value="00">
                <input type="number" id="tmS" placeholder="SS" min="0" max="59" value="00">
            </div>
            <div id="tmDisplay" class="display hidden">00:00:00</div>
            <div class="controls">
                <button id="tmStart" class="btn-start" onclick="startTimer()">START</button>
                <button id="tmPause" class="hidden" onclick="pauseTimer()">PAUSE</button>
                <button id="tmReset" onclick="resetTimer()">RESET</button>
            </div>
        </div>
    </div>

    <!-- Audio for timer end (Beep) -->
    <audio id="beep">
        <source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" type="audio/ogg">
    </audio>

    <script>
        // --- State Management ---
        let currentMode = 'stopwatch';
        
        // Stopwatch variables
        let swInterval;
        let swStartTime;
        let swElapsedTime = 0;
        let laps = [];

        // Timer variables
        let tmInterval;
        let tmRemainingTime = 0;
        let tmIsPaused = false;

        // --- Core UI Logic ---
        function switchMode(mode) {
            currentMode = mode;
            document.getElementById('swMode').classList.toggle('active', mode === 'stopwatch');
            document.getElementById('tmMode').classList.toggle('active', mode === 'timer');
            
            document.getElementById('stopwatchSection').classList.toggle('hidden', mode !== 'stopwatch');
            document.getElementById('timerSection').classList.toggle('hidden', mode !== 'timer');
        }

        function formatTime(ms, includeMs = true) {
            let hours = Math.floor(ms / 3600000);
            let mins = Math.floor((ms % 3600000) / 60000);
            let secs = Math.floor((ms % 60000) / 1000);
            let centis = Math.floor((ms % 1000) / 10);

            let res = 
                String(hours).padStart(2, '0') + ":" +
                String(mins).padStart(2, '0') + ":" +
                String(secs).padStart(2, '0');
            
            if (includeMs) {
                res += "." + String(centis).padStart(2, '0');
            }
            return res;
        }

        // --- Stopwatch Logic ---
        function startStopwatch() {
            swStartTime = Date.now() - swElapsedTime;
            swInterval = setInterval(() => {
                swElapsedTime = Date.now() - swStartTime;
                document.getElementById('swDisplay').innerText = formatTime(swElapsedTime);
            }, 10);
            
            document.getElementById('swStart').classList.add('hidden');
            document.getElementById('swStop').classList.remove('hidden');
        }

        function stopStopwatch() {
            clearInterval(swInterval);
            document.getElementById('swStart').classList.remove('hidden');
            document.getElementById('swStop').classList.add('hidden');
        }

        function resetStopwatch() {
            stopStopwatch();
            swElapsedTime = 0;
            laps = [];
            document.getElementById('swDisplay').innerText = "00:00:00.00";
            document.getElementById('laps').innerHTML = "";
        }

        function recordLap() {
            if (swElapsedTime === 0) return;
            laps.push(swElapsedTime);
            const lapDiv = document.createElement('div');
            lapDiv.className = 'lap-item';
            lapDiv.innerHTML = `<span>Lap ${laps.length}</span> <span>${formatTime(swElapsedTime)}</span>`;
            const lapsList = document.getElementById('laps');
            lapsList.insertBefore(lapDiv, lapsList.firstChild);
        }

        // --- Timer Logic ---
        function startTimer() {
            if (!tmIsPaused) {
                const h = parseInt(document.getElementById('tmH').value) || 0;
                const m = parseInt(document.getElementById('tmM').value) || 0;
                const s = parseInt(document.getElementById('tmS').value) || 0;
                tmRemainingTime = (h * 3600 + m * 60 + s) * 1000;
            }

            if (tmRemainingTime <= 0) return;

            document.getElementById('timerInputs').classList.add('hidden');
            document.getElementById('tmDisplay').classList.remove('hidden');
            document.getElementById('tmStart').classList.add('hidden');
            document.getElementById('tmPause').classList.remove('hidden');
            
            tmIsPaused = false;
            let lastTick = Date.now();

            tmInterval = setInterval(() => {
                const now = Date.now();
                const delta = now - lastTick;
                lastTick = now;
                
                tmRemainingTime -= delta;

                if (tmRemainingTime <= 0) {
                    tmRemainingTime = 0;
                    clearInterval(tmInterval);
                    document.getElementById('beep').play().catch(e => console.log("Audio play blocked"));
                    alert("Timer Finished!");
                    resetTimer();
                }
                
                document.getElementById('tmDisplay').innerText = formatTime(tmRemainingTime, false);
            }, 100);
        }

        function pauseTimer() {
            clearInterval(tmInterval);
            tmIsPaused = true;
            document.getElementById('tmStart').classList.remove('hidden');
            document.getElementById('tmPause').classList.add('hidden');
            document.getElementById('tmStart').innerText = "RESUME";
        }

        function resetTimer() {
            clearInterval(tmInterval);
            tmRemainingTime = 0;
            tmIsPaused = false;
            document.getElementById('timerInputs').classList.remove('hidden');
            document.getElementById('tmDisplay').classList.add('hidden');
            document.getElementById('tmStart').classList.remove('hidden');
            document.getElementById('tmPause').classList.add('hidden');
            document.getElementById('tmStart').innerText = "START";
            
            document.getElementById('tmH').value = "00";
            document.getElementById('tmM').value = "00";
            document.getElementById('tmS').value = "00";
        }
    </script>
</body>
</html>