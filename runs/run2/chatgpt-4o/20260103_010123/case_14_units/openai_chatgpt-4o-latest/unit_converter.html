<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Unit Converter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f9f9f9;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      text-align: center;
    }
    select, input, button {
      padding: 10px;
      margin: 5px 0;
      font-size: 1em;
      width: 100%;
    }
    .row {
      display: flex;
      gap: 10px;
    }
    .row > div {
      flex: 1;
    }
    .swap-btn {
      text-align: center;
      margin: 10px 0;
    }
    .formula {
      margin-top: 10px;
      font-style: italic;
      color: #555;
    }
    .quick-buttons {
      margin-top: 20px;
    }
    .quick-buttons button {
      margin: 5px;
      padding: 10px;
      font-size: 0.9em;
    }
    @media (max-width: 500px) {
      .row {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <h1>Unit Converter</h1>

  <label for="category">Category:</label>
  <select id="category">
    <option value="length">Length</option>
    <option value="weight">Weight</option>
    <option value="temperature">Temperature</option>
    <option value="volume">Volume</option>
    <option value="time">Time</option>
  </select>

  <div class="row">
    <div>
      <label for="fromValue">From:</label>
      <input type="number" id="fromValue" placeholder="Enter value">
    </div>
    <div>
      <label for="toValue">To:</label>
      <input type="number" id="toValue" placeholder="Converted value">
    </div>
  </div>

  <div class="row">
    <div>
      <label for="fromUnit">From Unit:</label>
      <select id="fromUnit"></select>
    </div>
    <div>
      <label for="toUnit">To Unit:</label>
      <select id="toUnit"></select>
    </div>
  </div>

  <div class="swap-btn">
    <button onclick="swapUnits()">Swap Units</button>
  </div>

  <div class="formula" id="formulaDisplay"></div>

  <div class="quick-buttons" id="quickButtons">
    <strong>Quick Conversions:</strong><br>
  </div>

  <script>
    const units = {
      length: {
        base: 'm',
        units: {
          km: 1000,
          m: 1,
          cm: 0.01,
          mm: 0.001,
          miles: 1609.34,
          feet: 0.3048,
          inches: 0.0254,
        }
      },
      weight: {
        base: 'g',
        units: {
          kg: 1000,
          g: 1,
          lb: 453.592,
          oz: 28.3495,
        }
      },
      temperature: {
        units: ['C', 'F', 'K']
      },
      volume: {
        base: 'L',
        units: {
          L: 1,
          mL: 0.001,
          gallons: 3.78541,
          cups: 0.24,
        }
      },
      time: {
        base: 's',
        units: {
          hours: 3600,
          minutes: 60,
          seconds: 1,
        }
      }
    };

    const categorySelect = document.getElementById('category');
    const fromUnitSelect = document.getElementById('fromUnit');
    const toUnitSelect = document.getElementById('toUnit');
    const fromValueInput = document.getElementById('fromValue');
    const toValueInput = document.getElementById('toValue');
    const formulaDisplay = document.getElementById('formulaDisplay');
    const quickButtons = document.getElementById('quickButtons');

    let updating = false;

    function populateUnits(category) {
      fromUnitSelect.innerHTML = '';
      toUnitSelect.innerHTML = '';
      let unitList = [];

      if (category === 'temperature') {
        unitList = units[category].units;
      } else {
        unitList = Object.keys(units[category].units);
      }

      unitList.forEach(unit => {
        const opt1 = document.createElement('option');
        opt1.value = unit;
        opt1.textContent = unit;
        fromUnitSelect.appendChild(opt1);

        const opt2 = document.createElement('option');
        opt2.value = unit;
        opt2.textContent = unit;
        toUnitSelect.appendChild(opt2);
      });

      fromUnitSelect.value = unitList[0];
      toUnitSelect.value = unitList[1] || unitList[0];
      updateConversion();
      populateQuickButtons(category);
    }

    function convertTemperature(value, from, to) {
      let intermediateC;
      if (from === to) return value;
      if (from === 'C') {
        intermediateC = value;
      } else if (from === 'F') {
        intermediateC = (value - 32) * 5/9;
      } else if (from === 'K') {
        intermediateC = value - 273.15;
      }

      let result;
      if (to === 'C') {
        result = intermediateC;
      } else if (to === 'F') {
        result = intermediateC * 9/5 + 32;
      } else if (to === 'K') {
        result = intermediateC + 273.15;
      }

      return result;
    }

    function updateConversion(fromInput = true) {
      if (updating) return;
      updating = true;

      const category = categorySelect.value;
      const fromUnit = fromUnitSelect.value;
      const toUnit = toUnitSelect.value;
      let fromVal = parseFloat(fromValueInput.value);
      let toVal = parseFloat(toValueInput.value);
      let formula = '';

      if (isNaN(fromVal) && isNaN(toVal)) {
        updating = false;
        return;
      }

      if (category === 'temperature') {
        if (fromInput) {
          const result = convertTemperature(fromVal, fromUnit, toUnit);
          toValueInput.value = +result.toFixed(4);
          formula = `(${fromVal}°${fromUnit} → ${toUnit})`;
        } else {
          const result = convertTemperature(toVal, toUnit, fromUnit);
          fromValueInput.value = +result.toFixed(4);
          formula = `(${toVal}°${toUnit} → ${fromUnit})`;
        }
      } else {
        const factorFrom = units[category].units[fromUnit];
        const factorTo = units[category].units[toUnit];
        if (fromInput) {
          const valueInBase = fromVal * factorFrom;
          const result = valueInBase / factorTo;
          toValueInput.value = +result.toFixed(6);
          formula = `${fromVal} ${fromUnit} × (${factorFrom}/${factorTo}) = ${result} ${toUnit}`;
        } else {
          const valueInBase = toVal * factorTo;
          const result = valueInBase / factorFrom;
          fromValueInput.value = +result.toFixed(6);
          formula = `${toVal} ${toUnit} × (${factorTo}/${factorFrom}) = ${result} ${fromUnit}`;
        }
      }

      formulaDisplay.textContent = formula;
      updating = false;
    }

    function swapUnits() {
      const temp = fromUnitSelect.value;
      fromUnitSelect.value = toUnitSelect.value;
      toUnitSelect.value = temp;
      updateConversion();
    }

    function populateQuickButtons(category) {
      quickButtons.innerHTML = '<strong>Quick Conversions:</strong><br>';
      const examples = {
        length: [ ['1', 'km', 'm'], ['12', 'inches', 'cm'], ['1000', 'mm', 'm'] ],
        weight: [ ['1', 'kg', 'lb'], ['16', 'oz', 'g'], ['2.2', 'lb', 'kg'] ],
        temperature: [ ['0', 'C', 'F'], ['32', 'F', 'C'], ['100', 'C', 'K'] ],
        volume: [ ['1', 'L', 'mL'], ['2', 'gallons', 'L'], ['1', 'cup', 'mL'] ],
        time: [ ['1', 'hours', 'minutes'], ['60', 'minutes', 'seconds'], ['120', 'seconds', 'minutes'] ]
      };

      if (examples[category]) {
        examples[category].forEach(([val, fromU, toU]) => {
          const btn = document.createElement('button');
          btn.textContent = `${val} ${fromU} → ${toU}`;
          btn.onclick = () => {
            fromValueInput.value = val;
            fromUnitSelect.value = fromU;
            toUnitSelect.value = toU;
            updateConversion(true);
          };
          quickButtons.appendChild(btn);
        });
      }
    }

    categorySelect.addEventListener('change', () => {
      populateUnits(categorySelect.value);
    });

    fromValueInput.addEventListener('input', () => updateConversion(true));
    toValueInput.addEventListener('input', () => updateConversion(false));
    fromUnitSelect.addEventListener('change', () => updateConversion(true));
    toUnitSelect.addEventListener('change', () => updateConversion(true));

    // Initialize
    populateUnits(categorySelect.value);
  </script>
</body>
</html>