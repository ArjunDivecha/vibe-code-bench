<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Palette Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        .palette {
            display: flex;
            justify-content: space-around;
            padding: 20px;
        }
        .color {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-block;
            margin: 5px;
            cursor: pointer;
        }
        .color.locked {
            opacity: 0.5;
        }
        .color.locked:hover {
            opacity: 0.5;
        }
        .color:hover {
            border: 2px solid #333;
        }
        .color.locked:hover {
            border: 2px solid #333;
        }
        .color.info {
            position: absolute;
            background-color: #333;
            color: #fff;
            border-radius: 5px;
            padding: 5px;
            font-size: 12px;
            display: none;
        }
        .color.info.show {
            display: block;
        }
        #palette {
            width: 80%;
            margin: 40px auto;
        }
        #name {
            font-size: 24px;
            text-align: center;
            margin-bottom: 20px;
        }
        #hex {
            font-size: 18px;
            text-align: center;
            margin-bottom: 20px;
        }
        #rgb {
            font-size: 18px;
            text-align: center;
            margin-bottom: 20px;
        }
        #suggestions {
            font-size: 18px;
            text-align: center;
            margin-bottom: 20px;
        }
        #spacebar {
            font-size: 24px;
            text-align: center;
            margin-bottom: 20px;
        }
    </style>
    <script>
        // Get elements
        let palette = document.getElementById('palette');
        let locked = document.getElementById('locked');
        let colors = document.querySelectorAll('.color');
        let hex = document.getElementById('hex');
        let rgb = document.getElementById('rgb');
        let name = document.getElementById('name');
        let suggestions = document.getElementById('suggestions');
        let spacebar = document.getElementById('spacebar');
        
        // Generate palette
        function generatePalette() {
            let lockedColors = JSON.parse(localStorage.getItem('locked')) || [];
            let palette = [];
            for (let i = 0; i < 5; i++) {
                let color = getRandomColor();
                while (lockedColors.includes(color)) {
                    color = getRandomColor();
                }
                palette.push(color);
            }
            return palette;
        }
        
        // Generate random color
        function getRandomColor() {
            let r = Math.floor(Math.random() * 256);
            let g = Math.floor(Math.random() * 256);
            let b = Math.floor(Math.random() * 256);
            return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
        }
        
        // Generate name suggestions
        function getNameSuggestions(color) {
            return [
                `Bright ${Math.floor(Math.random() * 10)}%`,
                `Deep ${Math.floor(Math.random() * 10)}%`,
                `Muted ${Math.floor(Math.random() * 10)}%`,
                `Vibrant ${Math.floor(Math.random() * 10)}%`,
                `Earthy ${Math.floor(Math.random() * 10)}%`
            ];
        }
        
        // Create palette
        function createPalette(palette) {
            palette.innerHTML = '';
            for (let i = 0; i < palette.length; i++) {
                let color = palette[i];
                let colorDiv = document.createElement('div');
                colorDiv.className = 'color';
                colorDiv.style.background = color;
                colorDiv.addEventListener('click', () => {
                    let locked = document.querySelectorAll('.color.locked');
                    if (locked.length > 0) {
                        let lockedColors = JSON.parse(localStorage.getItem('locked')) || [];
                        let lockedIds = locked.map(color => color.id);
                        if (!lockedIds.includes(colorDiv.id)) {
                            lockedColors.push(color);
                            localStorage.setItem('locked', JSON.stringify(lockedColors));
                            colorDiv.classList.add('locked');
                        } else {
                            lockedColors.splice(lockedColors.indexOf(colorDiv.id), 1);
                            localStorage.setItem('locked', JSON.stringify(lockedColors));
                            colorDiv.classList.remove('locked');
                        }
                    } else {
                        let lockedColors = JSON.parse(localStorage.getItem('locked')) || [];
                        lockedColors.push(color);
                        localStorage.setItem('locked', JSON.stringify(lockedColors));
                        colorDiv.classList.add('locked');
                    }
                });
                let colorInfo = document.createElement('div');
                colorInfo.className = 'color.info';
                colorInfo.id = color;
                colorInfo.innerHTML = `
                    <span id="hex">${color}</span>
                    <span id="rgb">${rgbToHex(rgbFromHex(color))}</span>
                    <span id="name">${getNameSuggestions(color)[Math.floor(Math.random() * getNameSuggestions(color).length)]}</span>
                `;
                colorInfo.addEventListener('click', () => {
                    navigator.clipboard.writeText(color);
                    alert('Copied to clipboard!');
                });
                colorDiv.appendChild(colorInfo);
                palette.appendChild(colorDiv);
            }
        }
        
        // Get saved palette
        function getSavedPalette() {
            let locked = JSON.parse(localStorage.getItem('locked')) || [];
            let palette = generatePalette();
            for (let color of locked) {
                let colorIndex = palette.indexOf(color);
                if (colorIndex !== -1) {
                    palette.splice(colorIndex, 1);
                    palette.unshift(color);
                }
            }
            return palette;
        }
        
        // Create initial palette
        let savedPalette = getSavedPalette();
        createPalette(savedPalette);
        
        // Event listener for spacebar
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ') {
                savedPalette = getSavedPalette();
                createPalette(savedPalette);
            }
        });
        
        // Update color codes and name on click
        colors.forEach(color => {
            color.addEventListener('click', () => {
                let locked = document.querySelectorAll('.color.locked');
                if (locked.length > 0) {
                    let lockedColors = JSON.parse(localStorage.getItem('locked')) || [];
                    let lockedIds = locked.map(color => color.id);
                    if (!lockedIds.includes(color.id)) {
                        lockedColors.push(color.id);
                        localStorage.setItem('locked', JSON.stringify(lockedColors));
                        color.classList.add('locked');
                    } else {
                        lockedColors.splice(lockedColors.indexOf(color.id), 1);
                        localStorage.setItem('locked', JSON.stringify(lockedColors));
                        color.classList.remove('locked');
                    }
                } else {
                    let lockedColors = JSON.parse(localStorage.getItem('locked')) || [];
                    lockedColors.push(color.id);
                    localStorage.setItem('locked', JSON.stringify(lockedColors));
                    color.classList.add('locked');
                }
                let colorInfo = color.children[0];
                let colorHex = colorInfo.children[0].innerHTML;
                let colorRgb = colorInfo.children[1].innerHTML;
                let colorName = colorInfo.children[2].innerHTML;
                if (color.classList.contains('locked')) {
                    colorInfo.classList.add('show');
                } else {
                    colorInfo.classList.remove('show');
                }
                hex.innerHTML = colorHex;
                rgb.innerHTML = colorRgb;
                name.innerHTML = colorName;
            });
        });
        
        // Function to convert rgb to hex
        function rgbToHex(rgb) {
            let r = parseInt(rgb[0]);
            let g = parseInt(rgb[1]);
            let b = parseInt(rgb[2]);
            return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
        }
        
        // Function to convert hex to rgb
        function hexToRgb(hex) {
            let r = parseInt(hex.slice(1, 3), 16);
            let g = parseInt(hex.slice(3, 5), 16);
            let b = parseInt(hex.slice(5, 7), 16);
            return [r, g, b];
        }
        
        // Function to convert hex to rgb string
        function rgbFromHex(hex) {
            let rgb = hexToRgb(hex);
            return rgb.join(',');
        }
    </script>
</head>
<body>
    <div id="palette"></div>
    <div id="name"></div>
    <div id="hex"></div>
    <div id="rgb"></div>
    <div id="suggestions"></div>
    <div id="spacebar">Press spacebar to generate new palette</div>
</body>
</html>