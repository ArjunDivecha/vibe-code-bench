<!DOCTYPE html>
<html>
<head>
  <title>Typing Speed Test</title>
  <style>
    body {
      font-family: monospace;
    }
    #text {
      width: 80%;
      height: 100px;
    }
    #input {
      width: 80%;
      height: 50px;
    }
    #stats {
      position: absolute;
      top: 10px;
      right: 10px;
    }
  </style>
</head>
<body>
  <h1>Typing Speed Test</h1>
  <div id="stats">
    <p>WPM: <span id="wpm">0</span></p>
    <p>Accuracy: <span id="accuracy">0%</span></p>
    <p>Time: <span id="time">0</span></p>
  </div>
  <div id="text">
    <p id="text-content"></p>
    <textarea id="input" rows="10" cols="50"></textarea>
  </div>
  <button id="start-btn">Start Typing</button>
  <button id="try-again-btn" style="display: none;">Try Again</button>
  <div id="results" style="display: none;">
    <h2>Results</h2>
    <p>Time: <span id="time-taken">0</span></p>
    <p>Accuracy: <span id="accuracy-taken">0%</span></p>
    <p>WPM: <span id="wpm-taken">0</span></p>
  </div>

  <script>
    const texts = [
      "The quick brown fox jumps over the lazy dog",
      "Jackdaws love my big sphinx of quartz",
      "How vexingly quick daft zebras jump!",
      "Bright vixens jump; dozy fowl quack",
      "Pack my box with five dozen liquor jugs",
      "How quickly gazelles jump over lazy zorses",
      "Quick wits can't jump over lazy foxes",
      "Bright-eyed little zebras jump over zebras",
      "Pack my box with five dozen liquor and jugs",
      "How quickly dozy foxes jump over zebras"
    ];
    let currentText = "";
    let startTime = 0;
    let timeTaken = 0;
    let correctCount = 0;
    let incorrectCount = 0;

    document.getElementById("start-btn").addEventListener("click", () => {
      currentText = texts[Math.floor(Math.random() * texts.length)];
      document.getElementById("text-content").innerText = currentText;
      document.getElementById("input").value = "";
      startTime = new Date().getTime();
      document.getElementById("start-btn").style.display = "none";
      document.getElementById("try-again-btn").style.display = "block";
      document.getElementById("stats").style.display = "block";
      document.getElementById("results").style.display = "none";
      document.getElementById("time").innerText = "30";
      document.getElementById("time-taken").innerText = "30";
      timeTaken = 30;
      correctCount = 0;
      incorrectCount = 0;
      document.getElementById("input").addEventListener("input", updateStats);
    });

    document.getElementById("try-again-btn").addEventListener("click", () => {
      document.getElementById("text-content").innerText = "";
      document.getElementById("input").value = "";
      document.getElementById("start-btn").style.display = "block";
      document.getElementById("try-again-btn").style.display = "none";
      document.getElementById("stats").style.display = "none";
      document.getElementById("results").style.display = "none";
      document.getElementById("input").removeEventListener("input", updateStats);
    });

    function updateStats() {
      const input = document.getElementById("input").value;
      const currentTime = new Date().getTime();
      const elapsed = (currentTime - startTime) / 1000;
      const timeLeft = timeTaken - Math.floor(elapsed);
      const wpm = Math.floor(1000 * (correctCount / elapsed) / 5);
      const accuracy = Math.floor((correctCount / (correctCount + incorrectCount)) * 100);
      document.getElementById("wpm").innerText = wpm;
      document.getElementById("accuracy").innerText = accuracy + "%";
      document.getElementById("time").innerText = timeLeft;
      document.getElementById("text-content").style.color = "red";
      for (let i = 0; i < input.length; i++) {
        if (input[i] === currentText[i]) {
          document.getElementById("text-content").style.color = "black";
          document.getElementById("text-content").style.background = "";
          document.getElementById("input").style.color = "black";
        } else {
          document.getElementById("text-content").style.color = "red";
          document.getElementById("text-content").style.background = "";
          document.getElementById("input").style.color = "red";
        }
      }
      if (elapsed >= timeTaken) {
        document.getElementById("input").removeEventListener("input", updateStats);
        document.getElementById("try-again-btn").click();
        const results = {
          timeTaken: Math.floor(elapsed),
          accuracy: accuracy,
          wpm: wpm
        };
        document.getElementById("results").style.display = "block";
        document.getElementById("time-taken").innerText = results.timeTaken;
        document.getElementById("accuracy-taken").innerText = results.accuracy + "%";
        document.getElementById("wpm-taken").innerText = results.wpm;
      }
    }
  </script>
</body>
</html>