<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Stopwatch & Timer</title>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --accent-color: #00ff88;
            --text-color: #ffffff;
            --secondary-text: #b0b0b0;
            --danger: #ff4444;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .container {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            width: 350px;
            text-align: center;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #333;
        }

        .tab {
            flex: 1;
            padding: 10px;
            cursor: pointer;
            color: var(--secondary-text);
            transition: 0.3s;
        }

        .tab.active {
            color: var(--accent-color);
            border-bottom: 2px solid var(--accent-color);
        }

        .display {
            font-size: 3rem;
            font-weight: bold;
            margin: 20px 0;
            color: var(--accent-color);
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 12px;
            border: none;
            border-radius: 5px;
            background: #333;
            color: white;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            transition: opacity 0.2s;
        }

        button:hover {
            opacity: 0.8;
        }

        button.primary { background-color: #2e7d32; }
        button.stop { background-color: #c62828; }
        button.reset { background-color: #424242; }
        button.lap { background-color: #1565c0; }

        .inputs {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 20px;
        }

        .inputs input {
            width: 50px;
            background: #000;
            border: 1px solid #444;
            color: var(--accent-color);
            font-size: 1.2rem;
            text-align: center;
            padding: 5px;
        }

        .list-container {
            max-height: 150px;
            overflow-y: auto;
            margin-top: 15px;
            border-top: 1px solid #333;
            padding-top: 10px;
            text-align: left;
            font-size: 0.9rem;
        }

        .lap-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #222;
        }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div class="tabs">
        <div id="tab-stopwatch" class="tab active" onclick="switchMode('stopwatch')">STOPWATCH</div>
        <div id="tab-timer" class="tab" onclick="switchMode('timer')">TIMER</div>
    </div>

    <!-- Stopwatch Section -->
    <div id="stopwatch-ui">
        <div id="sw-display" class="display">00:00:00.00</div>
        <div class="controls">
            <button id="sw-start" class="primary" onclick="startStopwatch()">Start</button>
            <button id="sw-stop" class="stop hidden" onclick="stopStopwatch()">Stop</button>
            <button onclick="lapStopwatch()" class="lap">Lap</button>
            <button onclick="resetStopwatch()" class="reset">Reset</button>
        </div>
        <div class="list-container" id="laps"></div>
    </div>

    <!-- Timer Section -->
    <div id="timer-ui" class="hidden">
        <div id="tm-display" class="display">00:00:00</div>
        <div class="inputs" id="timer-inputs">
            <input type="number" id="tm-h" placeholder="HH" min="0" max="99" value="0">
            <input type="number" id="tm-m" placeholder="MM" min="0" max="59" value="0">
            <input type="number" id="tm-s" placeholder="SS" min="0" max="59" value="0">
        </div>
        <div class="controls">
            <button id="tm-start" class="primary" onclick="startTimer()">Start</button>
            <button id="tm-pause" class="stop hidden" onclick="pauseTimer()">Pause</button>
            <button onclick="resetTimer()" class="reset">Reset</button>
        </div>
    </div>
</div>

<script>
    // Global State
    let swInterval, tmInterval;
    let swStartTime, swElapsedTime = 0;
    let tmRemainingTime = 0;
    let swRunning = false;
    let tmRunning = false;

    // Utility: Format Time
    function formatTime(ms, includeMs = true) {
        let h = Math.floor(ms / 3600000);
        let m = Math.floor((ms % 3600000) / 60000);
        let s = Math.floor((ms % 60000) / 1000);
        let mil = Math.floor((ms % 1000) / 10);

        let res = `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
        if (includeMs) res += `.${String(mil).padStart(2, '0')}`;
        return res;
    }

    // Tab Switching
    function switchMode(mode) {
        document.getElementById('stopwatch-ui').classList.toggle('hidden', mode !== 'stopwatch');
        document.getElementById('timer-ui').classList.toggle('hidden', mode !== 'timer');
        document.getElementById('tab-stopwatch').classList.toggle('active', mode === 'stopwatch');
        document.getElementById('tab-timer').classList.toggle('active', mode === 'timer');
    }

    // --- Stopwatch Logic ---
    function startStopwatch() {
        if (!swRunning) {
            swRunning = true;
            swStartTime = Date.now() - swElapsedTime;
            swInterval = setInterval(updateStopwatch, 10);
            document.getElementById('sw-start').classList.add('hidden');
            document.getElementById('sw-stop').classList.remove('hidden');
        }
    }

    function stopStopwatch() {
        swRunning = false;
        clearInterval(swInterval);
        document.getElementById('sw-start').classList.remove('hidden');
        document.getElementById('sw-stop').classList.add('hidden');
    }

    function updateStopwatch() {
        swElapsedTime = Date.now() - swStartTime;
        document.getElementById('sw-display').innerText = formatTime(swElapsedTime);
    }

    function resetStopwatch() {
        stopStopwatch();
        swElapsedTime = 0;
        document.getElementById('sw-display').innerText = "00:00:00.00";
        document.getElementById('laps').innerHTML = "";
    }

    function lapStopwatch() {
        if (swElapsedTime === 0) return;
        const lapDiv = document.createElement('div');
        lapDiv.className = 'lap-item';
        const lapCount = document.querySelectorAll('.lap-item').length + 1;
        lapDiv.innerHTML = `<span>Lap ${lapCount}</span> <span>${formatTime(swElapsedTime)}</span>`;
        const container = document.getElementById('laps');
        container.prepend(lapDiv);
    }

    // --- Timer Logic ---
    function startTimer() {
        if (!tmRunning) {
            if (tmRemainingTime <= 0) {
                const h = parseInt(document.getElementById('tm-h').value) || 0;
                const m = parseInt(document.getElementById('tm-m').value) || 0;
                const s = parseInt(document.getElementById('tm-s').value) || 0;
                tmRemainingTime = (h * 3600 + m * 60 + s) * 1000;
            }

            if (tmRemainingTime <= 0) return;

            tmRunning = true;
            document.getElementById('timer-inputs').classList.add('hidden');
            document.getElementById('tm-start').classList.add('hidden');
            document.getElementById('tm-pause').classList.remove('hidden');
            
            const endTime = Date.now() + tmRemainingTime;
            tmInterval = setInterval(() => {
                tmRemainingTime = endTime - Date.now();
                if (tmRemainingTime <= 0) {
                    tmRemainingTime = 0;
                    finishTimer();
                }
                document.getElementById('tm-display').innerText = formatTime(tmRemainingTime, false);
            }, 100);
        }
    }

    function pauseTimer() {
        tmRunning = false;
        clearInterval(tmInterval);
        document.getElementById('tm-start').classList.remove('hidden');
        document.getElementById('tm-pause').classList.add('hidden');
    }

    function resetTimer() {
        pauseTimer();
        tmRemainingTime = 0;
        document.getElementById('tm-display').innerText = "00:00:00";
        document.getElementById('timer-inputs').classList.remove('hidden');
    }

    function finishTimer() {
        pauseTimer();
        document.getElementById('tm-display').innerText = "00:00:00";
        alert("Time's up!");
        resetTimer();
    }
</script>

</body>
</html>