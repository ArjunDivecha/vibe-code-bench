<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibe-Law | Legal Workspace</title>
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --accent: #38bdf8;
            --accent-hover: #0ea5e9;
            --border: #334155;
            --highlight: rgba(56, 189, 248, 0.2);
            --entity-name: #f472b6;
            --entity-date: #4ade80;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header */
        header {
            background-color: var(--bg-secondary);
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .logo {
            font-weight: 800;
            font-size: 1.5rem;
            letter-spacing: -0.05em;
            color: var(--accent);
        }

        .search-container {
            flex-grow: 1;
            max-width: 600px;
            margin: 0 2rem;
            position: relative;
        }

        #search-input {
            width: 100%;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            outline: none;
        }

        #search-input:focus { border-color: var(--accent); }

        /* Layout */
        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Left Sidebar: Results */
        #results-pane {
            width: 400px;
            border-right: 1px solid var(--border);
            overflow-y: auto;
            background: var(--bg-secondary);
        }

        .case-card {
            padding: 1.25rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s;
        }

        .case-card:hover { background: var(--bg-tertiary); }
        .case-card.active { border-left: 4px solid var(--accent); background: var(--bg-tertiary); }

        .case-title { font-weight: 600; margin-bottom: 0.25rem; font-size: 0.95rem; }
        .case-meta { font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 0.5rem; }
        .case-snippet { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.4; }

        /* Center: Detail View */
        #detail-pane {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-primary);
            position: relative;
        }

        .detail-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--border);
        }

        .tabs {
            display: flex;
            gap: 2rem;
            padding: 0 2rem;
            border-bottom: 1px solid var(--border);
            background: var(--bg-secondary);
        }

        .tab {
            padding: 1rem 0;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
        }

        .tab.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        .content-area {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            line-height: 1.6;
            font-size: 1rem;
        }

        .toolbar {
            padding: 0.5rem 2rem;
            background: var(--bg-tertiary);
            display: flex;
            gap: 1rem;
        }

        button {
            background: var(--accent);
            color: var(--bg-primary);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.8rem;
        }

        button:hover { background: var(--accent-hover); }

        /* Right Sidebar: Notes */
        #notes-pane {
            width: 300px;
            border-left: 1px solid var(--border);
            background: var(--bg-secondary);
            display: flex;
            flex-direction: column;
        }

        .pane-title {
            padding: 1rem;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border);
        }

        #notes-list {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .note-item {
            background: var(--bg-tertiary);
            padding: 0.75rem;
            border-radius: 4px;
            margin-bottom: 1rem;
            font-size: 0.85rem;
            position: relative;
        }

        .note-item .delete-note {
            position: absolute;
            top: 5px;
            right: 5px;
            cursor: pointer;
            color: #ef4444;
            font-size: 12px;
        }

        /* Entity Highlighting */
        .entity-name { background: var(--highlight); color: var(--entity-name); border-bottom: 1px solid var(--entity-name); padding: 0 2px; }
        .entity-date { background: var(--highlight); color: var(--entity-date); border-bottom: 1px solid var(--entity-date); padding: 0 2px; }

        .empty-state {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-secondary);
            text-align: center;
            padding: 2rem;
        }

        ::selection {
            background: var(--accent);
            color: var(--bg-primary);
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">VIBE-LAW</div>
        <div class="search-container">
            <input type="text" id="search-input" placeholder="Search cases, statutes, or citations...">
        </div>
        <div style="font-size: 0.8rem; color: var(--text-secondary)">Workspace v1.0.4</div>
    </header>

    <main>
        <section id="results-pane">
            <!-- Case cards injected here -->
        </section>

        <section id="detail-pane">
            <div id="no-selection" class="empty-state">
                <div>
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" style="margin-bottom: 1rem; opacity: 0.5">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    <p>Select a case to view details</p>
                </div>
            </div>

            <div id="case-view" style="display: none; height: 100%; flex-direction: column;">
                <div class="detail-header">
                    <h1 id="view-title">Case Title</h1>
                    <div id="view-meta" class="case-meta">Court | Date</div>
                </div>
                <div class="toolbar">
                    <button onclick="extractEntities()">Extract Entities</button>
                    <button onclick="saveSelectedSnippet()" style="background: var(--bg-tertiary); border: 1px solid var(--accent); color: var(--accent);">Save Selected Snippet</button>
                </div>
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('summary')">Summary</div>
                    <div class="tab" onclick="switchTab('fulltext')">Full Text</div>
                </div>
                <div id="view-content" class="content-area">
                    <!-- Case content injected here -->
                </div>
            </div>
        </section>

        <section id="notes-pane">
            <div class="pane-title">Research Notes</div>
            <div id="notes-list">
                <!-- Notes injected here -->
            </div>
        </section>
    </main>

    <script>
        const MOCK_CASES = [
            {
                id: 1,
                title: "United States v. Thompson",
                court: "Supreme Court of the United States",
                date: "October 14, 2022",
                snippet: "A landmark ruling regarding the Fourth Amendment and digital privacy in the workplace.",
                summary: "This case addresses whether an employee has a reasonable expectation of privacy in digital communications stored on a company-owned server. The Court held 6-3 that specific warrants are required for long-term metadata surveillance.",
                fullText: "The Petitioner, James Thompson, was employed by Global Tech Corp since January 2018. On March 12, 2021, federal agents seized servers containing his private communications. The government argues that by signing the 2018 Employment Agreement, Thompson waived all privacy rights. However, Justice Roberts noted that the scope of the waiver was overly broad. The Fourth Amendment protects individuals, not places, and this extends to the digital realm. Decided on October 14, 2022."
            },
            {
                id: 2,
                title: "State of California v. CyberLink Systems",
                court: "California Supreme Court",
                date: "January 05, 2023",
                snippet: "Liability of AI-driven platforms in algorithmic bias and consumer protection laws.",
                summary: "A class-action lawsuit alleging that CyberLink's hiring algorithm systematically discriminated against applicants based on age. The court defined new standards for 'algorithmic transparency'.",
                fullText: "Plaintiff Maria Garcia filed suit on August 15, 2022, after discovery revealed that the 'SmartHire' algorithm automatically down-ranked candidates born before 1975. CyberLink Systems argued the algorithm was a trade secret. The Court ruled that trade secret protections do not supersede civil rights protections. The final judgment was issued on January 05, 2023."
            },
            {
                id: 3,
                title: "In re: Crypto Exchange Bankruptcy",
                court: "U.S. Bankruptcy Court, S.D.N.Y.",
                date: "November 22, 2023",
                snippet: "Determination of asset ownership for digital assets held in custodial wallets.",
                summary: "Critical ruling on whether digital assets in custodial accounts are property of the estate or the individual users. The court ruled in favor of the estate based on the Terms of Service.",
                fullText: "Following the collapse of BitVault on September 10, 2023, thousands of creditors sought to reclaim assets. Judge Sarah Jenkins examined the User Agreement dated February 20, 2020. The agreement explicitly stated that 'title to assets transfers to BitVault'. Consequently, the assets are deemed property of the bankruptcy estate. Ruling finalized November 22, 2023."
            },
            {
                id: 4,
                title: "Doe v. MedData Corp",
                court: "Seventh Circuit Court of Appeals",
                date: "May 30, 2023",
                snippet: "Privacy breach involving sensitive biometric data and the BIPA statute.",
                summary: "Examination of standing in data breach cases where no financial loss has yet occurred but biometric data was exposed.",
                fullText: "MedData Corp suffered a breach on June 12, 2022. John Doe filed a claim under the Illinois Biometric Information Privacy Act. The court held that the unauthorized disclosure of biometric data constitutes a concrete injury-in-fact. Decision rendered May 30, 2023."
            },
            {
                id: 5,
                title: "Eco-Logic vs. Environmental Agency",
                court: "D.C. Circuit Court",
                date: "July 19, 2023",
                snippet: "Challenge to new administrative rules regarding carbon capture credits.",
                summary: "Administrative law case focusing on the 'Major Questions Doctrine' and agency overreach in environmental regulation.",
                fullText: "The Environmental Agency proposed Rule 405-B on March 01, 2023. Eco-Logic challenged the rule, citing the West Virginia v. EPA precedent. The D.C. Circuit found that the agency exceeded its statutory authority. July 19, 2023."
            }
        ];

        // Add 10 more mock cases for density
        for(let i = 6; i <= 15; i++) {
            MOCK_CASES.push({
                id: i,
                title: `Case Reference #${1000 + i}: Legal Matter`,
                court: i % 2 === 0 ? "Federal District Court" : "State Appellate Court",
                date: `March ${10 + i}, 2023`,
                snippet: "Generic legal summary regarding procedural motions and evidentiary standards in civil litigation.",
                summary: "This case involves a procedural dispute over the admissibility of hearsay evidence in a preliminary hearing. The court found that the evidence was admissible under the business records exception.",
                fullText: `On March ${10+i}, 2023, the court heard arguments regarding Case #${1000+i}. The primary witness, Robert Smith, provided testimony regarding events on January 15, 2022. The court ruled that the documentation provided was sufficient for the motion to proceed.`
            });
        }

        let currentCase = null;
        let currentTab = 'summary';
        let notes = JSON.parse(localStorage.getItem('vibelaw_notes')) || [];

        // UI Elements
        const resultsPane = document.getElementById('results-pane');
        const searchInput = document.getElementById('search-input');
        const caseView = document.getElementById('case-view');
        const noSelection = document.getElementById('no-selection');
        const viewTitle = document.getElementById('view-title');
        const viewMeta = document.getElementById('view-meta');
        const viewContent = document.getElementById('view-content');
        const notesList = document.getElementById('notes-list');

        function init() {
            renderResults(MOCK_CASES);
            renderNotes();
            
            searchInput.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                const filtered = MOCK_CASES.filter(c => 
                    c.title.toLowerCase().includes(query) || 
                    c.snippet.toLowerCase().includes(query)
                );
                renderResults(filtered);
            });
        }

        function renderResults(cases) {
            resultsPane.innerHTML = '';
            cases.forEach(c => {
                const card = document.createElement('div');
                card.className = `case-card ${currentCase?.id === c.id ? 'active' : ''}`;
                card.innerHTML = `
                    <div class="case-title">${c.title}</div>
                    <div class="case-meta">${c.court} • ${c.date}</div>
                    <div class="case-snippet">${c.snippet}</div>
                `;
                card.onclick = () => selectCase(c);
                resultsPane.appendChild(card);
            });
        }

        function selectCase(c) {
            currentCase = c;
            noSelection.style.display = 'none';
            caseView.style.display = 'flex';
            
            viewTitle.innerText = c.title;
            viewMeta.innerText = `${c.court} | ${c.date}`;
            
            switchTab('summary');
            renderResults(MOCK_CASES); // Refresh active state
        }

        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.tab').forEach(t => {
                t.classList.toggle('active', t.innerText.toLowerCase() === tab);
            });
            
            if (currentCase) {
                viewContent.innerHTML = currentCase[tab];
            }
        }

        function extractEntities() {
            if (!currentCase) return;
            let text = currentCase[currentTab];
            
            // Simple Regex for Names (Capitalized sequences) and Dates
            // Dates: Month DD, YYYY
            const dateRegex = /(January|February|March|April|May|June|July|August|September|October|November|December)\s\d{1,2},\s\d{4}/g;
            // Names: Mocking by looking for specific keywords or common patterns in our mock data
            const nameRegex = /(James Thompson|Global Tech Corp|Maria Garcia|CyberLink Systems|Sarah Jenkins|BitVault|John Doe|MedData Corp|Robert Smith|Justice Roberts|Judge Sarah Jenkins)/g;

            let highlighted = text.replace(dateRegex, match => `<span class="entity-date">${match}</span>`);
            highlighted = highlighted.replace(nameRegex, match => `<span class="entity-name">${match}</span>`);
            
            viewContent.innerHTML = highlighted;
        }

        function saveSelectedSnippet() {
            const selection = window.getSelection().toString().trim();
            if (!selection) {
                alert("Please select some text in the case view first.");
                return;
            }

            const note = {
                id: Date.now(),
                caseTitle: currentCase.title,
                text: selection
            };

            notes.unshift(note);
            localStorage.setItem('vibelaw_notes', JSON.stringify(notes));
            renderNotes();
        }

        function renderNotes() {
            notesList.innerHTML = '';
            notes.forEach(n => {
                const div = document.createElement('div');
                div.className = 'note-item';
                div.innerHTML = `
                    <div class="delete-note" onclick="deleteNote(${n.id})">✕</div>
                    <div style="font-weight:bold; font-size: 0.7rem; margin-bottom: 4px; color: var(--accent)">${n.caseTitle}</div>
                    <div>"${n.text}"</div>
                `;
                notesList.appendChild(div);
            });
        }

        function deleteNote(id) {
            notes = notes.filter(n => n.id !== id);
            localStorage.setItem('vibelaw_notes', JSON.stringify(notes));
            renderNotes();
        }

        init();
    </script>
</body>
</html>