<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Unit Converter</title>
    <style>
        :root {
            --primary: #4f46e5;
            --primary-hover: #4338ca;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --border: #e2e8f0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: var(--card);
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
            margin: 1rem;
        }

        h1 {
            margin-top: 0;
            font-size: 1.5rem;
            text-align: center;
            color: var(--primary);
        }

        .tabs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .tab-btn {
            background: #f1f5f9;
            border: 1px solid var(--border);
            padding: 0.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .converter-grid {
            display: grid;
            gap: 1.5rem;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        label {
            font-size: 0.875rem;
            font-weight: 600;
            color: #64748b;
        }

        select, input {
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            font-size: 1rem;
            width: 100%;
            box-sizing: border-box;
        }

        input:focus, select:focus {
            outline: 2px solid var(--primary);
            border-color: transparent;
        }

        .swap-container {
            display: flex;
            justify-content: center;
            margin: -0.5rem 0;
        }

        .swap-btn {
            background: #f1f5f9;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .swap-btn:hover {
            background: #e2e8f0;
        }

        .formula-box {
            background: #fdf2f8;
            border: 1px solid #fbcfe8;
            padding: 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            color: #be185d;
            margin-top: 1rem;
            text-align: center;
        }

        .quick-actions {
            margin-top: 1.5rem;
            border-top: 1px solid var(--border);
            padding-top: 1rem;
        }

        .quick-actions-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #94a3b8;
            margin-bottom: 0.75rem;
        }

        .quick-btns {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .quick-btn {
            background: white;
            border: 1px solid var(--border);
            padding: 0.4rem 0.8rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        .quick-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Unit Converter</h1>
    
    <div class="tabs" id="categoryTabs">
        <button class="tab-btn active" onclick="setCategory('length')">Length</button>
        <button class="tab-btn" onclick="setCategory('weight')">Weight</button>
        <button class="tab-btn" onclick="setCategory('temp')">Temp</button>
        <button class="tab-btn" onclick="setCategory('volume')">Volume</button>
        <button class="tab-btn" onclick="setCategory('time')">Time</button>
    </div>

    <div class="converter-grid">
        <div class="input-group">
            <label id="labelFrom">From</label>
            <select id="unitFrom" onchange="convert('from')"></select>
            <input type="number" id="valFrom" placeholder="0" oninput="convert('from')">
        </div>

        <div class="swap-container">
            <button class="swap-btn" onclick="swapUnits()" title="Swap Units">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 10l5-5 5 5M7 14l5 5 5-5"/></svg>
            </button>
        </div>

        <div class="input-group">
            <label id="labelTo">To</label>
            <select id="unitTo" onchange="convert('from')"></select>
            <input type="number" id="valTo" placeholder="0" oninput="convert('to')">
        </div>
    </div>

    <div id="formula" class="formula-box">
        Formula: 1 unit = 1 unit
    </div>

    <div class="quick-actions">
        <div class="quick-actions-title">Common Conversions</div>
        <div class="quick-btns" id="quickBtns">
            <!-- Populated by JS -->
        </div>
    </div>
</div>

<script>
    const data = {
        length: {
            units: {
                km: 1000,
                m: 1,
                cm: 0.01,
                mm: 0.001,
                miles: 1609.34,
                feet: 0.3048,
                inches: 0.0254
            },
            quick: [
                { f: 'miles', t: 'km', label: 'Miles to KM' },
                { f: 'feet', t: 'm', label: 'Feet to Meters' },
                { f: 'inches', t: 'cm', label: 'Inches to CM' }
            ]
        },
        weight: {
            units: {
                kg: 1,
                g: 0.001,
                lb: 0.453592,
                oz: 0.0283495
            },
            quick: [
                { f: 'lb', t: 'kg', label: 'Lbs to KG' },
                { f: 'kg', t: 'lb', label: 'KG to Lbs' },
                { f: 'oz', t: 'g', label: 'Oz to Grams' }
            ]
        },
        temp: {
            units: { C: 'C', F: 'F', K: 'K' },
            quick: [
                { f: 'C', t: 'F', label: '°C to °F' },
                { f: 'F', t: 'C', label: '°F to °C' }
            ]
        },
        volume: {
            units: {
                L: 1,
                mL: 0.001,
                gallons: 3.78541,
                cups: 0.236588
            },
            quick: [
                { f: 'gallons', t: 'L', label: 'Gal to Liters' },
                { f: 'cups', t: 'mL', label: 'Cups to mL' }
            ]
        },
        time: {
            units: {
                hours: 3600,
                minutes: 60,
                seconds: 1
            },
            quick: [
                { f: 'hours', t: 'minutes', label: 'Hrs to Min' },
                { f: 'minutes', t: 'seconds', label: 'Min to Sec' }
            ]
        }
    };

    let currentCategory = 'length';

    function setCategory(cat) {
        currentCategory = cat;
        
        // Update UI Tabs
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.toggle('active', btn.innerText.toLowerCase() === cat || (cat === 'temp' && btn.innerText === 'Temp'));
        });

        // Populate Selects
        const uFrom = document.getElementById('unitFrom');
        const uTo = document.getElementById('unitTo');
        uFrom.innerHTML = '';
        uTo.innerHTML = '';

        const units = Object.keys(data[cat].units);
        units.forEach((u, i) => {
            uFrom.add(new Option(u, u));
            uTo.add(new Option(u, u));
        });

        // Set defaults
        uTo.selectedIndex = units.length > 1 ? 1 : 0;
        
        // Populate Quick Buttons
        const qContainer = document.getElementById('quickBtns');
        qContainer.innerHTML = '';
        data[cat].quick.forEach(q => {
            const btn = document.createElement('button');
            btn.className = 'quick-btn';
            btn.innerText = q.label;
            btn.onclick = () => {
                uFrom.value = q.f;
                uTo.value = q.t;
                convert('from');
            };
            qContainer.appendChild(btn);
        });

        convert('from');
    }

    function convert(direction) {
        const uFrom = document.getElementById('unitFrom').value;
        const uTo = document.getElementById('unitTo').value;
        const vFrom = document.getElementById('valFrom');
        const vTo = document.getElementById('valTo');
        const formulaDiv = document.getElementById('formula');

        if (currentCategory === 'temp') {
            handleTemp(direction, uFrom, uTo, vFrom, vTo);
        } else {
            const units = data[currentCategory].units;
            const factorFrom = units[uFrom];
            const factorTo = units[uTo];

            if (direction === 'from') {
                const result = (vFrom.value * factorFrom) / factorTo;
                vTo.value = vFrom.value === "" ? "" : parseFloat(result.toFixed(4));
            } else {
                const result = (vTo.value * factorTo) / factorFrom;
                vFrom.value = vTo.value === "" ? "" : parseFloat(result.toFixed(4));
            }
            
            const ratio = (factorFrom / factorTo).toFixed(4);
            formulaDiv.innerText = `Formula: Multiply the ${uFrom} value by ${parseFloat(ratio)}`;
        }
    }

    function handleTemp(direction, uFrom, uTo, vFrom, vTo) {
        const formulaDiv = document.getElementById('formula');
        let val = direction === 'from' ? parseFloat(vFrom.value) : parseFloat(vTo.value);
        
        if (isNaN(val)) {
            if (direction === 'from') vTo.value = ""; else vFrom.value = "";
            return;
        }

        // Convert input to Celsius first
        let celsius;
        if (direction === 'from') {
            if (uFrom === 'C') celsius = val;
            else if (uFrom === 'F') celsius = (val - 32) * 5/9;
            else if (uFrom === 'K') celsius = val - 273.15;
            
            let result;
            if (uTo === 'C') result = celsius;
            else if (uTo === 'F') result = (celsius * 9/5) + 32;
            else if (uTo === 'K') result = celsius + 273.15;
            vTo.value = parseFloat(result.toFixed(4));
        } else {
            if (uTo === 'C') celsius = val;
            else if (uTo === 'F') celsius = (val - 32) * 5/9;
            else if (uTo === 'K') celsius = val - 273.15;

            let result;
            if (uFrom === 'C') result = celsius;
            else if (uFrom === 'F') result = (celsius * 9/5) + 32;
            else if (uFrom === 'K') result = celsius + 273.15;
            vFrom.value = parseFloat(result.toFixed(4));
        }

        // Formula display for common temps
        if (uFrom === 'C' && uTo === 'F') formulaDiv.innerText = "Formula: (Celsius × 9/5) + 32 = Fahrenheit";
        else if (uFrom === 'F' && uTo === 'C') formulaDiv.innerText = "Formula: (Fahrenheit − 32) × 5/9 = Celsius";
        else formulaDiv.innerText = `Converting ${uFrom} to ${uTo}`;
    }

    function swapUnits() {
        const uFrom = document.getElementById('unitFrom');
        const uTo = document.getElementById('unitTo');
        const temp = uFrom.value;
        uFrom.value = uTo.value;
        uTo.value = temp;
        convert('from');
    }

    // Initialize
    setCategory('length');
    document.getElementById('valFrom').value = 1;
    convert('from');
</script>

</body>
</html>