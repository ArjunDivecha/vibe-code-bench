<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        .text-display {
            font-size: 18px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
            border-left: 4px solid #3498db;
            min-height: 120px;
            white-space: pre-wrap;
        }
        .character {
            position: relative;
        }
        .correct {
            background-color: #d4edda;
            color: #155724;
        }
        .incorrect {
            background-color: #f8d7da;
            color: #721c24;
            text-decoration: underline;
        }
        .current {
            background-color: #fff3cd;
            color: #856404;
        }
        .input-area {
            margin-bottom: 20px;
        }
        #typing-input {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            font-family: inherit;
        }
        #typing-input:focus {
            outline: none;
            border-color: #3498db;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f0f0f0;
            border-radius: 5px;
        }
        .stat-item {
            text-align: center;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        .stat-label {
            font-size: 12px;
            color: #777;
            text-transform: uppercase;
        }
        .timer {
            font-size: 20px;
            text-align: center;
            margin-bottom: 20px;
            color: #e74c3c;
            font-weight: bold;
        }
        button {
            display: block;
            width: 200px;
            margin: 20px auto;
            padding: 12px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        .final-results {
            margin-top: 20px;
            padding: 20px;
            background-color: #d4edda;
            border-radius: 5px;
            text-align: center;
            display: none;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Typing Speed Test</h1>
        
        <div class="timer" id="timer">Time: 0s</div>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="wpm">0</div>
                <div class="stat-label">WPM</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="accuracy">0%</div>
                <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="characters">0</div>
                <div class="stat-label">Characters</div>
            </div>
        </div>
        
        <div class="text-display" id="text-display"></div>
        
        <div class="input-area">
            <textarea id="typing-input" placeholder="Start typing here..." rows="5" autofocus></textarea>
        </div>
        
        <div class="final-results" id="final-results">
            <h2>Test Complete!</h2>
            <p>Final WPM: <span id="final-wpm" class="stat-value">0</span></p>
            <p>Final Accuracy: <span id="final-accuracy" class="stat-value">0%</span></p>
            <p>Characters Typed: <span id="final-characters" class="stat-value">0</span></p>
        </div>
        
        <button id="reset-button">Try Again</button>
    </div>

    <script>
        // Array of text samples for the typing test
        const textSamples = [
            "The quick brown fox jumps over the lazy dog. This pangram contains every letter of the alphabet at least once, making it perfect for typing practice and keyboard testing. It's commonly used to demonstrate fonts and typing skills.",
            "Programming is the process of creating a set of instructions that tell a computer how to perform a task. Programming can be done using a variety of computer programming languages, such as JavaScript, Python, and C++.",
            "Artificial intelligence is intelligence demonstrated by machines, in contrast to the natural intelligence displayed by humans and animals. Leading AI textbooks define the field as the study of intelligent agents.",
            "The Internet is a global system of interconnected computer networks that use the standard Internet protocol suite to link devices worldwide. It is a network of networks that consists of private, public, academic, business, and government networks.",
            "A computer is a machine that can be instructed to carry out sequences of arithmetic or logical operations automatically via computer programming. Modern computers have the ability to follow generalized sets of operations, called programs.",
            "Nature is a British weekly scientific journal founded and based in London, England. As a multidisciplinary publication, Nature features peer-reviewed research from a variety of academic disciplines, mainly in science and technology.",
            "The United States of America is a federal republic consisting of 50 states, a federal district, five major self-governing territories, and various possessions. It is located in central North America, with its capital in Washington, D.C.",
            "Reading is essential for gaining knowledge and improving vocabulary. When you read regularly, you expose yourself to new words and phrases, which can enhance your communication skills and writing abilities.",
            "Technology is advancing at an unprecedented rate, transforming every aspect of our lives. From artificial intelligence to renewable energy solutions, innovations are reshaping industries and creating new opportunities.",
            "The human brain is the command center for the human nervous system. It receives signals from the body's sensory organs and outputs information to the muscles. The human brain has the same basic structure as other mammal brains."
        ];

        // DOM elements
        const textDisplay = document.getElementById('text-display');
        const typingInput = document.getElementById('typing-input');
        const timerDisplay = document.getElementById('timer');
        const wpmDisplay = document.getElementById('wpm');
        const accuracyDisplay = document.getElementById('accuracy');
        const charactersDisplay = document.getElementById('characters');
        const finalResults = document.getElementById('final-results');
        const finalWpm = document.getElementById('final-wpm');
        const finalAccuracy = document.getElementById('final-accuracy');
        const finalCharacters = document.getElementById('final-characters');
        const resetButton = document.getElementById('reset-button');

        // Variables for tracking test state
        let currentText = '';
        let startTime = null;
        let endTime = null;
        let timerInterval = null;
        let testDuration = 30; // seconds

        // Initialize the game
        function initGame() {
            // Reset displays
            finalResults.style.display = 'none';
            typingInput.value = '';
            typingInput.disabled = false;
            typingInput.focus();
            
            // Choose a random text sample
            currentText = textSamples[Math.floor(Math.random() * textSamples.length)];
            
            // Display the text with each character in a span
            textDisplay.innerHTML = '';
            for (let char of currentText) {
                const charSpan = document.createElement('span');
                charSpan.classList.add('character');
                charSpan.innerText = char;
                textDisplay.appendChild(charSpan);
            }
            
            // Reset stats
            wpmDisplay.innerText = '0';
            accuracyDisplay.innerText = '0%';
            charactersDisplay.innerText = '0';
            timerDisplay.innerText = `Time: 0s`;
            
            // Reset timing
            startTime = null;
            endTime = null;
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        // Calculate and update stats
        function updateStats(currentInput) {
            if (!startTime) {
                startTime = new Date().getTime();
                timerInterval = setInterval(updateTimer, 100);
            }
            
            const timeElapsed = (new Date().getTime() - startTime) / 1000; // in seconds
            const minutesElapsed = timeElapsed / 60;
            
            // Calculate WPM (words per minute)
            // Standard typing test assumes 5 characters = 1 word
            const rawWpm = (currentInput.length / 5) / minutesElapsed;
            const wpm = Math.max(0, Math.round(rawWpm));
            
            // Calculate accuracy
            let correctChars = 0;
            for (let i = 0; i < currentInput.length; i++) {
                if (i < currentText.length && currentInput[i] === currentText[i]) {
                    correctChars++;
                }
            }
            const accuracy = currentInput.length > 0 ? Math.round((correctChars / currentInput.length) * 100) : 0;
            
            // Update display
            wpmDisplay.innerText = wpm;
            accuracyDisplay.innerText = `${accuracy}%`;
            charactersDisplay.innerText = currentInput.length;
            
            // Highlight characters
            const characters = textDisplay.querySelectorAll('.character');
            characters.forEach((char, index) => {
                char.className = 'character';
                if (index === currentInput.length) {
                    char.classList.add('current');
                } else if (index < currentInput.length) {
                    if (currentInput[index] === currentText[index]) {
                        char.classList.add('correct');
                    } else {
                        char.classList.add('incorrect');
                    }
                }
            });
            
            // Check if test is complete (time limit reached)
            if (timeElapsed >= testDuration) {
                endTest();
            }
        }

        // Update timer display
        function updateTimer() {
            if (!startTime) return;
            
            const timeElapsed = (new Date().getTime() - startTime) / 1000; // in seconds
            const seconds = Math.floor(timeElapsed);
            
            timerDisplay.innerText = `Time: ${seconds}s`;
            
            // Highlight timer as test nears end
            if (testDuration - seconds <= 5) {
                timerDisplay.style.color = '#e74c3c';
            }
        }

        // End the test
        function endTest() {
            endTime = new Date().getTime();
            clearInterval(timerInterval);
            typingInput.disabled = true;
            
            // Calculate final stats
            const timeElapsed = (endTime - startTime) / 1000 / 60; // in minutes
            const finalWpmCount = Math.max(0, Math.round((typingInput.value.length / 5) / timeElapsed));
            let correctChars = 0;
            for (let i = 0; i < typingInput.value.length; i++) {
                if (i < currentText.length && typingInput.value[i] === currentText[i]) {
                    correctChars++;
                }
            }
            const finalAccuracyCount = typingInput.value.length > 0 ? Math.round((correctChars / typingInput.value.length) * 100) : 0;
            
            // Display final results
            finalWpm.innerText = finalWpmCount;
            finalAccuracy.innerText = `${finalAccuracyCount}%`;
            finalCharacters.innerText = typingInput.value.length;
            finalResults.style.display = 'block';
        }

        // Event Listeners
        typingInput.addEventListener('input', (e) => {
            updateStats(e.target.value);
        });

        resetButton.addEventListener('click', () => {
            initGame();
        });

        // Initialize game on load
        initGame();
    </script>
</body>
</html>