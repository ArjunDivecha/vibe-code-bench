<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vibe-Law | Legal Case Search</title>
  <style>
    :root {
      --bg-primary: #121a26;
      --bg-secondary: #1e293b;
      --bg-tertiary: #2c3a50;
      --text-primary: #e2e8f0;
      --text-secondary: #94a3b8;
      --accent-blue: #3b82f6;
      --accent-blue-hover: #2563eb;
      --border-color: #334155;
      --highlight-bg: #1e3a8a;
      --danger: #ef4444;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background-color: var(--bg-secondary);
      padding: 1rem;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
    }

    h1 {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--accent-blue);
    }

    .search-container {
      flex: 1;
      margin-left: 2rem;
      position: relative;
    }

    #search-bar {
      width: 100%;
      padding: 0.75rem 1rem;
      border-radius: 6px;
      border: 1px solid var(--border-color);
      background-color: var(--bg-tertiary);
      color: var(--text-primary);
      font-size: 1rem;
      outline: none;
      transition: border 0.2s;
    }

    #search-bar:focus {
      border-color: var(--accent-blue);
    }

    main {
      flex: 1;
      display: flex;
      overflow: hidden;
    }

    .results-pane {
      width: 40%;
      border-right: 1px solid var(--border-color);
      overflow-y: auto;
      background-color: var(--bg-secondary);
      display: flex;
      flex-direction: column;
    }

    .results-header {
      padding: 1rem;
      font-size: 0.9rem;
      color: var(--text-secondary);
      border-bottom: 1px solid var(--border-color);
    }

    .results-list {
      list-style: none;
      flex: 1;
      overflow-y: auto;
      padding: 0.5rem;
    }

    .result-item {
      padding: 1rem;
      margin-bottom: 0.5rem;
      border-radius: 6px;
      background-color: var(--bg-tertiary);
      cursor: pointer;
      transition: background 0.2s;
      border: 1px solid transparent;
    }

    .result-item:hover {
      background-color: #2a3b50;
      border-color: var(--accent-blue);
    }

    .result-title {
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.25rem;
      font-size: 1.05rem;
    }

    .result-meta {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-bottom: 0.25rem;
    }

    .result-snippet {
      font-size: 0.9rem;
      color: var(--text-secondary);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .detail-pane {
      flex: 1;
      display: flex;
      flex-direction: column;
      background-color: var(--bg-primary);
      overflow: hidden;
    }

    .detail-header {
      padding: 1rem;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .detail-title {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .detail-meta {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .detail-tabs {
      display: flex;
      background-color: var(--bg-secondary);
      border-bottom: 1px solid var(--border-color);
    }

    .tab {
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--text-secondary);
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }

    .tab.active {
      color: var(--accent-blue);
      border-bottom: 2px solid var(--accent-blue);
      background-color: var(--bg-tertiary);
    }

    .tab-content {
      flex: 1;
      padding: 1.5rem;
      overflow-y: auto;
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .summary-content p {
      margin-bottom: 1rem;
    }

    .full-text-content {
      white-space: pre-line;
      font-family: 'Courier New', monospace;
      font-size: 0.95rem;
      line-height: 1.7;
    }

    .detail-actions {
      padding: 0.75rem 1rem;
      display: flex;
      gap: 0.75rem;
      background-color: var(--bg-tertiary);
    }

    .btn {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 6px;
      font-size: 0.9rem;
      cursor: pointer;
      background-color: var(--bg-tertiary);
      color: var(--text-primary);
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn:hover {
      background-color: var(--accent-blue);
      color: white;
    }

    .notes-sidebar {
      width: 300px;
      background-color: var(--bg-secondary);
      border-left: 1px solid var(--border-color);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .notes-header {
      padding: 1rem;
      font-size: 1rem;
      font-weight: 600;
      border-bottom: 1px solid var(--border-color);
      color: var(--accent-blue);
    }

    .notes-list {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
    }

    .note-item {
      padding: 0.75rem;
      margin-bottom: 0.75rem;
      background-color: var(--bg-tertiary);
      border-radius: 6px;
      font-size: 0.9rem;
      color: var(--text-secondary);
      border-left: 3px solid var(--accent-blue);
      position: relative;
    }

    .note-delete {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: var(--danger);
      color: white;
      border: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      font-size: 0.7rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .note-delete:hover {
      background: #dc2626;
    }

    .empty-notes {
      font-size: 0.9rem;
      color: var(--text-secondary);
      text-align: center;
      margin-top: 2rem;
    }

    .highlight {
      background-color: var(--highlight-bg);
      color: white;
      padding: 0.1rem 0.3rem;
      border-radius: 3px;
      font-weight: 500;
    }

    .split-view {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    @media (max-width: 1200px) {
      .notes-sidebar {
        width: 250px;
      }
    }

    @media (max-width: 960px) {
      main {
        flex-direction: column;
      }
      .results-pane {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border-color);
        max-height: 50%;
      }
      .detail-pane {
        flex-direction: row;
      }
      .split-view {
        flex-direction: column;
      }
      .notes-sidebar {
        width: 100%;
        border-left: none;
        border-top: 1px solid var(--border-color);
        max-height: 300px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Vibe-Law</h1>
    <div class="search-container">
      <input type="text" id="search-bar" placeholder="Search case law..." />
    </div>
  </header>

  <main>
    <div class="results-pane">
      <div class="results-header">Search Results</div>
      <ul class="results-list" id="results-list">
        <!-- Results will be injected here -->
      </ul>
    </div>

    <div class="detail-pane" id="detail-pane" style="display: none;">
      <div class="detail-header">
        <div>
          <div class="detail-title" id="detail-title"></div>
          <div class="detail-meta" id="detail-meta"></div>
        </div>
      </div>

      <div class="detail-tabs">
        <div class="tab active" data-tab="summary">Summary</div>
        <div class="tab" data-tab="full-text">Full Text</div>
      </div>

      <div class="detail-actions">
        <button class="btn" id="extract-entities">
          Extract Entities
        </button>
      </div>

      <div class="split-view">
        <div class="tab-content active" id="summary-tab">
          <div class="summary-content" id="summary-content"></div>
        </div>
        <div class="tab-content" id="full-text-tab">
          <div class="full-text-content" id="full-text-content"></div>
        </div>

        <div class="notes-sidebar">
          <div class="notes-header">Notes</div>
          <div class="notes-list" id="notes-list">
            <div class="empty-notes">No notes yet. Highlight text and press 'Extract Entities' to save snippets.</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Mock Legal Cases
    const cases = [
      {
        id: 1,
        title: "Doe v. Smith",
        court: "Supreme Court of California",
        date: "2022-05-15",
        summary: "This case involves a dispute over contractual obligations and breach of confidentiality. The plaintiff alleged that the defendant disclosed sensitive information without consent.",
        fullText: `Smith v. Doe, No. S271903\nSupreme Court of California, 2022\n\nPlaintiff John Doe filed suit against defendant Jane Smith for breach of a non-disclosure agreement signed on March 3, 2020. The agreement was part of a joint venture to develop proprietary software.\n\nThe central issue was whether the disclosure of source code to a third party constituted a material breach. The court held that such disclosure violated the express terms of the NDA.\n\nJustice Ramirez delivered the opinion of the court. The judgment was affirmed with costs.\n\nRelevant parties: John Doe, Jane Smith, TechFlow Inc.\nKey dates: March 3, 2020 (NDA signed), August 14, 2021 (first disclosure), January 7, 2022 (lawsuit filed).`,
        snippet: "The court held that such disclosure violated the express terms of the NDA."
      },
      {
        id: 2,
        title: "State v. Johnson",
        court: "New York Court of Appeals",
        date: "2021-11-22",
        summary: "Criminal appeal regarding Fourth Amendment protections against unreasonable search and seizure. The defendant moved to suppress evidence obtained during a warrantless search.",
        fullText: `State of New York v. Marcus Johnson, Docket #118-2020\nCourt of Appeals of the State of New York, 2021\n\nDefendant Marcus Johnson was charged with possession of controlled substances after police entered his residence without a warrant.\n\nThe trial court denied the motion to suppress. The Appellate Division affirmed. The Court of Appeals reversed.\n\nChief Judge DiFiore wrote the majority opinion, emphasizing that exigent circumstances were not adequately demonstrated by the prosecution.\n\nThe evidence was excluded, and the indictment dismissed.\n\nParties: Marcus Johnson, State of New York, Officer Daniel Reeves\nDates: September 12, 2020 (arrest), May 3, 2021 (Appellate Division ruling), November 22, 2021 (final decision).`,
        snippet: "The evidence was excluded, and the indictment dismissed."
      },
      {
        id: 3,
        title: "Brown v. United Healthcare Inc.",
        court: "U.S. District Court, District of Massachusetts",
        date: "2023-01-10",
        summary: "Class action lawsuit alleging denial of insurance claims for mental health treatment in violation of the Mental Health Parity Act.",
        fullText: `Emily Brown, et al. v. United Healthcare Inc., Civil Action No. 1:21-cv-11342\nU.S. District Court, District of Massachusetts, January 10, 2023\n\nPlaintiffs alleged systematic underpayment and denial of claims for intensive outpatient programs (IOP) and partial hospitalization programs (PHP).\n\nDefendant moved to dismiss, arguing lack of standing and failure to state a claim.\n\nJudge Ana Lopez denied the motion, finding that plaintiffs sufficiently alleged parity violations under 29 U.S.C. § 1185a.\n\nThe court noted that statistical evidence showed a 47% denial rate for mental health claims versus 9% for medical/surgical claims.\n\nKey figures: Emily Brown (lead plaintiff), United Healthcare Inc., Judge Ana Lopez\nTimeline: June 2020 - claim denials began, March 2021 - class certified, January 10, 2023 - motion denied.`,
        snippet: "Judge Ana Lopez denied the motion, finding that plaintiffs sufficiently alleged parity violations."
      },
      {
        id: 4,
        title: "City of Austin v. Airbnb, Inc.",
        court: "Texas Supreme Court",
        date: "2020-08-14",
        summary: "Municipal ordinance regulating short-term rentals challenged on grounds of preemption by state law.",
        fullText: `City of Austin v. Airbnb, Inc., No. 20-0345\nSupreme Court of Texas, August 14, 2020\n\nAustin Ordinance No. 20190912-01 required hosts to register and mandated data sharing with the city.\n\nAirbnb argued that the ordinance was preempted by Texas Occupations Code §1301.403, which prohibits local regulation of transient occupancy.\n\nJustice Lehrmann delivered the opinion: the ordinance's data reporting requirement does not constitute regulation of transient occupancy and is thus not preempted.\n\nThe judgment of the court of appeals was reversed.\n\nParties: City of Austin, Airbnb, Inc., Texas Attorney General (amicus)\nDates: September 12, 2019 (ordinance adopted), February 5, 2020 (trial court ruling), August 14, 2020 (final decision).`,
        snippet: "The judgment of the court of appeals was reversed."
      },
      {
        id: 5,
        title: "Garcia v. Tesla Motors",
        court: "U.S. Court of Appeals, Ninth Circuit",
        date: "2022-03-30",
        summary: "Employment discrimination case involving whistleblower protections and retaliation under the Occupational Safety and Health Act.",
        fullText: `Maria Garcia v. Tesla Motors, Inc., Case No. 20-16311\nU.S. Court of Appeals for the Ninth Circuit, March 30, 2022\n\nPlaintiff Maria Garcia, a quality control engineer, reported safety violations in battery assembly to OSHA in June 2020.\n\nShe was terminated two weeks later. She filed a complaint under 29 U.S.C. § 660(c), the whistleblower provision of OSHA.\n\nThe district court granted summary judgment for Tesla. The Ninth Circuit reversed.\n\nThe panel held that Garcia presented sufficient evidence of causal connection between her protected activity and termination.\n\nJudges: Murguia (author), Christen, Bumatay\nTimeline: June 15, 2020 (OSHA complaint), July 1, 2020 (termination), March 30, 2022 (appellate decision).`,
        snippet: "The Ninth Circuit reversed."
      },
      {
        id: 6,
        title: "National Environmental Trust v. EPA",
        court: "U.S. Court of Appeals, D.C. Circuit",
        date: "2021-07-19",
        summary: "Challenge to the Environmental Protection Agency's rollback of methane emission standards for oil and gas operations.",
        fullText: `National Environmental Trust v. Environmental Protection Agency, No. 20-1118\nU.S. Court of Appeals, D.C. Circuit, July 19, 2021\n\nPetitioners challenged the EPA's 2019 rule revising the 2016 New Source Performance Standards for methane emissions.\n\nThe court held that the EPA lacked authority to rescind applicable requirements without replacing them with equally effective alternatives.\n\nJudges Pillard, Millett, and Randolph. Opinion by Pillard.\n\nThe rule was vacated and remanded to the agency.\n\nKey entities: National Environmental Trust, Center for Biological Diversity (co-petitioner), EPA Administrator Andrew Wheeler\nDates: August 2019 (final rule), January 2020 (petition for review), July 19, 2021 (decision).`,
        snippet: "The rule was vacated and remanded to the agency."
      },
      {
        id: 7,
        title: "Chen v. Alibaba Group",
        court: "U.S. District Court, Southern District of New York",
        date: "2022-09-05",
        summary: "Securities fraud class action alleging misrepresentation of regulatory risks in China affecting financial disclosures.",
        fullText: `David Chen, on behalf of himself and others similarly situated v. Alibaba Group Holding Ltd., et al., No. 1:21-cv-04783\nU.S. District Court, Southern District of New York, September 5, 2022\n\nPlaintiffs alleged that defendants concealed the likelihood of stringent Chinese regulatory actions that would impact Alibaba's financial performance.\n\nDefendants moved to dismiss for failure to plead falsity and scienter with particularity.\n\nJudge Katherine Forrest denied the motion, finding that plaintiffs adequately alleged that defendants ignored red flags regarding anti-monopoly enforcement.\n\nThe court emphasized the importance of disclosure of material geopolitical risks in SEC filings.\n\nParties: David Chen, Alibaba Group, CFO Maggie Wu\nKey dates: April 2021 (earnings call with optimistic guidance), July 2021 (regulatory crackdown announced), September 5, 2022 (denial of motion to dismiss).`,
        snippet: "Judge Katherine Forrest denied the motion, finding that plaintiffs adequately alleged that defendants ignored red flags."
      },
      {
        id: 8,
        title: "People v. Martinez",
        court: "Illinois Supreme Court",
        date: "2020-12-03",
        summary: "Homicide case involving the admissibility of forensic DNA evidence obtained through genetic genealogy databases.",
        fullText: `The People of the State of Illinois v. Carlos Martinez, Docket No. 125893\nIllinois Supreme Court, December 3, 2020\n\nDefendant was convicted of murder based partly on DNA match from a public genealogy database (GEDmatch).\n\nDefense moved to suppress, arguing violation of the Fourth Amendment and Illinois constitutional privacy rights.\n\nThe Supreme Court affirmed the conviction, holding that individuals have no reasonable expectation of privacy in DNA information shared by relatives.\n\nChief Justice Anne Burke wrote the opinion, distinguishing this from direct government collection of DNA.\n\nThe court emphasized the public interest in solving violent crimes.\n\nDefendant: Carlos Martinez\nVictim: Elena Perez\nKey dates: October 2017 (murder), June 2019 (arrest via DNA), December 3, 2020 (final ruling).`,
        snippet: "The Supreme Court affirmed the conviction, holding that individuals have no reasonable expectation of privacy in DNA information shared by relatives."
      },
      {
        id: 9,
        title: "Amazon.com, Inc. v. Commissioner of Patents",
        court: "U.S. Patent and Trademark Office, PTAB",
        date: "2023-02-14",
        summary: "Inter Partes Review decision on the validity of a patent related to one-click purchasing technology.",
        fullText: `Amazon.com, Inc. v. Commissioner of Patents, IPR2022-00456\nPatent Trial and Appeal Board, February 14, 2023\n\nPetitioner Amazon challenged U.S. Patent No. 9,876,543 ('543 patent), owned by E-Commerce Solutions LLC, for obviousness under 35 U.S.C. § 103.\n\nThe '543 patent claims a method for completing online transactions using a single input gesture.\n\nThe Board found that prior art references, including Amazon's own 1997 '908 patent, rendered the claims obvious.\n\nThe challenged claims were declared unpatentable.\n\nAdministrative Patent Judges: Chen (author), Kim, Patel\nTimeline: November 2021 (IPR petition filed), July 2022 (oral hearing), February 14, 2023 (final written decision).`,
        snippet: "The challenged claims were declared unpatentable."
      },
      {
        id: 10,
        title: "Harvard University v. U.S. Department of Homeland Security",
        court: "U.S. Court of Appeals, First Circuit",
        date: "2021-04-20",
        summary: "Challenge to federal guidance limiting student visa eligibility for fully online academic programs during the pandemic.",
        fullText: `President and Fellows of Harvard College v. U.S. Department of Homeland Security, et al., No. 20-1774\nU.S. Court of Appeals for the First Circuit, April 20, 2021\n\nHarvard and MIT filed suit to enjoin a July 2020 directive from ICE that would have required international students to leave the U.S. if their courses were entirely online.\n\nThe district court granted a preliminary injunction. The government withdrew the directive.\n\nThe appeal was dismissed as moot, but the First Circuit strongly criticized the government's position as arbitrary and capricious.\n\nJudge O'Malley wrote: 'The haste and lack of reasoned explanation undermine confidence in the agency's decision-making.'\n\nParties: Harvard University, MIT, DHS, ICE Director Matthew Albence\nTimeline: July 6, 2020 (directive issued), July 14, 2020 (lawsuit filed), July 16, 2020 (injunction granted), April 20, 2021 (appeal dismissed with commentary).`,
        snippet: "The appeal was dismissed as moot, but the First Circuit strongly criticized the government's position as arbitrary and capricious."
      },
      {
        id: 11,
        title: "Ford Motor Co. v. Montoya",
        court: "U.S. Supreme Court",
        date: "2022-06-27",
        summary: "Personal jurisdiction in product liability cases involving allegedly defective vehicles sold out of state.",
        fullText: `Ford Motor Company v. Montoya, No. 20-296\nSupreme Court of the United States, June 27, 2022\n\nPlaintiffs, residents of Arizona and Montana, sued Ford for injuries caused by SUV rollovers. The vehicles were designed and manufactured in Michigan and sold in other states.\n\nThe central question was whether Ford's general connections with the forum states were sufficient to establish specific jurisdiction.\n\nJustice Kagan delivered the opinion: Ford purposefully availed itself of the forum markets by selling and servicing similar vehicles there.\n\nThe judgment of the state supreme courts was affirmed.\n\nDissent by Justice Thomas, joined by Alito and Gorsuch, argued for stricter limits on jurisdiction.\n\nPlaintiffs: Daniel Montoya, Cecilia Torres\nKey dates: 2017-2018 (accidents), 2019 (trials in state courts), June 27, 2022 (SCOTUS decision).`,
        snippet: "Justice Kagan delivered the opinion: Ford purposefully availed itself of the forum markets by selling and servicing similar vehicles there."
      },
      {
        id: 12,
        title: "Netflix, Inc. v. Doe Publishers",
        court: "U.S. District Court, Northern District of California",
        date: "2023-03-15",
        summary: "Copyright infringement action against anonymous operators of websites distributing unauthorized streaming links.",
        fullText: `Netflix, Inc. v. Does 1-100, Case No. 5:22-cv-08842\nU.S. District Court, Northern District of California, March 15, 2023\n\nNetflix filed suit against 100 anonymous defendants operating domains that aggregate and distribute unauthorized links to copyrighted content.\n\nPlaintiff moved for leave to serve third-party subpoena on domain registrars and cloud providers prior to the Rule 26(f) conference.\n\nJudge Vince Chhabria granted the motion, finding good cause under Rule 26(d) due to risk of evidence destruction.\n\nThe court emphasized the economic harm caused by large-scale piracy operations.\n\nThe order permits discovery to identify defendants through WHOIS data and hosting logs.\n\nKey entities: Netflix, Inc., Cloudflare (third party), Registrar.com (third party)\nTimeline: December 2022 (filing), February 2023 (hearing), March 15, 2023 (order).`,
        snippet: "Judge Vince Chhabria granted the motion, finding good cause under Rule 26(d) due to risk of evidence destruction."
      },
      {
        id: 13,
        title: "Doe v. Twitter, Inc.",
        court: "U.S. Court of Appeals, Ninth Circuit",
        date: "2021-10-12",
        summary: "Section 230 immunity in cases involving failure to remove user-generated content alleged to facilitate sex trafficking.",
        fullText: `Jane Doe v. Twitter, Inc., No. 20-15875\nU.S. Court of Appeals for the Ninth Circuit, October 12, 2021\n\nPlaintiff, a victim of sex trafficking as a minor, alleged that Twitter provided material support by hosting and algorithmically promoting content that facilitated her exploitation.\n\nThe claim was brought under the Trafficking Victims Protection Reauthorization Act (TVPRA), 18 U.S.C. § 2252A.\n\nThe Ninth Circuit held that Twitter was not liable because it did not 'knowingly' assist in the creation or development of the unlawful content.\n\nJudge William A. Fletcher dissented, arguing that the platform's recommendation algorithms constituted active participation.\n\nThe majority emphasized the distinction between hosting content and developing it.\n\nParties: Jane Doe, Twitter, Inc.\nKey dates: 2015 (events), 2019 (lawsuit filed), October 12, 2021 (appellate decision).`,
        snippet: "The Ninth Circuit held that Twitter was not liable because it did not 'knowingly' assist in the creation or development of the unlawful content."
      },
      {
        id: 14,
        title: "Siemens Energy v. General Power Systems",
        court: "International Chamber of Commerce, Arbitration",
        date: "2022-11-30",
        summary: "International commercial arbitration concerning breach of a cross-licensing agreement for turbine technology.",
        fullText: `Siemens Energy AG v. General Power Systems, LLC\nICC Case No. 23214/MS/GA\nFinal Award, November 30, 2022\n\nSiemens alleged that GPS violated the exclusivity provisions of a 2018 cross-licensing agreement by sublicensing patented combustion technology to third parties in Asia.\n\nGPS counterclaimed for failure to pay royalties and technical support.\n\nThe tribunal, chaired by Dr. Lena Müller, found partial breach by GPS but also found Siemens in breach of support obligations.\n\nThe award denied injunctive relief but awarded €12.7 million in damages to Siemens, offset by $3.2 million for Siemens' breaches.\n\nNeutral experts: Dr. Hiro Tanaka (engineering), Prof. Elena Petrova (contract law)\nTimeline: 2018 (agreement), 2020 (dispute notice), May-September 2022 (hearings), November 30, 2022 (award).`,
        snippet: "The award denied injunctive relief but awarded €12.7 million in damages to Siemens, offset by $3.2 million for Siemens' breaches."
      },
      {
        id: 15,
        title: "People v. Thompson",
        court: "Supreme Court of Florida",
        date: "2020-09-17",
        summary: "Capital punishment case involving competency to be executed under Ford v. Wainwright and its progeny.",
        fullText: `The State of Florida v. Reginald Thompson, No. SC20-888\nSupreme Court of Florida, September 17, 2020\n\nThompson was sentenced to death in 2005 for a triple homicide. Multiple mental health evaluations over the years indicated schizophrenia and delusional disorder.\n\nIn 2019, a circuit court found Thompson incompetent to be executed. The state appealed.\n\nThe Supreme Court affirmed, holding that Thompson lacked rational understanding of the punishment and its reason.\n\nChief Justice Canady wrote: 'The Eighth Amendment prohibits executing a prisoner who lacks the mental capacity to comprehend the meaning and purpose of the penalty.'\n\nThe execution was stayed pending restoration of competency.\n\nDefendant: Reginald Thompson\nVictims: Maria Lopez, James Wilson, Susan Reed\nKey dates: 2003 (crime), 2005 (sentencing), 2019 (competency hearing), September 17, 2020 (ruling).`,
        snippet: "The execution was stayed pending restoration of competency."
      }
    ];

    // DOM Elements
    const searchBar = document.getElementById('search-bar');
    const resultsList = document.getElementById('results-list');
    const detailPane = document.getElementById('detail-pane');
    const detailTitle = document.getElementById('detail-title');
    const detailMeta = document.getElementById('detail-meta');
    const summaryContent = document.getElementById('summary-content');
    const fullTextContent = document.getElementById('full-text-content');
    const extractEntitiesBtn = document.getElementById('extract-entities');
    const tabs = document.querySelectorAll('.tab');
    const summaryTab = document.getElementById('summary-tab');
    const fullTextTab = document.getElementById('full-text-tab');
    const notesList = document.getElementById('notes-list');

    // State
    let selectedCase = null;
    let notes = JSON.parse(localStorage.getItem('vibe-law-notes')) || {};

    // Initialize
    function init() {
      renderResults(cases);
      setupEventListeners();
      loadNotes();
    }

    // Render search results
    function renderResults(results) {
      resultsList.innerHTML = '';
      if (results.length === 0) {
        resultsList.innerHTML = '<li class="result-item">No cases match your query.</li>';
        return;
      }
      results.forEach(caseItem => {
        const li = document.createElement('li');
        li.className = 'result-item';
        li.innerHTML = `
          <div class="result-title">${caseItem.title}</div>
          <div class="result-meta">${caseItem.court} | ${formatDate(caseItem.date)}</div>
          <div class="result-snippet">${caseItem.snippet}</div>
        `;
        li.addEventListener('click', () => openCase(caseItem));
        resultsList.appendChild(li);
      });
    }

    // Open a case in detail view
    function openCase(caseItem) {
      selectedCase = caseItem;
      detailTitle.textContent = caseItem.title;
      detailMeta.textContent = `${caseItem.court} | ${formatDate(caseItem.date)}`;
      summaryContent.innerHTML = `<p>${caseItem.summary}</p>`;
      fullTextContent.textContent = caseItem.fullText;

      // Show detail pane
      detailPane.style.display = 'flex';

      // Reset tabs
      tabs.forEach(tab => tab.classList.remove('active'));
      summaryTab.classList.add('active');
      fullTextTab.classList.remove('active');
      document.querySelector('[data-tab="summary"]').classList.add('active');
    }

    // Format date as YYYY-MM-DD to Month DD, YYYY
    function formatDate(dateStr) {
      const date = new Date(dateStr);
      return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
    }

    // Setup event listeners
    function setupEventListeners() {
      // Search
      searchBar.addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase();
        if (query.trim() === '') {
          renderResults(cases);
        } else {
          const filtered = cases.filter(c =>
            c.title.toLowerCase().includes(query) ||
            c.court.toLowerCase().includes(query) ||
            c.summary.toLowerCase().includes(query) ||
            c.fullText.toLowerCase().includes(query)
          );
          renderResults(filtered);
        }
      });

      // Tab switching
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const tabId = tab.getAttribute('data-tab');
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          if (tabId === 'summary') {
            summaryTab.classList.add('active');
            fullTextTab.classList.remove('active');
          } else {
            summaryTab.classList.remove('active');
            fullTextTab.classList.add('active');
          }
        });
      });

      // Extract Entities
      extractEntitiesBtn.addEventListener('click', () => {
        if (!selectedCase) return;
        const text = fullTextContent.textContent;
        const highlighted = highlightEntities(text);
        fullTextContent.innerHTML = highlighted;
        // Also extract some snippets for notes
        const nameRegex = /\b([A-Z][a-z]+(?:\s+[A-Z][a-z]+)+)\b/g;
        const dateRegex = /\b(\d{1,2}[-\/]\d{1,2}[-\/]\d{4}|\d{4}[-\/]\d{1,2}[-\/]\d{1,2}|\b(?:January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{1,2},\s+\d{4})\b/g;
        const matches = new Set();
        let match;

        while ((match = nameRegex.exec(text)) !== null) {
          matches.add(match[1]);
        }
        while ((match = dateRegex.exec(text)) !== null) {
          matches.add(match[1]);
        }

        // Save first few matches as note snippets
        const noteKey = `case-${selectedCase.id}`;
        if (!notes[noteKey]) {
          notes[noteKey] = [];
        }
        let newCount = 0;
        for (const m of matches) {
          if (!notes[noteKey].includes(m)) {
            notes[noteKey].push(m);
            newCount++;
            if (newCount >= 3) break;
          }
        }
        if (newCount > 0) {
          saveNotes();
          loadNotes();
        }
      });
    }

    // Highlight entities in text
    function highlightEntities(text) {
      // Highlight names: sequences of capitalized words
      text = text.replace(/\b([A-Z][a-z]+(?:\s+[A-Z][a-z]+)+)\b/g, '<span class="highlight">$1</span>');
      // Highlight dates
      text = text.replace(/\b(\d{1,2}[-\/]\d{1,2}[-\/]\d{4}|\d{4}[-\/]\d{1,2}[-\/]\d{1,2})\b/g, '<span class="highlight">$1</span>');
      text = text.replace(/\b(?:January|February|March|April|May|June|July|August|September|October|November|December)\s+\d{1,2},\s+\d{4}\b/g, '<span class="highlight">$&</span>');
      // Highlight monetary amounts
      text = text.replace(/\$[\d,]+(\.\d{2})?|€[\d,]+(\.\d{2})?/g, '<span class="highlight">$&</span>');
      return text;
    }

    // Save notes to localStorage
    function saveNotes() {
      localStorage.setItem('vibe-law-notes', JSON.stringify(notes));
    }

    // Load notes into sidebar
    function loadNotes() {
      notesList.innerHTML = '';
      if (Object.keys(notes).length === 0) {
        notesList.innerHTML = '<div class="empty-notes">No notes yet. Highlight text and press \'Extract Entities\' to save snippets.</div>';
        return;
      }
      Object.keys(notes).forEach(key => {
        const caseNotes = notes[key];
        caseNotes.forEach(note => {
          const noteEl = document.createElement('div');
          noteEl.className = 'note-item';
          noteEl.innerHTML = `
            <button class="note-delete" data-note="${note}" data-case="${key}">×</button>
            ${note}
          `;
          notesList.appendChild(noteEl);
        });
      });

      // Add delete listeners
      document.querySelectorAll('.note-delete').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const note = e.target.getAttribute('data-note');
          const caseKey = e.target.getAttribute('data-case');
          notes[caseKey] = notes[caseKey].filter(n => n !== note);
          if (notes[caseKey].length === 0) {
            delete notes[caseKey];
          }
          saveNotes();
          loadNotes();
        });
      });
    }

    // Start the app
    init();
  </script>
</body>
</html>