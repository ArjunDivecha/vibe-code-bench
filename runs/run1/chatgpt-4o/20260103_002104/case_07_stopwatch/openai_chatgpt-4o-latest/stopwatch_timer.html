<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stopwatch & Timer</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #222;
            color: #0f0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: start;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        h1 {
            margin-bottom: 10px;
        }

        .mode-toggle {
            margin: 20px;
        }

        .clock-display {
            font-size: 3em;
            background-color: #000;
            padding: 20px 40px;
            border: 4px solid #0f0;
            border-radius: 10px;
            margin: 20px 0;
            min-width: 300px;
            text-align: center;
        }

        .controls {
            margin: 10px;
        }

        .controls button {
            font-size: 1em;
            margin: 5px;
            padding: 10px 20px;
            background-color: #000;
            color: #0f0;
            border: 2px solid #0f0;
            border-radius: 5px;
            cursor: pointer;
        }

        .controls button:hover {
            background-color: #0f0;
            color: #000;
        }

        .lap-list {
            margin-top: 10px;
            max-height: 200px;
            overflow-y: auto;
            width: 320px;
        }

        .lap-list ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .lap-list li {
            background-color: #111;
            padding: 5px 10px;
            border-bottom: 1px solid #0f0;
        }

        .timer-inputs {
            margin: 10px 0;
        }

        .timer-inputs input {
            width: 60px;
            font-size: 1.5em;
            text-align: center;
            margin: 0 5px;
        }

        audio {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Stopwatch & Timer</h1>
    <div class="mode-toggle">
        <label>
            <input type="radio" name="mode" value="stopwatch" checked> Stopwatch
        </label>
        <label>
            <input type="radio" name="mode" value="timer"> Timer
        </label>
    </div>

    <div class="timer-inputs" id="timer-inputs">
        <input type="number" id="hours" min="0" max="99" value="0"> :
        <input type="number" id="minutes" min="0" max="59" value="0"> :
        <input type="number" id="seconds" min="0" max="59" value="0">
    </div>

    <div class="clock-display" id="display">00:00:00.00</div>

    <div class="controls" id="stopwatch-controls">
        <button id="start">Start</button>
        <button id="stop" disabled>Stop</button>
        <button id="lap" disabled>Lap</button>
        <button id="reset">Reset</button>
    </div>

    <div class="controls" id="timer-controls" style="display:none;">
        <button id="timer-start">Start</button>
        <button id="timer-pause" disabled>Pause</button>
        <button id="timer-reset">Reset</button>
    </div>

    <div class="lap-list" id="laps">
        <ul id="lap-times"></ul>
    </div>

    <audio id="alarm" src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEA..."></audio>

    <script>
        const display = document.getElementById('display');
        const stopwatchControls = document.getElementById('stopwatch-controls');
        const timerControls = document.getElementById('timer-controls');
        const timerInputs = document.getElementById('timer-inputs');
        const lapList = document.getElementById('lap-times');
        const alarm = document.getElementById('alarm');

        let mode = 'stopwatch';

        // Stopwatch variables
        let stopwatchStart = null;
        let stopwatchElapsed = 0;
        let stopwatchInterval = null;

        // Timer variables
        let timerTotal = 0;
        let timerRemaining = 0;
        let timerInterval = null;
        let timerRunning = false;

        function formatTime(ms) {
            const milliseconds = Math.floor((ms % 1000) / 10);
            const totalSeconds = Math.floor(ms / 1000);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            return (
                String(hours).padStart(2, '0') + ':' +
                String(minutes).padStart(2, '0') + ':' +
                String(seconds).padStart(2, '0') + '.' +
                String(milliseconds).padStart(2, '0')
            );
        }

        function updateStopwatch() {
            const now = Date.now();
            const elapsed = stopwatchElapsed + (now - stopwatchStart);
            display.textContent = formatTime(elapsed);
        }

        document.getElementsByName('mode').forEach(radio => {
            radio.addEventListener('change', () => {
                mode = document.querySelector('input[name="mode"]:checked').value;
                if (mode === 'stopwatch') {
                    timerControls.style.display = 'none';
                    stopwatchControls.style.display = 'block';
                    timerInputs.style.display = 'none';
                    display.textContent = formatTime(stopwatchElapsed);
                } else {
                    stopwatchControls.style.display = 'none';
                    timerControls.style.display = 'block';
                    timerInputs.style.display = 'block';
                    updateTimerDisplay();
                }
            });
        });

        // Stopwatch event listeners
        document.getElementById('start').addEventListener('click', () => {
            stopwatchStart = Date.now();
            stopwatchInterval = setInterval(updateStopwatch, 10);
            document.getElementById('start').disabled = true;
            document.getElementById('stop').disabled = false;
            document.getElementById('lap').disabled = false;
        });

        document.getElementById('stop').addEventListener('click', () => {
            clearInterval(stopwatchInterval);
            stopwatchElapsed += Date.now() - stopwatchStart;
            document.getElementById('start').disabled = false;
            document.getElementById('stop').disabled = true;
            document.getElementById('lap').disabled = true;
        });

        document.getElementById('lap').addEventListener('click', () => {
            const now = Date.now();
            const elapsed = stopwatchElapsed + (now - stopwatchStart);
            const li = document.createElement('li');
            li.textContent = formatTime(elapsed);
            lapList.appendChild(li);
        });

        document.getElementById('reset').addEventListener('click', () => {
            clearInterval(stopwatchInterval);
            stopwatchElapsed = 0;
            stopwatchStart = null;
            display.textContent = formatTime(0);
            document.getElementById('start').disabled = false;
            document.getElementById('stop').disabled = true;
            document.getElementById('lap').disabled = true;
            lapList.innerHTML = '';
        });

        // Timer functions
        function updateTimerDisplay() {
            display.textContent = formatTime(timerRemaining);
        }

        function tickTimer() {
            timerRemaining -= 100;
            if (timerRemaining <= 0) {
                clearInterval(timerInterval);
                timerRemaining = 0;
                timerRunning = false;
                updateTimerDisplay();
                alarm.play();
                document.getElementById('timer-start').disabled = false;
                document.getElementById('timer-pause').disabled = true;
            } else {
                updateTimerDisplay();
            }
        }

        document.getElementById('timer-start').addEventListener('click', () => {
            if (!timerRunning) {
                const h = parseInt(document.getElementById('hours').value) || 0;
                const m = parseInt(document.getElementById('minutes').value) || 0;
                const s = parseInt(document.getElementById('seconds').value) || 0;
                timerTotal = ((h * 3600) + (m * 60) + s) * 1000;
                if (timerTotal <= 0) return;
                timerRemaining = timerTotal;
            }
            timerRunning = true;
            timerInterval = setInterval(tickTimer, 100);
            document.getElementById('timer-start').disabled = true;
            document.getElementById('timer-pause').disabled = false;
        });

        document.getElementById('timer-pause').addEventListener('click', () => {
            clearInterval(timerInterval);
            timerRunning = false;
            document.getElementById('timer-start').disabled = false;
            document.getElementById('timer-pause').disabled = true;
        });

        document.getElementById('timer-reset').addEventListener('click', () => {
            clearInterval(timerInterval);
            timerRemaining = 0;
            timerRunning = false;
            updateTimerDisplay();
            document.getElementById('timer-start').disabled = false;
            document.getElementById('timer-pause').disabled = true;
        });

        // Initialize
        display.textContent = formatTime(0);
    </script>
</body>
</html>