<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Color Palette Generator</title>
<style>
    :root {
        --bg:#0f1116;
        --card:#161920;
        --text:#e7ecf3;
        --muted:#8a92a6;
        --accent:#66d9ef;
    }
    *{box-sizing:border-box;}
    body{
        margin:0;
        font-family: "Inter", system-ui, -apple-system, sans-serif;
        background: radial-gradient(circle at 20% 20%, rgba(102,217,239,0.12), transparent 30%),
                    radial-gradient(circle at 80% 0%, rgba(255,121,198,0.1), transparent 25%),
                    var(--bg);
        color:var(--text);
        min-height:100vh;
        display:flex;
        flex-direction:column;
        align-items:center;
    }
    header{
        width:100%;
        max-width:1100px;
        padding:28px 22px 10px;
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:12px;
    }
    h1{
        margin:0;
        font-size:26px;
        letter-spacing:0.5px;
    }
    .actions{
        display:flex;
        gap:10px;
        flex-wrap:wrap;
    }
    button{
        background:var(--card);
        border:1px solid rgba(255,255,255,0.08);
        color:var(--text);
        padding:10px 14px;
        border-radius:12px;
        font-size:14px;
        cursor:pointer;
        transition:all .2s ease;
        display:inline-flex;
        align-items:center;
        gap:8px;
    }
    button:hover{
        border-color:rgba(255,255,255,0.18);
        transform:translateY(-1px);
    }
    button.primary{
        background:linear-gradient(120deg, #5ee7df, #b490ca);
        color:#0c0e12;
        font-weight:700;
        box-shadow:0 10px 30px rgba(102,217,239,0.25);
    }
    .palette{
        width:100%;
        max-width:1100px;
        padding:10px 22px 18px;
        display:grid;
        grid-template-columns:repeat(auto-fit, minmax(180px,1fr));
        gap:14px;
    }
    .swatch{
        border-radius:16px;
        overflow:hidden;
        position:relative;
        background:var(--card);
        min-height:220px;
        box-shadow:0 18px 40px rgba(0,0,0,0.25);
        transition:transform .25s ease, box-shadow .25s ease;
    }
    .swatch:hover{
        transform:translateY(-4px);
        box-shadow:0 22px 50px rgba(0,0,0,0.35);
    }
    .color-block{
        height:140px;
        transition:background .35s ease;
        cursor:pointer;
        display:flex;
        align-items:center;
        justify-content:center;
        position:relative;
    }
    .copied{
        position:absolute;
        top:10px;
        right:10px;
        background:rgba(0,0,0,0.45);
        color:#fff;
        padding:4px 10px;
        border-radius:20px;
        font-size:12px;
        opacity:0;
        transform:translateY(-8px);
        pointer-events:none;
        transition:opacity .2s ease, transform .2s ease;
    }
    .copied.show{
        opacity:1;
        transform:translateY(0);
    }
    .info{
        padding:14px 14px 16px;
        display:flex;
        flex-direction:column;
        gap:6px;
    }
    .info .row{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
    }
    .hex{
        font-weight:700;
        font-size:16px;
        letter-spacing:0.5px;
    }
    .rgb,.name{
        color:var(--muted);
        font-size:13px;
    }
    .chip{
        padding:4px 8px;
        border-radius:8px;
        background:rgba(255,255,255,0.06);
        border:1px solid rgba(255,255,255,0.08);
        font-size:12px;
    }
    .lock-btn{
        background:rgba(0,0,0,0.15);
        border:1px solid rgba(255,255,255,0.12);
        border-radius:10px;
        padding:6px 10px;
        color:var(--text);
        cursor:pointer;
        display:flex;
        align-items:center;
        gap:6px;
        font-size:13px;
        transition:all .2s ease;
    }
    .lock-btn.locked{
        background:rgba(255,255,255,0.12);
        border-color:rgba(255,255,255,0.22);
    }
    .saved{
        width:100%;
        max-width:1100px;
        padding:6px 22px 40px;
    }
    .saved h2{
        margin:18px 0 10px;
        font-size:18px;
        color:var(--muted);
    }
    .saved-list{
        display:grid;
        grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
        gap:12px;
    }
    .saved-card{
        background:var(--card);
        border:1px solid rgba(255,255,255,0.08);
        border-radius:12px;
        padding:10px;
        display:flex;
        flex-direction:column;
        gap:8px;
        box-shadow:0 10px 30px rgba(0,0,0,0.2);
        transition:transform .2s ease, border .2s ease;
    }
    .saved-card:hover{
        transform:translateY(-2px);
        border-color:rgba(255,255,255,0.18);
    }
    .saved-bar{
        display:flex;
        height:48px;
        border-radius:10px;
        overflow:hidden;
        box-shadow:0 10px 20px rgba(0,0,0,0.2);
    }
    .saved-color{
        flex:1;
    }
    .saved-actions{
        display:flex;
        justify-content:space-between;
        align-items:center;
        gap:10px;
    }
    .pill{
        font-size:12px;
        color:var(--muted);
    }
    .link-btn{
        color:var(--accent);
        cursor:pointer;
        border:none;
        background:none;
        padding:0;
    }
    .tip{
        color:var(--muted);
        font-size:13px;
        margin-top:6px;
    }
    @media (max-width:720px){
        header{
            flex-direction:column;
            align-items:flex-start;
        }
        .palette{padding:10px 16px 18px;}
        .saved{padding:6px 16px 40px;}
    }
</style>
</head>
<body>
<header>
    <div>
        <h1>Color Palette Generator</h1>
        <div class="tip">Hit <b>Spacebar</b> to shuffle. Click a swatch to copy its HEX. Lock favorites to keep them.</div>
    </div>
    <div class="actions">
        <button id="generate" class="primary">ðŸŽ² Generate</button>
        <button id="save">ðŸ’¾ Save palette</button>
        <button id="clear-saved">ðŸ§¹ Clear saved</button>
    </div>
</header>

<section class="palette" id="palette"></section>

<section class="saved">
    <h2>Saved palettes</h2>
    <div class="saved-list" id="saved-list"></div>
</section>

<script>
const paletteEl = document.getElementById('palette');
const savedEl = document.getElementById('saved-list');
const generateBtn = document.getElementById('generate');
const saveBtn = document.getElementById('save');
const clearBtn = document.getElementById('clear-saved');

const COLOR_COUNT = 5;
let palette = [];
let savedPalettes = loadSavedPalettes();

const cssColors = [
"aliceblue#f0f8ff","antiquewhite#faebd7","aqua#00ffff","aquamarine#7fffd4","azure#f0ffff",
"beige#f5f5dc","bisque#ffe4c4","black#000000","blanchedalmond#ffebcd","blue#0000ff",
"blueviolet#8a2be2","brown#a52a2a","burlywood#deb887","cadetblue#5f9ea0","chartreuse#7fff00",
"chocolate#d2691e","coral#ff7f50","cornflowerblue#6495ed","cornsilk#fff8dc","crimson#dc143c",
"cyan#00ffff","darkblue#00008b","darkcyan#008b8b","darkgoldenrod#b8860b","darkgray#a9a9a9",
"darkgreen#006400","darkkhaki#bdb76b","darkmagenta#8b008b","darkolivegreen#556b2f","darkorange#ff8c00",
"darkorchid#9932cc","darkred#8b0000","darksalmon#e9967a","darkseagreen#8fbc8f","darkslateblue#483d8b",
"darkslategray#2f4f4f","darkturquoise#00ced1","darkviolet#9400d3","deeppink#ff1493","deepskyblue#00bfff",
"dimgray#696969","dodgerblue#1e90ff","firebrick#b22222","floralwhite#fffaf0","forestgreen#228b22",
"fuchsia#ff00ff","gainsboro#dcdcdc","ghostwhite#f8f8ff","gold#ffd700","goldenrod#daa520",
"gray#808080","green#008000","greenyellow#adff2f","honeydew#f0fff0","hotpink#ff69b4",
"indianred#cd5c5c","indigo#4b0082","ivory#fffff0","khaki#f0e68c","lavender#e6e6fa",
"lavenderblush#fff0f5","lawngreen#7cfc00","lemonchiffon#fffacd","lightblue#add8e6","lightcoral#f08080",
"lightcyan#e0ffff","lightgoldenrodyellow#fafad2","lightgray#d3d3d3","lightgreen#90ee90","lightpink#ffb6c1",
"lightsalmon#ffa07a","lightseagreen#20b2aa","lightskyblue#87cefa","lightslategray#778899","lightsteelblue#b0c4de",
"lightyellow#ffffe0","lime#00ff00","limegreen#32cd32","linen#faf0e6","magenta#ff00ff",
"maroon#800000","mediumaquamarine#66cdaa","mediumblue#0000cd","mediumorchid#ba55d3","mediumpurple#9370db",
"mediumseagreen#3cb371","mediumslateblue#7b68ee","mediumspringgreen#00fa9a","mediumturquoise#48d1cc","mediumvioletred#c71585",
"midnightblue#191970","mintcream#f5fffa","mistyrose#ffe4e1","moccasin#ffe4b5","navajowhite#ffdead",
"navy#000080","oldlace#fdf5e6","olive#808000","olivedrab#6b8e23","orange#ffa500",
"orangered#ff4500","orchid#da70d6","palegoldenrod#eee8aa","palegreen#98fb98","paleturquoise#afeeee",
"palevioletred#db7093","papayawhip#ffefd5","peachpuff#ffdab9","peru#cd853f","pink#ffc0cb",
"plum#dda0dd","powderblue#b0e0e6","purple#800080","rebeccapurple#663399","red#ff0000",
"rosybrown#bc8f8f","royalblue#4169e1","saddlebrown#8b4513","salmon#fa8072","sandybrown#f4a460",
"seagreen#2e8b57","seashell#fff5ee","sienna#a0522d","silver#c0c0c0","skyblue#87ceeb",
"slateblue#6a5acd","slategray#708090","snow#fffafa","springgreen#00ff7f","steelblue#4682b4",
"tan#d2b48c","teal#008080","thistle#d8bfd8","tomato#ff6347","turquoise#40e0d0",
"violet#ee82ee","wheat#f5deb3","white#ffffff","whitesmoke#f5f5f5","yellow#ffff00","yellowgreen#9acd32"
].map(s=>{
    const [name,hex]=s.split('#');
    const rgb=hexToRgb('#'+hex);
    return {name,hex:'#'+hex,rgb};
});

function hexToRgb(hex){
    const h=hex.replace('#','');
    return [
        parseInt(h.slice(0,2),16),
        parseInt(h.slice(2,4),16),
        parseInt(h.slice(4,6),16)
    ];
}
function rgbToString(rgb){return `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;}

function randomColor(){
    return '#'+Math.floor(Math.random()*0xffffff).toString(16).padStart(6,'0');
}

function nearestName(hex){
    const rgb=hexToRgb(hex);
    let best=cssColors[0], bestDist=Infinity;
    for(const c of cssColors){
        const d = Math.pow(rgb[0]-c.rgb[0],2)+Math.pow(rgb[1]-c.rgb[1],2)+Math.pow(rgb[2]-c.rgb[2],2);
        if(d<bestDist){bestDist=d; best=c;}
    }
    return best.name;
}

function generatePalette(){
    palette = palette.map(item=>{
        if(item.locked) return item;
        const color=randomColor();
        return {hex:color, locked:false};
    });
    animatePalette();
    renderPalette();
}

function initPalette(){
    palette=[];
    for(let i=0;i<COLOR_COUNT;i++){
        palette.push({hex:randomColor(), locked:false});
    }
}

function copyToClipboard(text, target){
    if(navigator.clipboard){
        navigator.clipboard.writeText(text).then(()=>{
            showCopied(target);
        }).catch(()=>{
            fallbackCopy(text, target);
        });
    }else{
        fallbackCopy(text, target);
    }
}
function fallbackCopy(text, target){
    const textarea=document.createElement('textarea');
    textarea.value=text;
    document.body.appendChild(textarea);
    textarea.select();
    try{document.execCommand('copy');}catch(e){}
    document.body.removeChild(textarea);
    showCopied(target);
}
function showCopied(target){
    const tag=target.querySelector('.copied');
    tag.classList.add('show');
    setTimeout(()=>tag.classList.remove('show'),900);
}

function renderPalette(){
    paletteEl.innerHTML='';
    palette.forEach((item,idx)=>{
        const rgb=hexToRgb(item.hex);
        const name=nearestName(item.hex);
        const swatch=document.createElement('div');
        swatch.className='swatch';
        swatch.innerHTML=`
            <div class="color-block" style="background:${item.hex}" data-index="${idx}">
                <div class="copied">Copied!</div>
            </div>
            <div class="info">
                <div class="row">
                    <div class="hex">${item.hex.toUpperCase()}</div>
                    <button class="lock-btn ${item.locked?'locked':''}" data-index="${idx}">
                        ${item.locked?'ðŸ”’ Locked':'ðŸ”“ Lock'}
                    </button>
                </div>
                <div class="row">
                    <div class="rgb">${rgbToString(rgb)}</div>
                    <div class="chip">${name}</div>
                </div>
            </div>
        `;
        const block=swatch.querySelector('.color-block');
        block.addEventListener('click',()=>copyToClipboard(item.hex, block));
        const lockBtn=swatch.querySelector('.lock-btn');
        lockBtn.addEventListener('click',()=>{
            palette[idx].locked=!palette[idx].locked;
            renderPalette();
        });
        paletteEl.appendChild(swatch);
    });
}

function animatePalette(){
    document.querySelectorAll('.swatch').forEach((el,i)=>{
        el.style.transform='translateY(6px)';
        el.style.opacity='0.4';
        setTimeout(()=>{
            el.style.transition='transform .35s ease, opacity .35s ease';
            el.style.transform='translateY(0)';
            el.style.opacity='1';
        },10);
        setTimeout(()=>{
            el.style.transition='';
        },400);
    });
}

function loadSavedPalettes(){
    try{
        const data=localStorage.getItem('savedPalettes');
        if(!data) return [];
        const arr=JSON.parse(data);
        return Array.isArray(arr)?arr:[];
    }catch(e){
        return [];
    }
}
function storeSavedPalettes(){
    localStorage.setItem('savedPalettes', JSON.stringify(savedPalettes));
}

function saveCurrentPalette(){
    const current=palette.map(p=>p.hex.toUpperCase());
    if(current.some(c=>!c)) return;
    const exists=savedPalettes.some(p=>JSON.stringify(p)===JSON.stringify(current));
    if(exists) return;
    savedPalettes.unshift(current);
    if(savedPalettes.length>30) savedPalettes= savedPalettes.slice(0,30);
    storeSavedPalettes();
    renderSaved();
}

function renderSaved(){
    savedEl.innerHTML='';
    if(savedPalettes.length===0){
        savedEl.innerHTML='<div class="pill">No saved palettes yet. Save one you love!</div>';
        return;
    }
    savedPalettes.forEach((p,idx)=>{
        const card=document.createElement('div');
        card.className='saved-card';
        const bar=document.createElement('div');
        bar.className='saved-bar';
        p.forEach(color=>{
            const c=document.createElement('div');
            c.className='saved-color';
            c.style.background=color;
            bar.appendChild(c);
        });
        const actions=document.createElement('div');
        actions.className='saved-actions';
        const name=document.createElement('div');
        name.className='pill';
        name.textContent=p.join(' Â· ');
        const loadBtn=document.createElement('button');
        loadBtn.className='link-btn';
        loadBtn.textContent='Load';
        loadBtn.addEventListener('click',()=>loadPalette(p));
        const delBtn=document.createElement('button');
        delBtn.className='link-btn';
        delBtn.style.color='#ff7f98';
        delBtn.textContent='Delete';
        delBtn.addEventListener('click',()=>{removeSaved(idx);});
        const right=document.createElement('div');
        right.style.display='flex';
        right.style.gap='12px';
        right.append(loadBtn,delBtn);
        actions.append(name,right);
        card.append(bar,actions);
        savedEl.appendChild(card);
    });
}
function loadPalette(colors){
    palette=colors.map(c=>({hex:c, locked:false}));
    renderPalette();
}
function removeSaved(i){
    savedPalettes.splice(i,1);
    storeSavedPalettes();
    renderSaved();
}

generateBtn.addEventListener('click',generatePalette);
saveBtn.addEventListener('click',saveCurrentPalette);
clearBtn.addEventListener('click',()=>{
    if(confirm('Clear all saved palettes?')){
        savedPalettes=[];
        storeSavedPalettes();
        renderSaved();
    }
});

window.addEventListener('keydown',e=>{
    if(e.code==='Space'){
        e.preventDefault();
        generatePalette();
    }
});

initPalette();
renderPalette();
renderSaved();
</script>
</body>
</html>