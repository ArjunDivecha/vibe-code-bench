<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Memory Match Game</title>
<style>
:root{
  --card-size: 90px;
  --primary: #4c6fff;
  --bg: #0e1220;
  --accent: #ff7eb6;
  --success: #6ddc8f;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family: 'Segoe UI',system-ui,-apple-system,sans-serif;
  background: radial-gradient(circle at 20% 20%, #152040, #0e1220 55%);
  color:#f5f7ff;
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
}
header{
  text-align:center;
  margin:30px 10px 15px;
}
h1{
  margin:0 0 8px;
  letter-spacing:1px;
}
#stats{
  display:flex;
  gap:14px;
  justify-content:center;
  flex-wrap:wrap;
  font-weight:600;
}
#board{
  display:grid;
  grid-template-columns: repeat(4, var(--card-size));
  grid-template-rows: repeat(4, var(--card-size));
  gap:12px;
  perspective:1000px;
  padding:16px;
  border-radius:16px;
  background:rgba(255,255,255,0.04);
  box-shadow:0 20px 50px rgba(0,0,0,0.35);
}
.card{
  position:relative;
  width:var(--card-size);
  height:var(--card-size);
  cursor:pointer;
  transform-style:preserve-3d;
  transition: transform 0.5s cubic-bezier(.4,1.6,.4,1);
}
.card:hover{ transform: translateY(-4px) rotateY(var(--rot,0deg)); }
.card.flipped{ transform: rotateY(180deg); }
.card.matched{
  animation: pop 0.6s ease;
  box-shadow:0 0 0 3px rgba(109,220,143,0.4);
}
@keyframes pop{
  0%{transform: rotateY(180deg) scale(1);}
  40%{transform: rotateY(180deg) scale(1.07);}
  100%{transform: rotateY(180deg) scale(1);}
}
.face{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:12px;
  backface-visibility:hidden;
  font-size:34px;
  user-select:none;
}
.front{
  background:linear-gradient(135deg,#1c2340,#14182d);
  border:2px solid rgba(255,255,255,0.05);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,0.02);
}
.back{
  background:linear-gradient(145deg,var(--primary),#7a9eff);
  transform: rotateY(180deg);
  border:2px solid rgba(255,255,255,0.15);
  color:#0e1220;
  font-size:42px;
}
.controls{
  margin:14px;
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}
button{
  border:none;
  background:linear-gradient(135deg,var(--primary),#7a9eff);
  color:#fff;
  padding:10px 16px;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 12px 30px rgba(76,111,255,0.35);
  transition:transform .15s ease, box-shadow .15s ease;
}
button:hover{transform: translateY(-2px); box-shadow:0 16px 32px rgba(76,111,255,0.45);}
button:active{transform: translateY(0);}
#message{
  min-height:20px;
  text-align:center;
  color:#9fb3ff;
}
#overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  display:flex;
  align-items:center;
  justify-content:center;
  visibility:hidden;
  opacity:0;
  transition:opacity .25s ease;
}
#overlay.show{
  visibility:visible;
  opacity:1;
}
.modal{
  background:#11162a;
  padding:24px 26px;
  border-radius:18px;
  text-align:center;
  min-width:280px;
  box-shadow:0 20px 40px rgba(0,0,0,0.45);
  position:relative;
  overflow:hidden;
}
.modal h2{margin-top:0;}
.stat-line{margin:6px 0;}
.confetti{
  position:absolute;
  width:8px; height:12px;
  background:var(--c);
  top:-20px;
  left:var(--l);
  opacity:0.9;
  animation: fall var(--d) linear infinite;
}
@keyframes fall{
  0%{transform: translate3d(0,0,0) rotate(0deg);}
  100%{transform: translate3d(0,120vh,0) rotate(360deg);}
}
</style>
</head>
<body>
<header>
  <h1>Memory Match</h1>
  <div id="stats">
    <div>Moves: <span id="moves">0</span></div>
    <div>Time: <span id="time">00:00</span></div>
    <div>Pairs: <span id="pairs">0</span>/8</div>
  </div>
</header>

<div id="board" aria-label="Memory cards"></div>

<div class="controls">
  <button id="restart">ðŸ”„ Restart</button>
  <div id="message"></div>
</div>

<div id="overlay">
  <div class="modal">
    <h2>ðŸŽ‰ You Won!</h2>
    <div class="stat-line">Moves: <span id="final-moves"></span></div>
    <div class="stat-line">Time: <span id="final-time"></span></div>
    <div class="stat-line">Accuracy: <span id="final-accuracy"></span></div>
    <div style="margin-top:14px;">
      <button id="play-again">Play Again</button>
    </div>
  </div>
</div>

<script>
(() => {
  const emojis = ["ðŸ€","ðŸ§©","ðŸŒˆ","â­","ðŸŽˆ","ðŸ“","ðŸŽµ","ðŸš","ðŸ”¥","âš¡","ðŸŒ™","â˜€ï¸","ðŸ‰","ðŸŽ","ðŸ’Ž","ðŸŒ¸"];
  const board = document.getElementById('board');
  const movesEl = document.getElementById('moves');
  const timeEl = document.getElementById('time');
  const pairsEl = document.getElementById('pairs');
  const msgEl = document.getElementById('message');
  const overlay = document.getElementById('overlay');
  const finalMoves = document.getElementById('final-moves');
  const finalTime = document.getElementById('final-time');
  const finalAcc = document.getElementById('final-accuracy');
  const restartBtn = document.getElementById('restart');
  const playAgainBtn = document.getElementById('play-again');
  const totalPairs = 8;

  let firstCard = null, secondCard = null, lock = false;
  let moves = 0, matched = 0, timer = null, seconds = 0, started = false;

  function formatTime(sec){
    const m = Math.floor(sec/60).toString().padStart(2,'0');
    const s = (sec%60).toString().padStart(2,'0');
    return `${m}:${s}`;
  }

  function shuffle(arr){
    for(let i=arr.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [arr[i],arr[j]]=[arr[j],arr[i]];
    }
    return arr;
  }

  function stopTimer(){
    clearInterval(timer);
    timer=null;
  }
  function startTimer(){
    if(timer) return;
    timer=setInterval(()=>{seconds++; timeEl.textContent=formatTime(seconds);},1000);
  }

  function createCard(value){
    const card = document.createElement('div');
    card.className='card';
    card.dataset.value=value;
    card.innerHTML=`
      <div class="face front">?</div>
      <div class="face back">${value}</div>
    `;
    card.addEventListener('click', () => handleFlip(card));
    return card;
  }

  function initConfetti(){
    const modal = document.querySelector('.modal');
    for(let i=0;i<40;i++){
      const c = document.createElement('div');
      c.className='confetti';
      c.style.setProperty('--l', Math.random()*100 + '%');
      c.style.setProperty('--d', (3+Math.random()*2)+'s');
      const colors=['#ff7eb6','#7a9eff','#6ddc8f','#ffd166','#f586ff'];
      c.style.setProperty('--c', colors[i%colors.length]);
      modal.appendChild(c);
    }
  }

  function initGame(){
    board.innerHTML='';
    stopTimer();
    moves=0; matched=0; seconds=0; started=false;
    movesEl.textContent='0';
    timeEl.textContent='00:00';
    pairsEl.textContent='0';
    msgEl.textContent='Find all pairs!';
    overlay.classList.remove('show');
    const selection = shuffle(emojis.slice()).slice(0,totalPairs);
    const pairValues = shuffle([...selection,...selection]);
    pairValues.forEach(v=> board.appendChild(createCard(v)));
    document.querySelectorAll('.card').forEach((c, idx)=>{
      c.style.setProperty('--rot', (Math.random()*4-2)+'deg');
      c.style.animation = `float${idx%3} 6s ease-in-out ${(idx%5)/2}s infinite`;
    });
  }

  function handleFlip(card){
    if(lock || card.classList.contains('flipped') || card.classList.contains('matched')) return;
    if(!started){ started=true; startTimer(); }
    card.classList.add('flipped');
    if(!firstCard){
      firstCard = card;
      return;
    }
    secondCard = card;
    lock = true;
    moves++;
    movesEl.textContent=moves;
    if(firstCard.dataset.value === secondCard.dataset.value){
      firstCard.classList.add('matched');
      secondCard.classList.add('matched');
      matched++;
      pairsEl.textContent=matched;
      msgEl.textContent='Nice match!';
      resetPick();
      if(matched === totalPairs) endGame();
    }else{
      msgEl.textContent='Try again...';
      setTimeout(()=>{
        firstCard.classList.remove('flipped');
        secondCard.classList.remove('flipped');
        resetPick();
      }, 900);
    }
  }

  function resetPick(){
    [firstCard, secondCard] = [null,null];
    lock=false;
  }

  function endGame(){
    stopTimer();
    finalMoves.textContent = moves;
    finalTime.textContent = formatTime(seconds);
    const accuracy = Math.round((matched/(moves))*100) || 0;
    finalAcc.textContent = `${accuracy}%`;
    overlay.classList.add('show');
  }

  restartBtn.addEventListener('click', initGame);
  playAgainBtn.addEventListener('click', initGame);

  // Floating animation variants
  const style = document.createElement('style');
  style.textContent = `
  @keyframes float0{0%{transform: translateY(0) rotateY(var(--rot));}50%{transform: translateY(-6px) rotateY(var(--rot));}100%{transform: translateY(0) rotateY(var(--rot));}}
  @keyframes float1{0%{transform: translateY(0) rotateY(var(--rot));}50%{transform: translateY(5px) rotateY(var(--rot));}100%{transform: translateY(0) rotateY(var(--rot));}}
  @keyframes float2{0%{transform: translateY(0) rotateY(var(--rot));}50%{transform: translateY(-4px) rotateY(var(--rot));}100%{transform: translateY(0) rotateY(var(--rot));}}
  `;
  document.head.appendChild(style);

  initConfetti();
  initGame();
})();
</script>
</body>
</html>