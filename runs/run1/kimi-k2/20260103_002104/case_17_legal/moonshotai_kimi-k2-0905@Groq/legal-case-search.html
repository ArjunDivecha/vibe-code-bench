<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibe-Law - Legal Case Search</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0a0a0a;
            color: #e0e0e0;
            line-height: 1.6;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        /* Header/Search Section */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: #1a1a2e;
            padding: 20px;
            border-bottom: 2px solid #16213e;
            z-index: 100;
        }

        .search-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .search-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 16px;
            background-color: #0f0f0f;
            color: #e0e0e0;
            border: 2px solid #16213e;
            border-radius: 8px;
            outline: none;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            border-color: #4a7c7e;
        }

        .search-button {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            padding: 10px 20px;
            background-color: #16213e;
            color: #e0e0e0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .search-button:hover {
            background-color: #1e3d58;
        }

        /* Main Content */
        .main-content {
            display: flex;
            margin-top: 100px;
            height: calc(100vh - 100px);
        }

        /* Results List */
        .results-panel {
            width: 40%;
            background-color: #141414;
            border-right: 1px solid #333;
            overflow-y: auto;
            padding: 20px;
        }

        .result-item {
            background-color: #1a1a2e;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .result-item:hover {
            background-color: #1e3d58;
            border-color: #4a7c7e;
        }

        .result-item.active {
            background-color: #16213e;
            border-color: #4a7c7e;
        }

        .case-title {
            font-size: 18px;
            font-weight: 600;
            color: #87ceeb;
            margin-bottom: 5px;
        }

        .case-meta {
            font-size: 14px;
            color: #888;
            margin-bottom: 10px;
        }

        .case-snippet {
            font-size: 14px;
            color: #ccc;
            line-height: 1.4;
        }

        /* Detail View */
        .detail-panel {
            width: 60%;
            background-color: #0a0a0a;
            display: flex;
            flex-direction: column;
        }

        .detail-header {
            background-color: #1a1a2e;
            padding: 20px;
            border-bottom: 2px solid #16213e;
        }

        .detail-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .tab {
            padding: 10px 20px;
            background-color: #16213e;
            border: none;
            color: #e0e0e0;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            transition: background-color 0.3s;
        }

        .tab.active {
            background-color: #0a0a0a;
            border-bottom: 2px solid #4a7c7e;
        }

        .detail-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            color: #e0e0e0;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Notes Sidebar */
        .notes-sidebar {
            position: fixed;
            right: -300px;
            top: 100px;
            width: 300px;
            height: calc(100vh - 100px);
            background-color: #1a1a2e;
            border-left: 2px solid #16213e;
            padding: 20px;
            transition: right 0.3s;
            overflow-y: auto;
        }

        .notes-sidebar.open {
            right: 0;
        }

        .notes-toggle {
            position: fixed;
            right: 20px;
            top: 120px;
            background-color: #16213e;
            color: #e0e0e0;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
            z-index: 101;
        }

        .note-item {
            background-color: #0a0a0a;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border-left: 3px solid #4a7c7e;
        }

        .note-text {
            font-size: 14px;
            margin-bottom: 5px;
        }

        .note-date {
            font-size: 12px;
            color: #888;
        }

        /* Entity Highlighting */
        .entity-highlight {
            background-color: #4a7c7e;
            color: #000;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }

        /* Action Buttons */
        .action-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        .action-button {
            padding: 10px 20px;
            background-color: #16213e;
            color: #e0e0e0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .action-button:hover {
            background-color: #1e3d58;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .results-panel {
                width: 100%;
            }
            .detail-panel {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="Search case law...">
            <button class="search-button" onclick="searchCases()">Search</button>
        </div>
    </div>

    <div class="container">
        <div class="main-content">
            <div class="results-panel" id="resultsPanel">
                <!-- Results will be populated here -->
            </div>

            <div class="detail-panel" id="detailPanel">
                <div class="detail-header">
                    <h2 id="detailTitle">Select a case to view details</h2>
                    <div class="detail-tabs">
                        <button class="tab active" onclick="switchTab('summary')">Summary</button>
                        <button class="tab" onclick="switchTab('fulltext')">Full Text</button>
                    </div>
                </div>

                <div class="detail-content">
                    <div id="summaryTab" class="tab-content active">
                        <p>Select a case from the left panel to view its summary.</p>
                    </div>
                    <div id="fulltextTab" class="tab-content">
                        <p>Select a case from the left panel to view its full text.</p>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="action-button" onclick="extractEntities()">Extract Entities</button>
                    <button class="action-button" onclick="saveSnippet()">Save Snippet</button>
                </div>
            </div>
        </div>
    </div>

    <button class="notes-toggle" onclick="toggleNotes()">Notes</button>

    <div class="notes-sidebar" id="notesSidebar">
        <h3>Case Notes</h3>
        <div id="notesList">
            <!-- Notes will be populated here -->
        </div>
    </div>

    <script>
        // Mock legal cases data
        const mockCases = [
            {
                id: 1,
                title: "Smith v. Jones Manufacturing Corp.",
                court: "Supreme Court of California",
                date: "2023-03-15",
                citation: "2023 Cal. LEXIS 1234",
                summary: "Product liability case involving defective machinery. Plaintiff sustained severe injuries resulting in permanent disability. Court established new precedent for corporate liability in manufacturing defects.",
                fullText: `The Court finds that Jones Manufacturing Corporation failed to exercise reasonable care in the design and manufacture of the industrial press machine that caused Plaintiff Smith's injuries. 

The evidence clearly demonstrates that the safety mechanisms were inadequate and the warning labels were insufficient. Furthermore, the company's internal documents reveal knowledge of the defect dating back to 2019.

On March 15, 2023, the Supreme Court of California ruled in favor of the plaintiff, establishing that manufacturers have a duty to warn consumers of known dangers associated with their products. The Court awarded $2.3 million in damages to Mr. Smith.

Justice Roberts delivered the opinion of the Court: "Corporate responsibility demands that manufacturers prioritize consumer safety over profit margins. This decision sends a clear message that negligence in product design will not be tolerated in California."`,
                snippet: "Product liability case involving defective machinery resulting in permanent disability..."
            },
            {
                id: 2,
                title: "Environmental Protection Agency v. Global Energy Solutions",
                court: "United States Court of Appeals, Ninth Circuit",
                date: "2023-02-28",
                citation: "2023 U.S. App. LEXIS 5678",
                summary: "Clean Air Act violation case. Corporate defendant exceeded emission limits for six consecutive quarters. Court imposed record-breaking civil penalties.",
                fullText: `The Environmental Protection Agency brought this action against Global Energy Solutions for violations of the Clean Air Act, specifically 42 U.S.C. § 7413. The defendant's refinery in Texas exceeded allowable sulfur dioxide emissions for six consecutive quarters between 2021 and 2022.

EPA monitoring data showed emissions levels consistently 40% above the permitted threshold. The company's own internal reports acknowledged the problem but failed to take corrective action.

The Court of Appeals affirmed the district court's decision, imposing civil penalties totaling $45 million, the largest fine ever assessed under the Clean Air Act for a single facility. The Court also mandated installation of new pollution control equipment within 18 months.

Circuit Judge Chen wrote: "The egregious nature of these violations, coupled with the defendant's failure to act despite clear evidence of non-compliance, justifies the substantial penalty imposed."`,
                snippet: "Clean Air Act violation resulting in record-breaking $45 million civil penalty..."
            },
            {
                id: 3,
                title: "Digital Privacy Rights Foundation v. TechCorp International",
                court: "Federal District Court, Northern District of California",
                date: "2023-01-20",
                citation: "2023 U.S. Dist. LEXIS 2345",
                summary: "Data privacy class action alleging unauthorized biometric data collection. Settlement established $50 million fund for affected consumers.",
                fullText: `This class action lawsuit alleged that TechCorp International violated the Illinois Biometric Information Privacy Act by collecting and storing facial recognition data without proper consent.

The plaintiffs, representing a class of approximately 2 million users, claimed that TechCorp's photo tagging feature automatically scanned and stored biometric identifiers without informing users or obtaining written consent as required by law.

Discovery revealed that TechCorp had been collecting this data since 2018 and had created detailed biometric profiles for millions of users. Internal emails showed executives were aware of the legal requirements but chose to proceed regardless.

The parties reached a settlement agreement on January 20, 2023. TechCorp agreed to pay $50 million into a settlement fund and to implement comprehensive privacy reforms, including obtaining explicit consent before collecting biometric data.

Judge Alsup praised the settlement: "This resolution appropriately compensates affected consumers while ensuring future compliance with biometric privacy laws."`,
                snippet: "Biometric data privacy violation resulting in $50 million class action settlement..."
            },
            {
                id: 4,
                title: "Martinez v. City of Los Angeles",
                court: "California Court of Appeal, Second District",
                date: "2023-04-10",
                citation: "2023 Cal. App. LEXIS 7890",
                summary: "Police misconduct case involving excessive force. $3.2 million verdict for plaintiff, establishing new standards for officer training requirements.",
                fullText: `The plaintiff, Maria Martinez, suffered permanent injuries when LAPD officers used excessive force during a routine traffic stop on June 15, 2021. The incident was captured on multiple body cameras and bystander videos.

Evidence showed that officers continued to apply force even after Martinez was handcuffed and compliant. Medical experts testified that the force used caused permanent nerve damage and partial paralysis.

The jury found that the City of Los Angeles failed to properly train its officers in de-escalation techniques and use-of-force protocols. The $3.2 million verdict included punitive damages based on evidence of systemic failures in officer training.

Presiding Justice Johnson's opinion stated: "This tragic incident highlights the urgent need for comprehensive police reform. Municipalities must ensure officers receive adequate training to prevent such unnecessary violence."`,
                snippet: "Excessive force case resulting in $3.2 million verdict and new training standards..."
            },
            {
                id: 5,
                title: "United Workers Union v. National Retail Chain",
                court: "National Labor Relations Board",
                date: "2023-03-05",
                citation: "2023 NLRB LEXIS 3456",
                summary: "Unfair labor practices complaint. Company found guilty of illegal surveillance and termination of union organizers.",
                fullText: `The United Workers Union filed charges against National Retail Chain, alleging multiple violations of the National Labor Relations Act. The complaint specifically cited illegal surveillance of union activities and the termination of three employees for their union organizing efforts.

Administrative Law Judge Sarah Thompson conducted a three-week hearing, reviewing extensive evidence including security footage, manager emails, and testimony from dozens of witnesses. The evidence clearly showed a pattern of anti-union discrimination.

The Judge's decision ordered immediate reinstatement of the terminated employees with full back pay and benefits totaling $180,000. Additionally, the company must post notices informing employees of their rights and undergo management training on labor law compliance.

This decision reinforces that employers cannot interfere with employees' rights to organize and bargain collectively under federal law.`,
                snippet: "Unfair labor practices resulting in employee reinstatement and back pay..."
            },
            {
                id: 6,
                title: "Consumer Financial Protection Bureau v. Premier Lending Group",
                court: "United States District Court, Southern District of New York",
                date: "2023-02-15",
                citation: "2023 U.S. Dist. LEXIS 6789",
                summary: "Predatory lending practices case. $25 million settlement including debt forgiveness for 5,000 borrowers.",
                fullText: `The CFPB alleged that Premier Lending Group engaged in predatory lending practices targeting low-income borrowers, charging excessive fees and interest rates that violated state usury laws and federal consumer protection statutes.

The investigation revealed that Premier Lending had systematically targeted vulnerable communities with deceptive loan products, resulting in an 85% default rate among affected borrowers. Internal documents showed executives specifically targeted borrowers with limited financial literacy.

Under the settlement agreement approved on February 15, 2023, Premier Lending will forgive $20 million in outstanding debt and pay $5 million in civil penalties. The company must also implement fair lending practices and undergo independent monitoring for three years.

Judge Rakoff noted: "This predatory scheme represents exactly the type of financial abuse the CFPB was created to prevent. This settlement provides meaningful relief to victims while deterring similar misconduct."`,
                snippet: "Predatory lending practices resulting in $25 million settlement and debt forgiveness..."
            },
            {
                id: 7,
                title: "American Civil Liberties Union v. Department of Homeland Security",
                court: "United States Court of Appeals, Fourth Circuit",
                date: "2023-01-30",
                citation: "2023 U.S. App. LEXIS 4321",
                summary: "First Amendment case challenging surveillance of protest groups. Court ordered destruction of illegally obtained surveillance data.",
                fullText: `The ACLU challenged DHS's surveillance of Black Lives Matter protesters, arguing that the agency violated First Amendment rights by collecting and maintaining data on individuals engaged in protected speech activities.

The Court of Appeals found that DHS had engaged in unconstitutional surveillance, collecting social media posts, tracking protest attendance, and maintaining detailed files on organizers without any evidence of criminal activity. The surveillance program operated from May 2020 through December 2022.

The Court ordered immediate destruction of all surveillance data and prohibited future collection of information on protesters unless tied to specific criminal investigations. The decision also mandated new training for DHS personnel on First Amendment protections.

Circuit Judge Harris wrote for the unanimous panel: "The government's surveillance of citizens engaged in peaceful protest strikes at the heart of constitutional democracy. This chilling effect cannot be tolerated in a free society."`,
                snippet: "First Amendment surveillance case resulting in data destruction order..."
            },
            {
                id: 8,
                title: "Pharmaceutical Research Co. v. Generic Manufacturers Alliance",
                court: "Federal Circuit Court of Appeals",
                date: "2023-03-20",
                citation: "2023 U.S. App. LEXIS 7890",
                summary: "Patent infringement dispute over cancer treatment drug. $200 million damages award upheld on appeal.",
                fullText: `Pharmaceutical Research Company sued multiple generic manufacturers for infringing patents covering its breakthrough cancer treatment medication. The patents, issued between 2015 and 2018, cover the drug's active compound and manufacturing process.

The district court found that the generic manufacturers had willfully infringed the patents by producing and marketing competing versions of the drug before patent expiration. The evidence showed the companies had copied PRC's formulation and used its clinical trial data to obtain FDA approval.

The $200 million damages award represented lost profits and reasonable royalties for the infringing sales. The Federal Circuit affirmed, finding substantial evidence supported the jury's verdict on both liability and damages.

Judge Prost wrote: "The extensive evidence of willful infringement justifies both the enhanced damages and the substantial award for PRC's lost profits."`,
                snippet: "Patent infringement case resulting in $200 million damages award..."
            },
            {
                id: 9,
                title: "Estate of Johnson v. Regional Medical Center",
                court: "State Supreme Court, Texas",
                date: "2023-02-10",
                citation: "2023 Tex. LEXIS 567",
                summary: "Medical malpractice wrongful death case. $8.5 million verdict including punitive damages for hospital's reckless disregard for patient safety.",
                fullText: `The Estate of Robert Johnson sued Regional Medical Center for medical malpractice resulting in Mr. Johnson's death following routine surgery. The complaint alleged that hospital staff failed to monitor the patient's vital signs and ignored clear signs of respiratory distress.

Expert testimony established that proper monitoring would have detected the complications in time to prevent death. Evidence showed the hospital had inadequate staffing levels and had received multiple prior complaints about post-surgical care.

The jury awarded $5 million in compensatory damages and $3.5 million in punitive damages, finding the hospital's conduct showed reckless disregard for patient safety. The Supreme Court affirmed the punitive damages award, citing evidence of systemic failures.

Chief Justice Hecht wrote: "When healthcare providers prioritize profits over patient safety, punitive damages serve the essential purpose of deterring such reckless misconduct."`,
                snippet: "Medical malpractice case resulting in $8.5 million wrongful death verdict..."
            },
            {
                id: 10,
                title: "Securities and Exchange Commission v. Tech Innovations Inc.",
                court: "United States District Court, District of Delaware",
                date: "2023-04-05",
                citation: "2023 U.S. Dist. LEXIS 8901",
                summary: "Securities fraud case involving false statements about product development. $15 million civil penalty and executive officer bans.",
                fullText: `The SEC charged Tech Innovations Inc. and its senior executives with securities fraud for making false and misleading statements about the company's revolutionary battery technology. From January 2021 through September 2022, defendants claimed to have achieved breakthroughs that did not exist.

The complaint alleged that CEO Patricia Wong and CFO Michael Chen knowingly misled investors about product development timelines, manufacturing capabilities, and customer contracts. Internal emails revealed they were aware the technology was not commercially viable.

The settlement required Tech Innovations to pay a $15 million civil penalty and implement comprehensive compliance reforms. Both Wong and Chen agreed to five-year officer and director bars and must disgorge $3.2 million in ill-gotten gains.

Judge Stark approved the settlement, noting: "This case demonstrates the SEC's commitment to holding corporate executives accountable for misleading investors about product development."`,
                snippet: "Securities fraud case resulting in $15 million penalty and executive bans..."
            },
            {
                id: 11,
                title: "Student Defense Coalition v. State University System",
                court: "United States Court of Appeals, Sixth Circuit",
                date: "2023-03-25",
                citation: "2023 U.S. App. LEXIS 6543",
                summary: "Due process challenge to campus disciplinary procedures. Court ordered comprehensive reforms to ensure student rights.",
                fullText: `The Student Defense Coalition challenged the State University System's campus disciplinary procedures, arguing they violated students' due process rights under the Fourteenth Amendment. The complaint focused on the lack of adequate notice, right to counsel, and impartial decision-makers.

The Court of Appeals found that the university's current procedures failed to provide meaningful due process protections. Students received minimal notice of charges, had limited access to evidence, and faced hearing panels lacking impartiality.

The decision mandated comprehensive reforms including: advance notice of all charges with detailed evidence, right to legal representation, impartial hearing officers, and meaningful appeal rights. The university system must implement these changes for all future disciplinary proceedings.

Circuit Judge Boggs wrote: "Educational institutions must balance administrative efficiency with fundamental fairness. Students facing serious disciplinary sanctions are entitled to meaningful due process protections."`,
                snippet: "Due process case requiring comprehensive campus disciplinary reforms..."
            },
            {
                id: 12,
                title: "Competition Authority v. MegaCorp Industries",
                court: "United States District Court, District of Columbia",
                date: "2023-02-20",
                citation: "2023 U.S. Dist. LEXIS 3456",
                summary: "Antitrust merger challenge. Court blocked $50 billion acquisition finding it would substantially lessen competition.",
                fullText: `The Department of Justice's Antitrust Division sued to block MegaCorp Industries' proposed $50 billion acquisition of its primary competitor, arguing the merger would create a monopoly in the specialized manufacturing sector.

The Court found that the merger would eliminate head-to-head competition between the two largest manufacturers, resulting in higher prices and reduced innovation. Economic analysis showed the combined entity would control 78% of the relevant market.

Evidence revealed that the companies' internal documents acknowledged the merger's anti-competitive effects, with executives discussing "eliminating pricing pressure" and "increasing market power." The Court rejected efficiency defenses as insufficient to offset competitive harms.

Judge Jackson permanently enjoined the merger, stating: "This acquisition would create a dominant market position enabling the merged entity to raise prices and reduce output to the detriment of consumers and innovation."`,
                snippet: "Antitrust case blocking $50 billion merger to prevent monopoly..."
            },
            {
                id: 13,
                title: "Indigenous Rights Coalition v. Federal Government",
                court: "United States District Court, Alaska",
                date: "2023-01-25",
                citation: "2023 U.S. Dist. LEXIS 1234",
                summary: "Treaty rights case regarding ancestral lands. Court ordered federal government to restore 500,000 acres to tribal ownership.",
                fullText: `The Indigenous Rights Coalition sued the federal government for violating treaty obligations regarding Alaskan Native lands. The complaint alleged that federal agencies had illegally permitted resource extraction on lands reserved for indigenous peoples under the 1971 Alaska Native Claims Settlement Act.

The Court found that the government had failed to honor its fiduciary obligations to protect indigenous land rights. Federal agencies had authorized oil and gas drilling, timber harvesting, and mining operations on approximately 500,000 acres of traditional indigenous territory without proper consultation or consent.

The decision ordered immediate cessation of all extractive activities on the affected lands and mandated their restoration to collective indigenous ownership. The Court also established a $10 million fund for environmental remediation and cultural preservation programs.

Judge Gleason wrote: "The federal government must honor its sacred trust obligations to indigenous peoples. These lands represent not just property, but the cultural and spiritual heritage of Alaska Native communities."`,
                snippet: "Treaty rights case resulting in restoration of 500,000 acres to tribal ownership..."
            },
            {
                id: 14,
                title: "Professional Athletes Association v. Sports League Commission",
                court: "Federal Arbitration Court",
                date: "2023-04-01",
                citation: "2023 Arb. LEXIS 9012",
                summary: "Labor arbitration regarding revenue sharing. Arbitration panel awarded players $75 million in back compensation.",
                fullText: `The Professional Athletes Association filed a grievance against the Sports League Commission, alleging violations of the collective bargaining agreement regarding revenue sharing from media contracts and merchandise sales.

The arbitration panel conducted extensive hearings over six months, reviewing financial records, contract terms, and testimony from industry experts. The evidence showed that the league had systematically underreported revenues and failed to pay the agreed-upon percentage to players as required by the CBA.

The panel's award required the league to pay $75 million in back compensation to current and former players, plus interest. The decision also mandated improved financial reporting procedures and independent auditing of league revenues.

Arbitrator Rodriguez wrote: "The evidence conclusively demonstrates that the league breached its contractual obligations by manipulating revenue calculations to reduce player compensation. This award ensures players receive their fair share of league revenues as negotiated in the collective bargaining agreement."`,
                snippet: "Labor arbitration resulting in $75 million award for revenue sharing violations..."
            },
            {
                id: 15,
                title: "Disability Rights Foundation v. Public Transportation Authority",
                court: "United States Court of Appeals, Second Circuit",
                date: "2023-03-30",
                citation: "2023 U.S. App. LEXIS 8765",
                summary: "ADA compliance case regarding public transit accessibility. Court ordered $100 million infrastructure modernization program.",
                fullText: `The Disability Rights Foundation sued the Public Transportation Authority for failing to comply with the Americans with Disabilities Act requirements for accessible public transportation. The complaint documented widespread accessibility barriers across the transit system.

The Court found that 65% of subway stations lacked elevator access, accessible route signage was inadequate, and paratransit services failed to meet federal standards. The authority had received federal funding specifically for accessibility improvements but had diverted funds to other projects.

The decision mandated a comprehensive $100 million modernization program over five years to achieve full ADA compliance. The Court appointed an independent monitor to oversee implementation and established specific benchmarks for elevator installation, platform modifications, and service improvements.

Circuit Judge Pooler wrote: "Access to public transportation is a fundamental civil right. The transit authority's decades-long failure to provide equal access to disabled riders represents a persistent violation of federal law that must be remedied immediately."`,
                snippet: "ADA compliance case requiring $100 million transit accessibility improvements..."
            }
        ];

        let currentCase = null;
        let entitiesExtracted = false;
        let notes = JSON.parse(localStorage.getItem('caseNotes')) || [];

        function displayResults(cases) {
            const resultsPanel = document.getElementById('resultsPanel');
            resultsPanel.innerHTML = '';

            cases.forEach(case_ => {
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                resultItem.onclick = () => selectCase(case_);
                resultItem.innerHTML = `
                    <div class="case-title">${case_.title}</div>
                    <div class="case-meta">${case_.court} • ${case_.date}</div>
                    <div class="case-snippet">${case_.snippet}</div>
                `;
                resultsPanel.appendChild(resultItem);
            });
        }

        function selectCase(case_) {
            currentCase = case_;
            entitiesExtracted = false;
            
            // Update active state
            document.querySelectorAll('.result-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');

            // Update detail view
            document.getElementById('detailTitle').textContent = case_.title;
            document.getElementById('summaryTab').innerHTML = `
                <h3>Case Summary</h3>
                <p><strong>Court:</strong> ${case_.court}</p>
                <p><strong>Date:</strong> ${case_.date}</p>
                <p><strong>Citation:</strong> ${case_.citation}</p>
                <p><strong>Summary:</strong> ${case_.summary}</p>
            `;
            document.getElementById('fulltextTab').innerHTML = `
                <h3>Full Case Text</h3>
                <p>${case_.fullText}</p>
            `;
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tab + 'Tab').classList.add('active');
        }

        function searchCases() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filteredCases = mockCases.filter(case_ => 
                case_.title.toLowerCase().includes(searchTerm) ||
                case_.summary.toLowerCase().includes(searchTerm) ||
                case_.court.toLowerCase().includes(searchTerm)
            );
            displayResults(filteredCases);
        }

        function extractEntities() {
            if (!currentCase) {
                alert('Please select a case first');
                return;
            }

            entitiesExtracted = true;
            const fullText = document.getElementById('fulltextTab');
            let text = fullText.innerHTML;

            // Simple entity extraction (names and dates)
            const namePattern = /\b([A-Z][a-z]+ [A-Z][a-z]+)\b/g;
            const datePattern = /\b(\d{4}[-/]\d{2}[-/]\d{2}|\w+ \d{1,2}, \d{4})\b/g;

            text = text.replace(namePattern, '<span class="entity-highlight">$1</span>');
            text = text.replace(datePattern, '<span class="entity-highlight">$1</span>');

            fullText.innerHTML = text;
        }

        function saveSnippet() {
            if (!currentCase) {
                alert('Please select a case first');
                return;
            }

            const selection = window.getSelection().toString();
            if (!selection) {
                alert('Please select some text to save');
                return;
            }

            const note = {
                id: Date.now(),
                caseTitle: currentCase.title,
                text: selection,
                date: new Date().toLocaleString()
            };

            notes.push(note);
            localStorage.setItem('caseNotes', JSON.stringify(notes));
            displayNotes();
        }

        function displayNotes() {
            const notesList = document.getElementById('notesList');
            notesList.innerHTML = '';

            notes.forEach(note => {
                const noteItem = document.createElement('div');
                noteItem.className = 'note-item';
                noteItem.innerHTML = `
                    <div class="note-text">${note.text}</div>
                    <div class="note-date">${note.caseTitle} • ${note.date}</div>
                `;
                notesList.appendChild(noteItem);
            });
        }

        function toggleNotes() {
            const sidebar = document.getElementById('notesSidebar');
            sidebar.classList.toggle('open');
        }

        // Initialize
        displayResults(mockCases);
        displayNotes();

        // Search on Enter key
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchCases();
            }
        });
    </script>
</body>
</html>