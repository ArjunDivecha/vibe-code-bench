<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Test</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
            padding: 30px;
            text-align: center;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .stats-container {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .stat-box {
            background-color: #e9ecef;
            border-radius: 8px;
            padding: 15px;
            min-width: 120px;
            margin: 5px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #007bff;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .text-display {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            font-size: 1.2rem;
            line-height: 1.6;
            min-height: 150px;
            border: 1px solid #dee2e6;
        }
        
        .text-display span.correct {
            color: #28a745;
            background-color: rgba(40, 167, 69, 0.1);
        }
        
        .text-display span.incorrect {
            color: #dc3545;
            background-color: rgba(220, 53, 69, 0.1);
            text-decoration: underline;
        }
        
        .text-display span.current {
            background-color: #ffc107;
            color: #212529;
        }
        
        .text-display span.untyped {
            color: #6c757d;
        }
        
        textarea {
            width: 100%;
            height: 120px;
            padding: 15px;
            font-size: 1.1rem;
            border: 2px solid #ced4da;
            border-radius: 8px;
            resize: none;
            margin: 10px 0;
        }
        
        textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
        
        .controls {
            margin: 20px 0;
        }
        
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #0069d9;
        }
        
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
            margin: 10px 0;
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            background-color: #d4edda;
            border-radius: 8px;
            color: #155724;
            display: none;
        }
        
        .sample-selector {
            margin: 15px 0;
        }
        
        select {
            padding: 8px 12px;
            font-size: 1rem;
            border-radius: 5px;
            border: 1px solid #ced4da;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            .stat-box {
                min-width: 100px;
                padding: 10px;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Typing Speed Test</h1>
        
        <div class="sample-selector">
            <label for="text-sample">Choose a text sample:</label>
            <select id="text-sample">
                <option value="0">The quick brown fox...</option>
                <option value="1">Programming is...</option>
                <option value="2">In a hole in...</option>
                <option value="3">It was the best...</option>
                <option value="4">To be or not to be...</option>
                <option value="5">All happy families...</option>
                <option value="6">It was a bright...</option>
                <option value="7">Call me Ishmael...</option>
                <option value="8">Many years later...</option>
                <option value="9">Happy families are...</option>
            </select>
        </div>
        
        <div class="timer">Time: <span id="time">0s</span></div>
        
        <div class="stats-container">
            <div class="stat-box">
                <div class="stat-value" id="wpm">0</div>
                <div class="stat-label">WPM</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="accuracy">100%</div>
                <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="characters">0/0</div>
                <div class="stat-label">Characters</div>
            </div>
        </div>
        
        <div class="text-display" id="text-display"></div>
        
        <textarea id="typing-area" placeholder="Start typing here..." autofocus></textarea>
        
        <div class="controls">
            <button id="reset-btn">Try Again</button>
        </div>
        
        <div class="result" id="result">
            <h2>Test Results</h2>
            <p>Words Per Minute: <strong id="final-wpm">0</strong></p>
            <p>Accuracy: <strong id="final-accuracy">100%</strong></p>
            <p>Time: <strong id="final-time">0s</strong></p>
            <p>Characters: <strong id="final-characters">0/0</strong></p>
        </div>
    </div>

    <script>
        // Text samples
        const textSamples = [
            "The quick brown fox jumps over the lazy dog. This sentence contains all letters of the alphabet. Practice makes perfect, and consistent effort leads to improvement in typing speed and accuracy.",
            "Programming is the process of creating a set of instructions that tell a computer how to perform a task. It involves designing, writing, testing, debugging, and maintaining the source code of computer programs.",
            "In a hole in the ground there lived a hobbit. Not a nasty, dirty, wet hole filled with the ends of worms and an oozy smell, nor yet a dry, bare, sandy hole with nothing in it to sit down on or to eat.",
            "It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of foolishness, it was the epoch of belief, it was the epoch of incredulity.",
            "To be or not to be, that is the question. Whether 'tis nobler in the mind to suffer the slings and arrows of outrageous fortune, or to take arms against a sea of troubles.",
            "All happy families are alike; each unhappy family is unhappy in its own way. Everything was in confusion in the Oblonskys' house. The wife had discovered that the husband was carrying on an intrigue.",
            "It was a bright cold day in April, and the clocks were striking thirteen. Winston Smith, his chin nuzzled into his breast in an effort to escape the vile wind, slipped quickly through the glass doors of Victory Mansions.",
            "Call me Ishmael. Some years ago never mind how long precisely having little or no money in my purse, and nothing particular to interest me on shore, I thought I would sail about a little and see the watery part of the world.",
            "Many years later, as he faced the firing squad, Colonel Aureliano Buendia was to remember that distant afternoon when his father took him to discover ice. At that time Macondo was a village of twenty adobe houses.",
            "Happy families are all alike; every unhappy family is unhappy in its own way. Everything was in confusion in the Oblonskys' house. The wife had discovered that the husband was carrying on an intrigue."
        ];

        // DOM elements
        const textDisplay = document.getElementById('text-display');
        const typingArea = document.getElementById('typing-area');
        const timeElement = document.getElementById('time');
        const wpmElement = document.getElementById('wpm');
        const accuracyElement = document.getElementById('accuracy');
        const charactersElement = document.getElementById('characters');
        const resetButton = document.getElementById('reset-btn');
        const resultElement = document.getElementById('result');
        const finalWpmElement = document.getElementById('final-wpm');
        const finalAccuracyElement = document.getElementById('final-accuracy');
        const finalTimeElement = document.getElementById('final-time');
        const finalCharactersElement = document.getElementById('final-characters');
        const textSampleSelector = document.getElementById('text-sample');

        // Game state
        let startTime = null;
        let timerInterval = null;
        let elapsedTime = 0;
        let currentText = '';
        let timerStarted = false;

        // Initialize the game
        function initGame() {
            const selectedIndex = textSampleSelector.selectedIndex;
            currentText = textSamples[selectedIndex];
            renderText();
            resetStats();
            typingArea.value = '';
            typingArea.disabled = false;
            typingArea.focus();
            resultElement.style.display = 'none';
            timerStarted = false;
            elapsedTime = 0;
            timeElement.textContent = '0s';
            
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        // Render the text with proper styling
        function renderText() {
            textDisplay.innerHTML = '';
            const typedText = typingArea.value;
            
            for (let i = 0; i < currentText.length; i++) {
                const charSpan = document.createElement('span');
                
                if (i < typedText.length) {
                    if (typedText[i] === currentText[i]) {
                        charSpan.className = 'correct';
                    } else {
                        charSpan.className = 'incorrect';
                    }
                } else if (i === typedText.length) {
                    charSpan.className = 'current';
                } else {
                    charSpan.className = 'untyped';
                }
                
                charSpan.innerText = currentText[i];
                textDisplay.appendChild(charSpan);
            }
        }

        // Update statistics
        function updateStats() {
            const typedText = typingArea.value;
            const correctChars = getCorrectCharacters(typedText);
            const timeInMinutes = elapsedTime / 60;
            
            // Calculate WPM (5 characters = 1 word)
            const wpm = timeInMinutes > 0 ? Math.round((correctChars / 5) / timeInMinutes) : 0;
            
            // Calculate accuracy
            const accuracy = typedText.length > 0 ? Math.round((correctChars / typedText.length) * 100) : 100;
            
            // Update UI
            wpmElement.textContent = wpm;
            accuracyElement.textContent = `${accuracy}%`;
            charactersElement.textContent = `${correctChars}/${typedText.length}`;
        }

        // Get count of correct characters
        function getCorrectCharacters(typedText) {
            let correct = 0;
            for (let i = 0; i < typedText.length; i++) {
                if (i < currentText.length && typedText[i] === currentText[i]) {
                    correct++;
                }
            }
            return correct;
        }

        // Reset statistics
        function resetStats() {
            wpmElement.textContent = '0';
            accuracyElement.textContent = '100%';
            charactersElement.textContent = '0/0';
        }

        // Start the timer
        function startTimer() {
            startTime = new Date();
            timerInterval = setInterval(() => {
                elapsedTime = Math.floor((new Date() - startTime) / 1000);
                timeElement.textContent = `${elapsedTime}s`;
                updateStats();
            }, 1000);
        }

        // End the game
        function endGame() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            typingArea.disabled = true;
            
            // Show final results
            const typedText = typingArea.value;
            const correctChars = getCorrectCharacters(typedText);
            const timeInMinutes = elapsedTime / 60;
            const wpm = timeInMinutes > 0 ? Math.round((correctChars / 5) / timeInMinutes) : 0;
            const accuracy = typedText.length > 0 ? Math.round((correctChars / typedText.length) * 100) : 100;
            
            finalWpmElement.textContent = wpm;
            finalAccuracyElement.textContent = `${accuracy}%`;
            finalTimeElement.textContent = `${elapsedTime}s`;
            finalCharactersElement.textContent = `${correctChars}/${typedText.length}`;
            resultElement.style.display = 'block';
        }

        // Event listeners
        typingArea.addEventListener('input', () => {
            // Start timer on first keystroke
            if (!timerStarted) {
                timerStarted = true;
                startTimer();
            }
            
            renderText();
            updateStats();
            
            // Check if user has finished typing
            if (typingArea.value.length === currentText.length) {
                endGame();
            }
        });

        resetButton.addEventListener('click', initGame);

        textSampleSelector.addEventListener('change', initGame);

        // Initialize the game on page load
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>