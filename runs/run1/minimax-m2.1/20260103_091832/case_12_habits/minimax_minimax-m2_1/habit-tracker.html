<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .add-habit-section {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .add-habit-section h2 {
            color: #2c3e50;
            margin-bottom: 16px;
            font-size: 1.3rem;
        }

        .add-habit-form {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .add-habit-form input {
            flex: 1;
            min-width: 200px;
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .add-habit-form input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 4px rgba(52, 152, 219, 0.1);
        }

        .add-habit-form button {
            padding: 14px 28px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-habit-form button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .stat-card .number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #3498db;
        }

        .stat-card .label {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-top: 4px;
        }

        .habits-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .habits-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .habit-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .habit-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .habit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .habit-info h3 {
            color: #2c3e50;
            font-size: 1.3rem;
            margin-bottom: 6px;
        }

        .habit-stats {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        .habit-stat {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .habit-stat .icon {
            font-size: 1.1rem;
        }

        .habit-stat .value {
            font-weight: 600;
            color: #2c3e50;
        }

        .streak-fire {
            color: #e74c3c;
        }

        .delete-btn {
            background: none;
            border: none;
            color: #bdc3c7;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background: #fee;
            color: #e74c3c;
        }

        .calendar-section {
            margin-top: 16px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .calendar-header h4 {
            color: #2c3e50;
            font-size: 1rem;
        }

        .calendar-grid {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
        }

        .day-cell {
            width: 38px;
            height: 38px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            background: #f0f0f0;
            border: 2px solid transparent;
        }

        .day-cell:hover {
            transform: scale(1.1);
            z-index: 1;
        }

        .day-cell.completed {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .day-cell.today {
            border-color: #3498db;
        }

        .day-cell .day-number {
            font-size: 0.7rem;
            opacity: 0.7;
        }

        .day-cell .check-mark {
            font-size: 1rem;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            margin-top: 16px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #7f8c8d;
        }

        .empty-state .icon {
            font-size: 4rem;
            margin-bottom: 16px;
        }

        .empty-state h3 {
            font-size: 1.3rem;
            margin-bottom: 8px;
            color: #95a5a6;
        }

        .motivation {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            margin-bottom: 24px;
            text-align: center;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        @media (max-width: 600px) {
            header h1 {
                font-size: 1.8rem;
            }

            .day-cell {
                width: 32px;
                height: 32px;
            }

            .habit-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üåü Habit Tracker</h1>
            <p>Build better habits, one day at a time</p>
        </header>

        <div class="add-habit-section">
            <h2>Add New Habit</h2>
            <form class="add-habit-form" id="addHabitForm">
                <input type="text" id="habitInput" placeholder="Enter a new habit (e.g., Exercise, Read, Meditate)" required>
                <button type="submit">+ Add Habit</button>
            </form>
        </div>

        <div class="stats-section" id="statsSection">
            <div class="stat-card">
                <div class="number" id="totalHabits">0</div>
                <div class="label">Total Habits</div>
            </div>
            <div class="stat-card">
                <div class="number" id="completedToday">0</div>
                <div class="label">Completed Today</div>
            </div>
            <div class="stat-card">
                <div class="number" id="longestStreak">0</div>
                <div class="label">Longest Streak</div>
            </div>
            <div class="stat-card">
                <div class="number" id="overallCompletion">0%</div>
                <div class="label">Overall Completion</div>
            </div>
        </div>

        <div class="motivation" id="motivation"></div>

        <div class="habits-section">
            <h2>Your Habits</h2>
            <div class="habits-list" id="habitsList"></div>
        </div>
    </div>

    <script>
        // Habit Tracker App
        const STORAGE_KEY = 'habitTrackerData';
        const DAYS_TO_SHOW = 30;

        // Motivational quotes
        const motivationalQuotes = [
            "Every day is a new opportunity to grow stronger!",
            "Small steps lead to big changes!",
            "You're building momentum! Keep going!",
            "Consistency is the key to success!",
            "Every checkmark is a victory!",
            "You're becoming the best version of yourself!",
            "Progress, not perfection!",
            "Your future self will thank you!",
            "Keep shining, superstar!",
            "You're on fire! üî•"
        ];

        // Initialize app
        let habits = [];

        function init() {
            loadFromStorage();
            renderAll();
        }

        // Storage functions
        function loadFromStorage() {
            const stored = localStorage.getItem(STORAGE_KEY);
            if (stored) {
                habits = JSON.parse(stored);
            }
        }

        function saveToStorage() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(habits));
        }

        // Date functions
        function getToday() {
            const today = new Date();
            return today.toISOString().split('T')[0];
        }

        function getPastDates(days) {
            const dates = [];
            for (let i = days - 1; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                dates.push(date.toISOString().split('T')[0]);
            }
            return dates;
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }

        function isToday(dateStr) {
            return dateStr === getToday();
        }

        // Streak calculation
        function calculateStreak(completedDates) {
            const today = getToday();
            const sortedDates = [...completedDates].sort().reverse();
            
            if (sortedDates.length === 0) return 0;

            let streak = 0;
            let currentDate = new Date();
            currentDate.setHours(0, 0, 0, 0);

            // Check if today is completed
            const todayCompleted = completedDates.includes(today);
            
            // Start from today or yesterday
            let checkDate = new Date(currentDate);
            if (!todayCompleted) {
                checkDate.setDate(checkDate.getDate() - 1);
            }

            while (true) {
                const dateStr = checkDate.toISOString().split('T')[0];
                if (completedDates.includes(dateStr)) {
                    streak++;
                    checkDate.setDate(checkDate.getDate() - 1);
                } else {
                    break;
                }
            }

            return streak;
        }

        // Completion percentage
        function calculateCompletion(completedDates) {
            const totalDays = DAYS_TO_SHOW;
            const completedCount = completedDates.filter(date => {
                const dateObj = new Date(date);
                const cutoffDate = new Date();
                cutoffDate.setDate(cutoffDate.getDate() - totalDays);
                return dateObj >= cutoffDate;
            }).length;
            
            return Math.round((completedCount / totalDays) * 100);
        }

        // Habit management
        function addHabit(name) {
            const habit = {
                id: Date.now(),
                name: name.trim(),
                completedDates: [],
                createdAt: getToday()
            };
            habits.push(habit);
            saveToStorage();
            renderAll();
        }

        function deleteHabit(id) {
            habits = habits.filter(h => h.id !== id);
            saveToStorage();
            renderAll();
        }

        function toggleCompletion(habitId, date) {
            const habit = habits.find(h => h.id === habitId);
            if (habit) {
                const index = habit.completedDates.indexOf(date);
                if (index > -1) {
                    habit.completedDates.splice(index, 1);
                } else {
                    habit.completedDates.push(date);
                }
                saveToStorage();
                renderAll();
            }
        }

        // Rendering functions
        function renderAll() {
            renderHabits();
            renderStats();
            renderMotivation();
        }

        function renderMotivation() {
            const motivationEl = document.getElementById('motivation');
            if (habits.length === 0) {
                motivationEl.textContent = "Start your journey by adding your first habit!";
            } else {
                const todayCompleted = habits.filter(h => h.completedDates.includes(getToday())).length;
                const randomQuote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
                
                if (todayCompleted === habits.length && habits.length > 0) {
                    motivationEl.textContent = "üéâ Amazing! You've completed all habits today! " + randomQuote;
                } else if (todayCompleted > 0) {
                    motivationEl.textContent = `Great start! You've completed ${todayCompleted}/${habits.length} habits today. ${randomQuote}`;
                } else {
                    motivationEl.textContent = "Ready to make today count? " + randomQuote;
                }
            }
        }

        function renderStats() {
            document.getElementById('totalHabits').textContent = habits.length;

            const todayCompleted = habits.filter(h => h.completedDates.includes(getToday())).length;
            document.getElementById('completedToday').textContent = todayCompleted;

            const longestStreak = Math.max(...habits.map(h => calculateStreak(h.completedDates)), 0);
            document.getElementById('longestStreak').textContent = longestStreak;

            let totalCompletion = 0;
            if (habits.length > 0) {
                totalCompletion = Math.round(
                    habits.reduce((sum, h) => sum + calculateCompletion(h.completedDates), 0) / habits.length
                );
            }
            document.getElementById('overallCompletion').textContent = totalCompletion + '%';
        }

        function renderHabits() {
            const container = document.getElementById('habitsList');
            
            if (habits.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">üìù</div>
                        <h3>No habits yet</h3>
                        <p>Add your first habit above to start tracking!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = habits.map(habit => {
                const streak = calculateStreak(habit.completedDates);
                const completion = calculateCompletion(habit.completedDates);
                const dates = getPastDates(DAYS_TO_SHOW);

                return `
                    <div class="habit-card">
                        <div class="habit-header">
                            <div class="habit-info">
                                <h3>${escapeHtml(habit.name)}</h3>
                                <div class="habit-stats">
                                    <div class="habit-stat">
                                        <span class="icon streak-fire">üî•</span>
                                        <span class="value">${streak} day${streak !== 1 ? 's' : ''}</span>
                                    </div>
                                    <div class="habit-stat">
                                        <span class="icon">üìä</span>
                                        <span class="value">${completion}%</span>
                                    </div>
                                </div>
                            </div>
                            <button class="delete-btn" onclick="deleteHabit(${habit.id})" title="Delete habit">
                                üóëÔ∏è
                            </button>
                        </div>
                        <div class="calendar-section">
                            <div class="calendar-header">
                                <h4>Last ${DAYS_TO_SHOW} Days</h4>
                            </div>
                            <div class="calendar-grid">
                                ${dates.map(date => `
                                    <div class="day-cell ${habit.completedDates.includes(date) ? 'completed' : ''} ${isToday(date) ? 'today' : ''}" 
                                         onclick="toggleCompletion(${habit.id}, '${date}')"
                                         title="${formatDate(date)}">
                                        <span class="day-number">${new Date(date).getDate()}</span>
                                        ${habit.completedDates.includes(date) ? '<span class="check-mark">‚úì</span>' : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${completion}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Event listeners
        document.getElementById('addHabitForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const input = document.getElementById('habitInput');
            const name = input.value.trim();
            if (name) {
                addHabit(name);
                input.value = '';
            }
        });

        // Initialize the app
        init();
    </script>
</body>
</html>